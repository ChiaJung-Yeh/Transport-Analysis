<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 R 語言基礎語法 | 運輸資料分析角落：初學者園地</title>
  <meta name="description" content="運輸資料分析" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 R 語言基礎語法 | 運輸資料分析角落：初學者園地" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="運輸資料分析" />
  <meta name="github-repo" content="ChiaJung-Yeh/Transport-Analysis" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 R 語言基礎語法 | 運輸資料分析角落：初學者園地" />
  
  <meta name="twitter:description" content="運輸資料分析" />
  

<meta name="author" content="Chia-Jung (Robert) Yeh 葉家榮 PhD: Insitute of Transport and Logistics Studies, USYD M.S.: Department of Transportation and Logistics Management, NYCU" />


<meta name="date" content="2024-01-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="資料清洗與處理.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.28/datatables.js"></script>
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
<link rel="stylesheet" href="stylebox.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">運輸資料分析角落：初學者園地</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><strong>前言</strong></a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#資料分析心法"><i class="fa fa-check"></i>資料分析心法</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#安裝套件"><i class="fa fa-check"></i>安裝套件</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#tdx-套件使用方式"><i class="fa fa-check"></i>TDX 套件使用方式</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#其他參考資料"><i class="fa fa-check"></i>其他參考資料</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html"><i class="fa fa-check"></i><b>1</b> <strong>R 語言基礎語法</strong></a>
<ul>
<li class="chapter" data-level="1.1" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#物件object"><i class="fa fa-check"></i><b>1.1</b> 物件（Object）</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#向量vector"><i class="fa fa-check"></i><b>1.1.1</b> 向量（Vector）</a></li>
<li class="chapter" data-level="1.1.2" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#因子factor"><i class="fa fa-check"></i><b>1.1.2</b> 因子（Factor）</a></li>
<li class="chapter" data-level="1.1.3" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#矩陣matrix"><i class="fa fa-check"></i><b>1.1.3</b> 矩陣（Matrix）</a></li>
<li class="chapter" data-level="1.1.4" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#資料框data-frame"><i class="fa fa-check"></i><b>1.1.4</b> 資料框（Data Frame）</a></li>
<li class="chapter" data-level="1.1.5" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#陣列list"><i class="fa fa-check"></i><b>1.1.5</b> 陣列（List）</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#文字處理"><i class="fa fa-check"></i><b>1.2</b> 文字處理</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#連接字串"><i class="fa fa-check"></i><b>1.2.1</b> 連接字串</a></li>
<li class="chapter" data-level="1.2.2" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#轉換大小寫"><i class="fa fa-check"></i><b>1.2.2</b> 轉換大小寫</a></li>
<li class="chapter" data-level="1.2.3" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#擷取與取代字元"><i class="fa fa-check"></i><b>1.2.3</b> 擷取與取代字元</a></li>
<li class="chapter" data-level="1.2.4" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#拆解字串"><i class="fa fa-check"></i><b>1.2.4</b> 拆解字串</a></li>
<li class="chapter" data-level="1.2.5" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#計算字元數"><i class="fa fa-check"></i><b>1.2.5</b> 計算字元數</a></li>
<li class="chapter" data-level="1.2.6" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#搜尋字元"><i class="fa fa-check"></i><b>1.2.6</b> 搜尋字元</a></li>
<li class="chapter" data-level="1.2.7" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#文字填補"><i class="fa fa-check"></i><b>1.2.7</b> 文字填補</a></li>
<li class="chapter" data-level="1.2.8" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#文字排序"><i class="fa fa-check"></i><b>1.2.8</b> 文字排序</a></li>
<li class="chapter" data-level="1.2.9" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#正規表示式"><i class="fa fa-check"></i><b>1.2.9</b> 正規表示式</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#控制流程"><i class="fa fa-check"></i><b>1.3</b> 控制流程</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#邏輯判斷"><i class="fa fa-check"></i><b>1.3.1</b> 邏輯判斷</a></li>
<li class="chapter" data-level="1.3.2" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#for迴圈"><i class="fa fa-check"></i><b>1.3.2</b> <code>for()</code>迴圈</a></li>
<li class="chapter" data-level="1.3.3" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#while迴圈"><i class="fa fa-check"></i><b>1.3.3</b> <code>while()</code>迴圈</a></li>
<li class="chapter" data-level="1.3.4" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#建立自定義函式"><i class="fa fa-check"></i><b>1.3.4</b> 建立自定義函式</a></li>
<li class="chapter" data-level="1.3.5" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#錯誤處理"><i class="fa fa-check"></i><b>1.3.5</b> 錯誤處理</a></li>
<li class="chapter" data-level="1.3.6" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#apply函式家族"><i class="fa fa-check"></i><b>1.3.6</b> <code>apply</code>函式家族</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#資料讀取與匯出"><i class="fa fa-check"></i><b>1.4</b> 資料讀取與匯出</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#csv-與-txt-檔"><i class="fa fa-check"></i><b>1.4.1</b> CSV 與 TXT 檔</a></li>
<li class="chapter" data-level="1.4.2" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#json-檔"><i class="fa fa-check"></i><b>1.4.2</b> JSON 檔</a></li>
<li class="chapter" data-level="1.4.3" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#xml-檔案"><i class="fa fa-check"></i><b>1.4.3</b> XML 檔案</a></li>
<li class="chapter" data-level="1.4.4" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#資料來源"><i class="fa fa-check"></i><b>1.4.4</b> 資料來源</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="資料清洗與處理.html"><a href="資料清洗與處理.html"><i class="fa fa-check"></i><b>2</b> <strong>資料清洗與處理</strong></a></li>
<li class="chapter" data-level="3" data-path="資料清洗與處理-1.html"><a href="資料清洗與處理-1.html"><i class="fa fa-check"></i><b>3</b> <strong>資料清洗與處理</strong></a></li>
<li class="chapter" data-level="4" data-path="基本資料統計.html"><a href="基本資料統計.html"><i class="fa fa-check"></i><b>4</b> <strong>基本資料統計</strong></a>
<ul>
<li class="chapter" data-level="4.1" data-path="基本資料統計.html"><a href="基本資料統計.html#公車資料統計分析"><i class="fa fa-check"></i><b>4.1</b> 公車資料統計分析</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="基本資料統計.html"><a href="基本資料統計.html#路線統計分析"><i class="fa fa-check"></i><b>4.1.1</b> 路線統計分析</a></li>
<li class="chapter" data-level="4.1.2" data-path="基本資料統計.html"><a href="基本資料統計.html#站牌統計分析"><i class="fa fa-check"></i><b>4.1.2</b> 站牌統計分析</a></li>
<li class="chapter" data-level="4.1.3" data-path="基本資料統計.html"><a href="基本資料統計.html#站間行駛距離計算"><i class="fa fa-check"></i><b>4.1.3</b> 站間行駛距離計算</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://www.sydney.edu.au/business/about/our-people/research-students/chia-jung-yeh-557.html" target="blank">葉家榮 Chia-Jung Yeh</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">運輸資料分析角落：初學者園地</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-語言基礎語法" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chapter 1</span> <strong>R 語言基礎語法</strong><a href="r-語言基礎語法.html#r-語言基礎語法" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>本章節系統性介紹 R 語言的重要語法和<code>dplyr</code>套件的功能及用法，請務必熟悉各函式，以便後續程式碼撰寫。</p>
<div id="物件object" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> 物件（Object）<a href="r-語言基礎語法.html#物件object" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>物件是 R 語言中構成資料的基本要素，常見者包含五大類：</p>
<ol style="list-style-type: decimal">
<li>向量（vector）<br />
</li>
<li>因子（factor）<br />
</li>
<li>矩陣（matrix）<br />
</li>
<li>資料框（data frame）<br />
</li>
<li>陣列（list）</li>
</ol>
<p>物件的圖示如圖<a href="r-語言基礎語法.html#fig:object-fig">1.1</a>。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:object-fig"></span>
<img src="figure/object.png" alt="R 物件示意圖" width="80%" />
<p class="caption">
圖 1.1: R 物件示意圖
</p>
</div>
<p>以下小節針對各基本要素的構建與運算詳細說明。</p>
<div id="向量vector" class="section level3 hasAnchor" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> 向量（Vector）<a href="r-語言基礎語法.html#向量vector" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量的性質</strong>
</p>
<ul>
<li>一組值<br />
</li>
<li>一維<br />
</li>
<li>資料型態可為：數值、文字、邏輯值</li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立向量</strong>
</p>
<p>建立向量可利用<code>c()</code>函式建構。</p>
<p style="font-size:18px;line-height:1">
<strong><u>數值向量</u></strong>
</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="r-語言基礎語法.html#cb1-1" tabindex="-1"></a>vec1<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>文字向量</u></strong>
</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="r-語言基礎語法.html#cb3-1" tabindex="-1"></a>vec2<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;D&quot;</span>,<span class="st">&quot;E&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>邏輯向量</u></strong>
</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="r-語言基礎語法.html#cb5-1" tabindex="-1"></a>vec3<span class="ot">=</span><span class="fu">c</span>(T,F,T,F,T)</span>
<span id="cb5-2"><a href="r-語言基礎語法.html#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="r-語言基礎語法.html#cb5-3" tabindex="-1"></a><span class="co"># 或寫完整的邏輯值</span></span>
<span id="cb5-4"><a href="r-語言基礎語法.html#cb5-4" tabindex="-1"></a>vec3<span class="ot">=</span><span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE FALSE  TRUE</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 擷取向量中特定元素</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>擷取單一元素</u></strong>
</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="r-語言基礎語法.html#cb7-1" tabindex="-1"></a>vec2[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] &quot;C&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>擷取多個連續元素</u></strong>
</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="r-語言基礎語法.html#cb9-1" tabindex="-1"></a>vec2[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] &quot;B&quot; &quot;C&quot; &quot;D&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>擷取多個非連續元素</u></strong>
</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="r-語言基礎語法.html#cb11-1" tabindex="-1"></a>vec2[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;C&quot; &quot;E&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>以邏輯值擷取元素</u></strong>
</p>
<p>請注意輸入的邏輯值向量長度必須與原向量相同！</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="r-語言基礎語法.html#cb13-1" tabindex="-1"></a>vec2[<span class="fu">c</span>(T,T,F,F,T)]</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;B&quot; &quot;E&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 連續數值資料</strong>
</p>
<p>利用<code>seq()</code>函式建立連續數值，程式碼撰寫如下：</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="r-語言基礎語法.html#cb15-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from=</span>開始數值, <span class="at">to=</span>結束數值, <span class="at">by=</span>遞增數值)</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="r-語言基礎語法.html#cb16-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from=</span><span class="dv">2</span>, <span class="at">to=</span><span class="dv">20</span>, <span class="at">by=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1]  2  4  6  8 10 12 14 16 18 20</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量運算</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>統計運算</u></strong>
</p>
<p>以下建立一個向量<code>vec4</code>作為範例，所有運算的程式碼與結果請參照表<a href="r-語言基礎語法.html#tab:vector-operation-table">1.1</a>。</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="r-語言基礎語法.html#cb18-1" tabindex="-1"></a>vec4<span class="ot">=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">3</span>,<span class="dv">15</span>,<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">12</span>)</span></code></pre></div>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:vector-operation-table">表 1.1: </span>向量運算
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
運算
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
程式碼
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
輸出結果
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
最大值
</td>
<td style="text-align:left;">
<code>max(vec4)</code>
</td>
<td style="text-align:left;">
<code>15</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
最小值
</td>
<td style="text-align:left;">
<code>min(vec4)</code>
</td>
<td style="text-align:left;">
<code>2</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
最大值索引
</td>
<td style="text-align:left;">
<code>which.max(vec4)</code>
</td>
<td style="text-align:left;">
<code>4</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
最小值索引
</td>
<td style="text-align:left;">
<code>which.min(vec4)</code>
</td>
<td style="text-align:left;">
<code>6</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
全域
</td>
<td style="text-align:left;">
<code>range(vec4)</code>
</td>
<td style="text-align:left;">
<code>2  15</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
總和
</td>
<td style="text-align:left;">
<code>sum(vec4)</code>
</td>
<td style="text-align:left;">
<code>60</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
平均
</td>
<td style="text-align:left;">
<code>mean(vec4)</code>
</td>
<td style="text-align:left;">
<code>7.5</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
中位數
</td>
<td style="text-align:left;">
<code>median(vec4)</code>
</td>
<td style="text-align:left;">
<code>7</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
乘積
</td>
<td style="text-align:left;">
<code>prod(vec4)</code>
</td>
<td style="text-align:left;">
<code>2332800</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
變異數
</td>
<td style="text-align:left;">
<code>var(vec4)</code>
</td>
<td style="text-align:left;">
<code>19.714</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
標準差
</td>
<td style="text-align:left;">
<code>sd(vec4)</code>
</td>
<td style="text-align:left;">
<code>4.44</code>
</td>
</tr>
</tbody>
</table>
<p style="font-size:18px;line-height:1">
<strong><u>數學運算</u></strong>
</p>
<p>以下利用<code>vec4</code>與新建向量<code>vec5</code>作為範例，所有運算的程式碼與結果請參照表<a href="r-語言基礎語法.html#tab:vector-calculation-table">1.2</a>。。</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="r-語言基礎語法.html#cb19-1" tabindex="-1"></a>vec5<span class="ot">=</span><span class="fu">c</span>(<span class="fl">0.57</span>,<span class="fl">4.28</span>,<span class="sc">-</span><span class="fl">1.23</span>,<span class="fl">6.58</span>,<span class="sc">-</span><span class="fl">4.67</span>,<span class="fl">2.09</span>)</span></code></pre></div>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:vector-calculation-table">表 1.2: </span>數學運算
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
運算
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
程式碼
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
輸出結果
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
絕對值
</td>
<td style="text-align:left;">
<code>abs(vec5)</code>
</td>
<td style="text-align:left;">
<code>0.57 4.28 1.23 6.58 4.67 2.09</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
根號
</td>
<td style="text-align:left;">
<code>sqrt(vec4)</code>
</td>
<td style="text-align:left;">
<code>2.236 3 1.732 3.873 2.449 1.414 2.828 3.464</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
四捨五入
</td>
<td style="text-align:left;">
<code>round(vec5, digits=1)</code>
</td>
<td style="text-align:left;">
<code>0.6  4.3  -1.2  6.6  -4.7  2.1</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
取整函數
</td>
<td style="text-align:left;">
<code>ceiling(vec5)</code>
</td>
<td style="text-align:left;">
<code>1 5 -1 7 -4 3</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
下取整函數
</td>
<td style="text-align:left;">
<code>floor(vec5)</code>
</td>
<td style="text-align:left;">
<code>0 4 -2 6 -5 2</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
對數
</td>
<td style="text-align:left;">
<code>log(vec4)</code>
</td>
<td style="text-align:left;">
<code>1.609 2.197 1.099 2.708 1.792 0.693 2.079 2.485</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
指數
</td>
<td style="text-align:left;">
<code>exp(vec4)</code>
</td>
<td style="text-align:left;">
<code>148.4 8103.1 20.1 3269017.4 403.4 7.4 2981 162754.8</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
標準化
</td>
<td style="text-align:left;">
<code>scale(vec4)</code>
</td>
<td style="text-align:left;">
<code>-0.563 0.338 -1.013 1.689 -0.338 -1.239 0.113 1.013</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
累積加總
</td>
<td style="text-align:left;">
<code>cumsum(vec4)</code>
</td>
<td style="text-align:left;">
<code>5 14 17 32 38 40 48 60</code>
</td>
</tr>
</tbody>
</table>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量長度</strong>
</p>
<p>計算向量中的元素個數。</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="r-語言基礎語法.html#cb20-1" tabindex="-1"></a><span class="fu">length</span>(vec4)</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量統計</strong>
</p>
<p>統計向量中各元素的個數。</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="r-語言基礎語法.html#cb22-1" tabindex="-1"></a>vec_tab<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;D&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;B&quot;</span>)</span>
<span id="cb22-2"><a href="r-語言基礎語法.html#cb22-2" tabindex="-1"></a><span class="fu">table</span>(vec_tab)</span></code></pre></div>
<pre><code>## vec_tab
## A B C D E 
## 2 3 2 1 4</code></pre>
<H2 id="vector-sort">
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量排序</strong>
</p>
</H2>
<ul>
<li><code>sort()</code>函式直接將向量予以由小至大之排序<br />
</li>
<li><code>order()</code>函式回傳向量由小至大排序所對應的原向量序號<br />
</li>
<li><code>rank()</code>函式回傳向量中各元素由小至大之順序</li>
</ul>
<p>程式碼撰寫如下，請參照圖<a href="r-語言基礎語法.html#fig:vector-sort-order-rank-fig">1.2</a>之示意圖。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:vector-sort-order-rank-fig"></span>
<img src="figure/sort_order_rank.png" alt="排序函式示意圖" width="90%" />
<p class="caption">
圖 1.2: 排序函式示意圖
</p>
</div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="r-語言基礎語法.html#cb24-1" tabindex="-1"></a><span class="fu">sort</span>(vec4)</span></code></pre></div>
<pre><code>## [1]  2  3  5  6  8  9 12 15</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="r-語言基礎語法.html#cb26-1" tabindex="-1"></a><span class="fu">order</span>(vec4)</span></code></pre></div>
<pre><code>## [1] 6 3 1 5 7 2 8 4</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="r-語言基礎語法.html#cb28-1" tabindex="-1"></a><span class="fu">rank</span>(vec4)</span></code></pre></div>
<pre><code>## [1] 3 6 2 8 4 1 5 7</code></pre>
<p>由<code>sort()</code>的結果可知，其將<code>vec4</code>向量由小至大排序。<code>order()</code>則是回傳排序所對應至原向量的序號，例如回傳結果的最後一個值是<code>4</code>，表示該向量中最大的數值位於向量的第 4 個元素。根據上述，我們亦可透過如下程式碼達到與<code>sort()</code>相同的結果。</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="r-語言基礎語法.html#cb30-1" tabindex="-1"></a>vec4[<span class="fu">order</span>(vec4)]</span></code></pre></div>
<pre><code>## [1]  2  3  5  6  8  9 12 15</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量唯一值</strong>
</p>
<p>去除重複的值。</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="r-語言基礎語法.html#cb32-1" tabindex="-1"></a>vec_dup<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">1</span>,<span class="dv">8</span>,<span class="dv">5</span>,<span class="dv">2</span>)</span>
<span id="cb32-2"><a href="r-語言基礎語法.html#cb32-2" tabindex="-1"></a><span class="fu">unique</span>(vec_dup)</span></code></pre></div>
<pre><code>## [1] 1 9 5 2 6 8</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 檢查使否存在 NA</strong>
</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="r-語言基礎語法.html#cb34-1" tabindex="-1"></a>vec_na<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">5</span>,<span class="cn">NA</span>,<span class="dv">6</span>,<span class="cn">NA</span>)</span>
<span id="cb34-2"><a href="r-語言基礎語法.html#cb34-2" tabindex="-1"></a><span class="fu">is.na</span>(vec_na)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE FALSE  TRUE</code></pre>
<H2 id="vector-computation">
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量四則運算</strong>
</p>
</H2>
<p>以下範例使用<code>vec4</code>與新建立的<code>vec6</code>示範向量的四則運算。</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="r-語言基礎語法.html#cb36-1" tabindex="-1"></a>vec6<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">7</span>,<span class="dv">4</span>,<span class="dv">10</span>,<span class="dv">3</span>)</span></code></pre></div>
<H2 id="vector-compute">
<p style="font-size:18px;line-height:1">
<strong><u>兩向量運算</u></strong>
</p>
</H2>
<p>兩向量運算時，兩組向量的長度（<code>length()</code>）務必相同！<br />
所有運算結果如表<a href="r-語言基礎語法.html#tab:vector-arithmetic-table">1.3</a>。</p>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:vector-arithmetic-table">表 1.3: </span>向量運算
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
運算
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
程式碼
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
輸出結果
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
<strong><code>vec4=c(5,9,3,15,6,2,8,12)</code><br />
<code>vec6=c(2,5,8,11,7,4,10,3)</code></strong>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
加法
</td>
<td style="text-align:left;">
<code>vec4+vec6</code>
</td>
<td style="text-align:left;">
<code>7 14 11 26 13 6 18 15</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
減法
</td>
<td style="text-align:left;">
<code>vec4-vec6</code>
</td>
<td style="text-align:left;">
<code>3 4 -5 4 -1 -2 -2 9</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
乘法
</td>
<td style="text-align:left;">
<code>vec4*vec6</code>
</td>
<td style="text-align:left;">
<code>10 45 24 165 42 8 80 36</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
除法
</td>
<td style="text-align:left;">
<code>vec4/vec6</code>
</td>
<td style="text-align:left;">
<code>2.5 1.8 0.375 1.364 0.857 0.5 0.8 4</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
取餘數
</td>
<td style="text-align:left;">
<code>vec4 %% vec6</code>
</td>
<td style="text-align:left;">
<code>1 4 3 4 6 2 8 0</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
取除數
</td>
<td style="text-align:left;">
<code>vec4 %/% vec6</code>
</td>
<td style="text-align:left;">
<code>2 1 0 1 0 0 0 4</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
內積
</td>
<td style="text-align:left;">
<code>vec4 %*% vec6</code>
</td>
<td style="text-align:left;">
<code>410</code>
</td>
</tr>
</tbody>
</table>
<p style="font-size:18px;line-height:1">
<strong><u>向量與元素運算</u></strong>
</p>
<p>一組向量與一個元素之間的運算，即是將向量中的每一個元素分別與該元素運算。</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="r-語言基礎語法.html#cb37-1" tabindex="-1"></a>vec6<span class="sc">+</span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1]  7 10 13 16 12  9 15  8</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="r-語言基礎語法.html#cb39-1" tabindex="-1"></a>vec6<span class="sc">*</span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] 10 25 40 55 35 20 50 15</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 檢查元素是否包含於向量</strong>
</p>
<p>檢查<code>vec6</code>向量內個元素是否包含於<code>c(1,2,3)</code>的向量中。</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="r-語言基礎語法.html#cb41-1" tabindex="-1"></a>vec6 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 轉換資料型態</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>文字轉換為數值</u></strong>
</p>
<p>建立<code>vec_cha</code>文字資料</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="r-語言基礎語法.html#cb43-1" tabindex="-1"></a>vec_cha<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;1&quot;</span>,<span class="st">&quot;2&quot;</span>,<span class="st">&quot;3&quot;</span>,<span class="st">&quot;4&quot;</span>,<span class="st">&quot;5&quot;</span>)</span></code></pre></div>
<p>先利用<code>class()</code>函式檢查<code>vec_cha</code>資料型態</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="r-語言基礎語法.html#cb44-1" tabindex="-1"></a><span class="fu">class</span>(vec_cha)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>利用<code>as.numeric()</code>函式轉化為數值資料</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="r-語言基礎語法.html#cb46-1" tabindex="-1"></a><span class="fu">as.numeric</span>(vec_cha)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>數值轉換為文字</u></strong>
</p>
<p>另外，可利用<code>as.character()</code>函式轉化為文字資料</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="r-語言基礎語法.html#cb48-1" tabindex="-1"></a>vec_num<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span>
<span id="cb48-2"><a href="r-語言基礎語法.html#cb48-2" tabindex="-1"></a><span class="fu">as.character</span>(vec_num)</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立重複資料</strong>
</p>
<p>利用<code>rep()</code>函式建立重複資料，該函式主要有兩大引數可以設定：</p>
<ul>
<li><code>each=</code>是設定每一個元素重複的次數</li>
<li><code>times=</code>是設定該向量整體循環的次數</li>
</ul>
<p>以實際範例說明之，程式碼撰寫如下：</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="r-語言基礎語法.html#cb50-1" tabindex="-1"></a>vec6<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">7</span>,<span class="dv">4</span>,<span class="dv">10</span>,<span class="dv">3</span>)</span>
<span id="cb50-2"><a href="r-語言基礎語法.html#cb50-2" tabindex="-1"></a></span>
<span id="cb50-3"><a href="r-語言基礎語法.html#cb50-3" tabindex="-1"></a><span class="co"># 設定每一個元素重複的次數</span></span>
<span id="cb50-4"><a href="r-語言基礎語法.html#cb50-4" tabindex="-1"></a><span class="fu">rep</span>(vec6, <span class="at">each=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1]  2  2  5  5  8  8 11 11  7  7  4  4 10 10  3  3</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="r-語言基礎語法.html#cb52-1" tabindex="-1"></a><span class="co"># 設定向量整體重複的次數</span></span>
<span id="cb52-2"><a href="r-語言基礎語法.html#cb52-2" tabindex="-1"></a><span class="fu">rep</span>(vec6, <span class="at">times=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1]  2  5  8 11  7  4 10  3  2  5  8 11  7  4 10  3</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳向量中 TRUE 索引值</strong>
</p>
<p><code>which()</code>函式可用以回傳向量中 TRUE 的索引值。</p>
<p style="font-size:18px;line-height:1">
<strong><u>TRUE 索引值</u></strong>
</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="r-語言基礎語法.html#cb54-1" tabindex="-1"></a>vec3<span class="ot">=</span><span class="fu">c</span>(T,F,T,F,T)</span>
<span id="cb54-2"><a href="r-語言基礎語法.html#cb54-2" tabindex="-1"></a><span class="fu">which</span>(vec3)</span></code></pre></div>
<pre><code>## [1] 1 3 5</code></pre>
<p>由上述範例可知，TRUE 位於<code>vec3</code>向量的第 1、3、5 個元素。</p>
<p style="font-size:18px;line-height:1">
<strong><u>回傳符合條件索引值</u></strong>
</p>
<p>除了上述基本案例外，通常我們會藉由運算子（<code>==</code>, <code>&gt;</code>, <code>&lt;</code>, …）以尋找符合條件的元素，並進一步透過<code>which()</code>函式回傳結果為 TRUE 的索引值。範例如下。</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="r-語言基礎語法.html#cb56-1" tabindex="-1"></a>vec6<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">7</span>,<span class="dv">4</span>,<span class="dv">10</span>,<span class="dv">3</span>)</span>
<span id="cb56-2"><a href="r-語言基礎語法.html#cb56-2" tabindex="-1"></a></span>
<span id="cb56-3"><a href="r-語言基礎語法.html#cb56-3" tabindex="-1"></a><span class="co"># vec6大於5的邏輯判斷</span></span>
<span id="cb56-4"><a href="r-語言基礎語法.html#cb56-4" tabindex="-1"></a>vec6<span class="sc">&gt;</span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE  TRUE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="r-語言基礎語法.html#cb58-1" tabindex="-1"></a><span class="co"># 回傳vec6大於5的索引值</span></span>
<span id="cb58-2"><a href="r-語言基礎語法.html#cb58-2" tabindex="-1"></a><span class="fu">which</span>(vec6<span class="sc">&gt;</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 3 4 5 7</code></pre>
</div>
<div id="因子factor" class="section level3 hasAnchor" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> 因子（Factor）<a href="r-語言基礎語法.html#因子factor" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 因子的性質</strong>
</p>
<ul>
<li>由文字向量建立<br />
</li>
<li>須設定文字層級<br />
</li>
<li>設立因子的延伸應用：
<ul>
<li>在<code>ggplot2</code>套件中調整圖例順序<br />
</li>
<li>在計量模型中建立啞變量（dummy variables）</li>
</ul></li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立因子</strong>
</p>
<p>因子的建立可以使用<code>factor()</code>函式，其中必須透過<code>levels=</code>引數設定層級，程式碼建構如下：</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="r-語言基礎語法.html#cb60-1" tabindex="-1"></a><span class="fu">factor</span>(文字向量, <span class="at">levels=</span>期望的層級向量)</span></code></pre></div>
<p>以下列簡單範例說明因子的功能，建立<code>school</code>之文字向量。</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="r-語言基礎語法.html#cb61-1" tabindex="-1"></a>school<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;大學&quot;</span>,<span class="st">&quot;幼稚園&quot;</span>,<span class="st">&quot;國小&quot;</span>,<span class="st">&quot;高中&quot;</span>,<span class="st">&quot;國中&quot;</span>)</span></code></pre></div>
<p>若欲將<code>school</code>轉換為具有層級意義的因子，並依據學校層級排序，則程式碼撰寫如下：</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="r-語言基礎語法.html#cb62-1" tabindex="-1"></a>school_fc<span class="ot">=</span><span class="fu">factor</span>(school, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;幼稚園&quot;</span>,<span class="st">&quot;國小&quot;</span>,<span class="st">&quot;國中&quot;</span>,<span class="st">&quot;高中&quot;</span>,<span class="st">&quot;大學&quot;</span>))</span>
<span id="cb62-2"><a href="r-語言基礎語法.html#cb62-2" tabindex="-1"></a>school_fc</span></code></pre></div>
<pre><code>## [1] 大學   幼稚園 國小   高中   國中  
## Levels: 幼稚園 國小 國中 高中 大學</code></pre>
<p>由上述可發現，有別於文字向量，因子會另出現「Levels:」的訊息，表示文字具有層級意義。<br />
最後可利用<code>is.factor()</code>函式判斷一變數是否為因子，抑或利用<code>class()</code>函式逕查詢該變數的資料型態。</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="r-語言基礎語法.html#cb64-1" tabindex="-1"></a><span class="fu">is.factor</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="r-語言基礎語法.html#cb66-1" tabindex="-1"></a><span class="fu">class</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<p>上述所建立的因子具有層級意義，故可以排序，可進一步利用<code>sort()</code>函式排序，程式碼如下：</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="r-語言基礎語法.html#cb68-1" tabindex="-1"></a><span class="fu">sort</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] 幼稚園 國小   國中   高中   大學  
## Levels: 幼稚園 國小 國中 高中 大學</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立有序因子</strong>
</p>
<p>上述所建立的因子具有層級意義，可以排序，然而各元素間不具有大小意義，無法直接比較大小值。以<code>school_fc</code>為例，我們所設定的「大學」層級高於「幼稚園」，然而這不意謂著<code>大學&gt;幼稚園</code>。因此若直接拿兩元素相比較大小，程式會出現警告（大小關係對因子無意義），且回傳<code>NA</code>，試驗如下：</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="r-語言基礎語法.html#cb70-1" tabindex="-1"></a>school_fc[<span class="dv">1</span>]<span class="sc">&gt;</span>school_fc[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## Warning in Ops.factor(school_fc[1], school_fc[2]): &#39;&gt;&#39; 對因子沒有意義</code></pre>
<pre><code>## [1] NA</code></pre>
<p>若欲建立具大小關係的因子，則需在<code>factor()</code>函式中設定<code>order=T</code>引數，以表達具有順序意義。</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="r-語言基礎語法.html#cb73-1" tabindex="-1"></a>school_order<span class="ot">=</span><span class="fu">factor</span>(school, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;幼稚園&quot;</span>,<span class="st">&quot;國小&quot;</span>,<span class="st">&quot;國中&quot;</span>,<span class="st">&quot;高中&quot;</span>,<span class="st">&quot;大學&quot;</span>), <span class="at">order=</span>T)</span>
<span id="cb73-2"><a href="r-語言基礎語法.html#cb73-2" tabindex="-1"></a>school_order</span></code></pre></div>
<pre><code>## [1] 大學   幼稚園 國小   高中   國中  
## Levels: 幼稚園 &lt; 國小 &lt; 國中 &lt; 高中 &lt; 大學</code></pre>
<p>由輸出結果可發現，層級中具有「&lt;」符號，用以表達有序之大小關係。</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="r-語言基礎語法.html#cb75-1" tabindex="-1"></a><span class="co"># 比較幼稚園與大學的大小關係</span></span>
<span id="cb75-2"><a href="r-語言基礎語法.html#cb75-2" tabindex="-1"></a>school_order[<span class="dv">1</span>]<span class="sc">&gt;</span>school_order[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 轉換資料型態</strong>
</p>
<p>可透過<code>as.character()</code>將因子轉換為單純的文字向量，亦可藉由<code>as.numeric()</code>將因子轉換為數值，而該數值乃依據層級的大小給定，層級越高（後）者，數值愈大。以上述<code>school_fc</code>為案例說明。</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="r-語言基礎語法.html#cb77-1" tabindex="-1"></a><span class="co"># 轉換為文字向量</span></span>
<span id="cb77-2"><a href="r-語言基礎語法.html#cb77-2" tabindex="-1"></a><span class="fu">as.character</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] &quot;大學&quot;   &quot;幼稚園&quot; &quot;國小&quot;   &quot;高中&quot;   &quot;國中&quot;</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="r-語言基礎語法.html#cb79-1" tabindex="-1"></a><span class="co"># 轉換為數值向量</span></span>
<span id="cb79-2"><a href="r-語言基礎語法.html#cb79-2" tabindex="-1"></a><span class="fu">as.numeric</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] 5 1 2 4 3</code></pre>
</div>
<div id="矩陣matrix" class="section level3 hasAnchor" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> 矩陣（Matrix）<a href="r-語言基礎語法.html#矩陣matrix" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 矩陣的性質</strong>
</p>
<ul>
<li>二維<br />
</li>
<li>含括多個橫列（rows）與直行（columns）<br />
</li>
<li>可以組合「相同」資料型態的向量 (文字向量、數值向量、邏輯向量)</li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立矩陣</strong>
</p>
<p>利用<code>matrix()</code>函式建立矩陣，其中必須設定兩引數：</p>
<ul>
<li><code>nrow=</code> 設定矩陣的橫列數<br />
</li>
<li><code>ncol=</code> 設定矩陣的直行數</li>
</ul>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="r-語言基礎語法.html#cb81-1" tabindex="-1"></a><span class="fu">matrix</span>(向量, <span class="at">nrow=</span>, <span class="at">ncol=</span>)</span></code></pre></div>
<p>範例如下：</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="r-語言基礎語法.html#cb82-1" tabindex="-1"></a>mat1<span class="ot">=</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="at">nrow=</span><span class="dv">3</span>, <span class="at">ncol=</span><span class="dv">5</span>)</span>
<span id="cb82-2"><a href="r-語言基礎語法.html#cb82-2" tabindex="-1"></a>mat1</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    4    7   10   13
## [2,]    2    5    8   11   14
## [3,]    3    6    9   12   15</code></pre>
<p>由回傳結果可發現，該矩陣是先由上至下，再由左至右填入向量。若希望矩陣的填法是先由左至右，再由上至下，則須設定引數<code>byrow=T</code>，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="r-語言基礎語法.html#cb84-1" tabindex="-1"></a>mat2<span class="ot">=</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="at">nrow=</span><span class="dv">3</span>, <span class="at">ncol=</span><span class="dv">5</span>, <span class="at">byrow=</span>T)</span>
<span id="cb84-2"><a href="r-語言基礎語法.html#cb84-2" tabindex="-1"></a>mat2</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    2    3    4    5
## [2,]    6    7    8    9   10
## [3,]   11   12   13   14   15</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 查看矩陣的維度</strong>
</p>
<p>矩陣是二維的資料，若要進一步該二維資料中的橫列與直行個數，可利用<code>nrow()</code>與<code>ncol()</code>函式分別查看，或逕利用<code>dim()</code>函式查看之。</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="r-語言基礎語法.html#cb86-1" tabindex="-1"></a><span class="fu">nrow</span>(mat2)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="r-語言基礎語法.html#cb88-1" tabindex="-1"></a><span class="fu">ncol</span>(mat2)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="r-語言基礎語法.html#cb90-1" tabindex="-1"></a><span class="fu">dim</span>(mat2)</span></code></pre></div>
<pre><code>## [1] 3 5</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳矩陣的特定元素</strong>
</p>
<p>利用中括號<code>[ , ]</code>可回傳特定元素的值，其中逗點前必須放置橫列的索引值，而逗點後則是直行的索引值。<br />
以第 2 橫列第 4 行為例，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="r-語言基礎語法.html#cb92-1" tabindex="-1"></a>mat2[<span class="dv">2</span>, <span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 轉置矩陣</strong>
</p>
<p>藉由<code>t()</code>函式將矩陣予以轉置（transpose）。</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="r-語言基礎語法.html#cb94-1" tabindex="-1"></a><span class="fu">t</span>(mat2)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    6   11
## [2,]    2    7   12
## [3,]    3    8   13
## [4,]    4    9   14
## [5,]    5   10   15</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 矩陣運算</strong>
</p>
<p>矩陣的運算是 R 語言的利器，執行效率相當高，在許多統計模型背後的運算亦是牽涉複雜的矩陣運算。以下簡單介紹重要的運算函式。</p>
<p style="font-size:18px;line-height:1">
<strong><u>橫列與直行運算</u></strong>
</p>
<p>橫列與直行的加總與平均值計算彙整如表<a href="r-語言基礎語法.html#tab:matrix-operation-table">1.4</a>。</p>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:matrix-operation-table">表 1.4: </span>矩陣運算
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
加總
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
平均
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: middle !important;" rowspan="2">
橫列
</td>
<td style="text-align:left;">
<code>rowSums(mat2)</code>
</td>
<td style="text-align:left;">
<code>rowMeans(mat2)</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>15 40 65</code>
</td>
<td style="text-align:left;">
<code>3 8 13</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: middle !important;" rowspan="2">
直行
</td>
<td style="text-align:left;">
<code>colSums(mat2)</code>
</td>
<td style="text-align:left;">
<code>colMeans(mat2)</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>18 21 24 27 30</code>
</td>
<td style="text-align:left;">
<code>6 7 8 9 10</code>
</td>
</tr>
</tbody>
</table>
<p style="font-size:18px;line-height:1">
<strong><u>四則運算</u></strong>
</p>
<p>矩陣的四則運算大致操作方法與<A href="#vector-computation">向量的運算</A>雷同，惟須注意的是大部分的四則運算皆須確保兩矩陣的維度（<code>dim()</code>）相同。以矩陣的加法為例，程式碼如下。</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="r-語言基礎語法.html#cb96-1" tabindex="-1"></a>mat1<span class="sc">+</span>mat2</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    2    6   10   14   18
## [2,]    8   12   16   20   24
## [3,]   14   18   22   26   30</code></pre>
<p>矩陣運算中「內積」是相當常見的，應用於諸多模型的係數校估過程中，可利用<code>%*%</code>達成目的。在內積運算時另須確保第一個運算之矩陣的直行數（<code>ncol</code>）必須與第二個運算矩陣之橫列數（<code>nrow</code>）相同。以<code>mat1</code>與<code>mat2_trans</code>（<code>mat2</code>的轉置矩陣）為例，程式範例如下。</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="r-語言基礎語法.html#cb98-1" tabindex="-1"></a>mat2_trans<span class="ot">=</span><span class="fu">t</span>(mat2)</span>
<span id="cb98-2"><a href="r-語言基礎語法.html#cb98-2" tabindex="-1"></a>mat1 <span class="sc">%*%</span> mat2_trans</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]  135  310  485
## [2,]  150  350  550
## [3,]  165  390  615</code></pre>
<p>請注意，<code>mat1</code>的維度為 3 橫列 5 直行；<code>mat2_trans</code>的維度為 5 橫列 3 直行，其中第一個矩陣的直行數與第二個運算矩陣之橫列數務必相同，最終所得結果為 <code>3*3</code> 的矩陣。</p>
</div>
<div id="資料框data-frame" class="section level3 hasAnchor" number="1.1.4">
<h3><span class="header-section-number">1.1.4</span> 資料框（Data Frame）<a href="r-語言基礎語法.html#資料框data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 資料框的性質</strong>
</p>
<ul>
<li>類似矩陣（Matrix），但可涵括多種不同的資料型態<br />
</li>
<li>功能類似 Excel 的工作表<br />
</li>
<li>資料分析中最常見的資料型態<br />
</li>
<li>可利用<code>dplyr</code>套件處理資料（參見<a href="資料清洗與處理.html#資料清洗與處理"><code>dplyr</code>資料處理</a>）</li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立資料框</strong>
</p>
<p>資料框的建立如下程式碼：</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="r-語言基礎語法.html#cb100-1" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">VAR1=</span><span class="fu">c</span>(), <span class="at">VAR2=</span><span class="fu">c</span>(), <span class="at">VAR3=</span><span class="fu">c</span>(), ...)</span></code></pre></div>
<p>VAR1、VAR2、VAR3 皆表示資料框中的變數名稱，亦即表格中的表頭名。</p>
<p>以下簡單範例說明資料框的建構。</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="r-語言基礎語法.html#cb101-1" tabindex="-1"></a>StuScore<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">StudentID=</span><span class="fu">c</span>(<span class="st">&quot;ID1&quot;</span>,<span class="st">&quot;ID2&quot;</span>,<span class="st">&quot;ID3&quot;</span>,<span class="st">&quot;ID4&quot;</span>,<span class="st">&quot;ID5&quot;</span>),</span>
<span id="cb101-2"><a href="r-語言基礎語法.html#cb101-2" tabindex="-1"></a>                    <span class="at">Name=</span><span class="fu">c</span>(<span class="st">&quot;Bob&quot;</span>,<span class="st">&quot;Mary&quot;</span>,<span class="st">&quot;Robert&quot;</span>,<span class="st">&quot;Jason&quot;</span>,<span class="st">&quot;Jane&quot;</span>),</span>
<span id="cb101-3"><a href="r-語言基礎語法.html#cb101-3" tabindex="-1"></a>                    <span class="at">Score=</span><span class="fu">c</span>(<span class="dv">60</span>,<span class="dv">80</span>,<span class="dv">40</span>,<span class="dv">50</span>,<span class="dv">100</span>))</span>
<span id="cb101-4"><a href="r-語言基礎語法.html#cb101-4" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID   Name Score
## 1       ID1    Bob    60
## 2       ID2   Mary    80
## 3       ID3 Robert    40
## 4       ID4  Jason    50
## 5       ID5   Jane   100</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳資料欄位名稱</strong>
</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="r-語言基礎語法.html#cb103-1" tabindex="-1"></a><span class="fu">colnames</span>(StuScore)</span>
<span id="cb103-2"><a href="r-語言基礎語法.html#cb103-2" tabindex="-1"></a></span>
<span id="cb103-3"><a href="r-語言基礎語法.html#cb103-3" tabindex="-1"></a><span class="co"># 或可以直接使用names()函式</span></span>
<span id="cb103-4"><a href="r-語言基礎語法.html#cb103-4" tabindex="-1"></a><span class="fu">names</span>(StuScore)</span></code></pre></div>
<pre><code>## [1] &quot;StudentID&quot; &quot;Name&quot;      &quot;Score&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳特定欄列</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>回傳指定橫列</u></strong>
</p>
<p>將列號或邏輯向量置於中括號內的逗號前，惟須注意，使用邏輯向量時，其長度必須與資料列數相同。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="r-語言基礎語法.html#cb105-1" tabindex="-1"></a><span class="co"># 使用列號</span></span>
<span id="cb105-2"><a href="r-語言基礎語法.html#cb105-2" tabindex="-1"></a>StuScore[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>),]</span>
<span id="cb105-3"><a href="r-語言基礎語法.html#cb105-3" tabindex="-1"></a></span>
<span id="cb105-4"><a href="r-語言基礎語法.html#cb105-4" tabindex="-1"></a><span class="co"># 使用邏輯向量</span></span>
<span id="cb105-5"><a href="r-語言基礎語法.html#cb105-5" tabindex="-1"></a>StuScore[<span class="fu">c</span>(T,F,T,F,T),]</span></code></pre></div>
<pre><code>##   StudentID   Name Score
## 1       ID1    Bob    60
## 3       ID3 Robert    40
## 5       ID5   Jane   100</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>回傳指定直行</u></strong>
</p>
<p>有三種方法可回傳指定（多個）直行，包括：</p>
<ul>
<li>列號向量<br />
</li>
<li>邏輯向量<br />
</li>
<li>欄位名稱向量</li>
</ul>
<p>其中使用邏輯向量時，其長度與資料行數必須相同。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="r-語言基礎語法.html#cb107-1" tabindex="-1"></a><span class="co"># 列號向量</span></span>
<span id="cb107-2"><a href="r-語言基礎語法.html#cb107-2" tabindex="-1"></a>StuScore[, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)]</span>
<span id="cb107-3"><a href="r-語言基礎語法.html#cb107-3" tabindex="-1"></a></span>
<span id="cb107-4"><a href="r-語言基礎語法.html#cb107-4" tabindex="-1"></a><span class="co"># 邏輯向量</span></span>
<span id="cb107-5"><a href="r-語言基礎語法.html#cb107-5" tabindex="-1"></a>StuScore[, <span class="fu">c</span>(T,F,T,F,T)]</span>
<span id="cb107-6"><a href="r-語言基礎語法.html#cb107-6" tabindex="-1"></a></span>
<span id="cb107-7"><a href="r-語言基礎語法.html#cb107-7" tabindex="-1"></a><span class="co"># 欄位名稱向量</span></span>
<span id="cb107-8"><a href="r-語言基礎語法.html#cb107-8" tabindex="-1"></a>StuScore[, <span class="fu">c</span>(<span class="st">&quot;StudentID&quot;</span>,<span class="st">&quot;Name&quot;</span>)]</span></code></pre></div>
<pre><code>##   StudentID   Name
## 1       ID1    Bob
## 2       ID2   Mary
## 3       ID3 Robert
## 4       ID4  Jason
## 5       ID5   Jane</code></pre>
<p>此外，資料框亦可透過「<code>$</code>」回傳特定單一欄位，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="r-語言基礎語法.html#cb109-1" tabindex="-1"></a>資料<span class="sc">$</span>欄位名稱</span></code></pre></div>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="r-語言基礎語法.html#cb110-1" tabindex="-1"></a>StuScore<span class="sc">$</span>Name</span></code></pre></div>
<pre><code>## [1] &quot;Bob&quot;    &quot;Mary&quot;   &quot;Robert&quot; &quot;Jason&quot;  &quot;Jane&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳與編輯指定元素</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>使用行列索引值</u></strong>
</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="r-語言基礎語法.html#cb112-1" tabindex="-1"></a>資料[橫列索引, 直行索引]</span></code></pre></div>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="r-語言基礎語法.html#cb113-1" tabindex="-1"></a>StuScore[<span class="dv">2</span>,<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Mary&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>編輯指定元素</u></strong>
</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="r-語言基礎語法.html#cb115-1" tabindex="-1"></a>StuScore[<span class="dv">2</span>,<span class="dv">2</span>]<span class="ot">=</span><span class="st">&quot;Jessica&quot;</span></span>
<span id="cb115-2"><a href="r-語言基礎語法.html#cb115-2" tabindex="-1"></a></span>
<span id="cb115-3"><a href="r-語言基礎語法.html#cb115-3" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID    Name Score
## 1       ID1     Bob    60
## 2       ID2 Jessica    80
## 3       ID3  Robert    40
## 4       ID4   Jason    50
## 5       ID5    Jane   100</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 查看前後六筆資料</strong>
</p>
<p>在此我們使用 R 語言內建的<code>iris</code>資料說明。<code>iris</code>資料共計 150 個樣本，並含括三種不同的鳶尾花（setosa、virginica、versicolor），欄位則包含花瓣與花萼的長度與寬度。</p>
<p style="font-size:18px;line-height:1">
<strong><u>回傳前六筆資料</u></strong>
</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="r-語言基礎語法.html#cb117-1" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>回傳後六筆資料</u></strong>
</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="r-語言基礎語法.html#cb119-1" tabindex="-1"></a><span class="fu">tail</span>(iris)</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 145          6.7         3.3          5.7         2.5 virginica
## 146          6.7         3.0          5.2         2.3 virginica
## 147          6.3         2.5          5.0         1.9 virginica
## 148          6.5         3.0          5.2         2.0 virginica
## 149          6.2         3.4          5.4         2.3 virginica
## 150          5.9         3.0          5.1         1.8 virginica</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 擴增資料框</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>擴增資料列（新增紀錄）</u></strong>
</p>
<p>若欲新增資料，可以透過<code>rbind()</code>函式連結。程式碼如下。</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="r-語言基礎語法.html#cb121-1" tabindex="-1"></a><span class="co"># 建立欲新增的資料</span></span>
<span id="cb121-2"><a href="r-語言基礎語法.html#cb121-2" tabindex="-1"></a>new_student<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">StudentID=</span><span class="st">&quot;ID6&quot;</span>, <span class="at">Name=</span><span class="st">&quot;Roy&quot;</span>, <span class="at">Score=</span><span class="dv">90</span>)</span>
<span id="cb121-3"><a href="r-語言基礎語法.html#cb121-3" tabindex="-1"></a></span>
<span id="cb121-4"><a href="r-語言基礎語法.html#cb121-4" tabindex="-1"></a><span class="co"># 利用rbind()函式相接</span></span>
<span id="cb121-5"><a href="r-語言基礎語法.html#cb121-5" tabindex="-1"></a>StuScore<span class="ot">=</span><span class="fu">rbind</span>(StuScore, new_student)</span>
<span id="cb121-6"><a href="r-語言基礎語法.html#cb121-6" tabindex="-1"></a></span>
<span id="cb121-7"><a href="r-語言基礎語法.html#cb121-7" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID    Name Score
## 1       ID1     Bob    60
## 2       ID2 Jessica    80
## 3       ID3  Robert    40
## 4       ID4   Jason    50
## 5       ID5    Jane   100
## 6       ID6     Roy    90</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>擴增資料欄（新增屬性）</u></strong>
</p>
<p>若欲針對整份資料新增屬性（如<code>StuScore</code>中增加性別欄位…），可以透過<code>cbind()</code>函式連結。程式碼如下。</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="r-語言基礎語法.html#cb123-1" tabindex="-1"></a><span class="co"># 建立欲新增之屬性</span></span>
<span id="cb123-2"><a href="r-語言基礎語法.html#cb123-2" tabindex="-1"></a>Gender<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>)</span>
<span id="cb123-3"><a href="r-語言基礎語法.html#cb123-3" tabindex="-1"></a></span>
<span id="cb123-4"><a href="r-語言基礎語法.html#cb123-4" tabindex="-1"></a><span class="co"># 利用cbind()函式連結</span></span>
<span id="cb123-5"><a href="r-語言基礎語法.html#cb123-5" tabindex="-1"></a>StuScore<span class="ot">=</span><span class="fu">cbind</span>(StuScore, Gender)</span>
<span id="cb123-6"><a href="r-語言基礎語法.html#cb123-6" tabindex="-1"></a></span>
<span id="cb123-7"><a href="r-語言基礎語法.html#cb123-7" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID    Name Score Gender
## 1       ID1     Bob    60      M
## 2       ID2 Jessica    80      F
## 3       ID3  Robert    40      M
## 4       ID4   Jason    50      M
## 5       ID5    Jane   100      F
## 6       ID6     Roy    90      M</code></pre>
<p>或可以直接透過「<code>$</code>」新增新欄位內容。程式碼如下：</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="r-語言基礎語法.html#cb125-1" tabindex="-1"></a>資料<span class="sc">$</span>新欄位<span class="ot">=</span><span class="fu">c</span>(...)</span></code></pre></div>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="r-語言基礎語法.html#cb126-1" tabindex="-1"></a>StuScore<span class="sc">$</span>Height<span class="ot">=</span><span class="fu">c</span>(<span class="dv">180</span>,<span class="dv">165</span>,<span class="dv">170</span>,<span class="dv">160</span>,<span class="dv">175</span>,<span class="dv">180</span>)</span>
<span id="cb126-2"><a href="r-語言基礎語法.html#cb126-2" tabindex="-1"></a></span>
<span id="cb126-3"><a href="r-語言基礎語法.html#cb126-3" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID    Name Score Gender Height
## 1       ID1     Bob    60      M    180
## 2       ID2 Jessica    80      F    165
## 3       ID3  Robert    40      M    170
## 4       ID4   Jason    50      M    160
## 5       ID5    Jane   100      F    175
## 6       ID6     Roy    90      M    180</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 檢查重複列</strong>
</p>
<p>為說明範例，在此先行建立一句有重複資料的資料框。</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="r-語言基礎語法.html#cb128-1" tabindex="-1"></a>StuScore_dup<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">StudentID=</span><span class="fu">c</span>(<span class="st">&quot;ID1&quot;</span>,<span class="st">&quot;ID2&quot;</span>,<span class="st">&quot;ID4&quot;</span>,<span class="st">&quot;ID3&quot;</span>,<span class="st">&quot;ID4&quot;</span>,<span class="st">&quot;ID5&quot;</span>,<span class="st">&quot;ID2&quot;</span>),</span>
<span id="cb128-2"><a href="r-語言基礎語法.html#cb128-2" tabindex="-1"></a>                        <span class="at">Name=</span><span class="fu">c</span>(<span class="st">&quot;Bob&quot;</span>,<span class="st">&quot;Mary&quot;</span>,<span class="st">&quot;Jason&quot;</span>,<span class="st">&quot;Robert&quot;</span>,<span class="st">&quot;Jason&quot;</span>,<span class="st">&quot;Jane&quot;</span>,<span class="st">&quot;Mary&quot;</span>),</span>
<span id="cb128-3"><a href="r-語言基礎語法.html#cb128-3" tabindex="-1"></a>                        <span class="at">Score=</span><span class="fu">c</span>(<span class="dv">60</span>,<span class="dv">80</span>,<span class="dv">40</span>,<span class="dv">100</span>,<span class="dv">40</span>,<span class="dv">100</span>,<span class="dv">80</span>))</span>
<span id="cb128-4"><a href="r-語言基礎語法.html#cb128-4" tabindex="-1"></a>StuScore_dup</span></code></pre></div>
<pre><code>##   StudentID   Name Score
## 1       ID1    Bob    60
## 2       ID2   Mary    80
## 3       ID4  Jason    40
## 4       ID3 Robert   100
## 5       ID4  Jason    40
## 6       ID5   Jane   100
## 7       ID2   Mary    80</code></pre>
<p>由上述結果可知，資料中含有重複的橫列（ID2 &amp; ID4）。我們可以進一步利用<code>duplicated()</code>函式檢查之。</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="r-語言基礎語法.html#cb130-1" tabindex="-1"></a><span class="fu">duplicated</span>(StuScore_dup)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="r-語言基礎語法.html#cb132-1" tabindex="-1"></a><span class="co"># 使用which()函式尋找重複的資料列索引</span></span>
<span id="cb132-2"><a href="r-語言基礎語法.html#cb132-2" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">duplicated</span>(StuScore_dup))</span></code></pre></div>
<pre><code>## [1] 5 7</code></pre>
<p>由執行結果可知，第 5 與第 7 筆資料屬於重複資料。請務必注意，資料框中首次出現的列不會被視為重複者。</p>
</div>
<div id="陣列list" class="section level3 hasAnchor" number="1.1.5">
<h3><span class="header-section-number">1.1.5</span> 陣列（List）<a href="r-語言基礎語法.html#陣列list" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 陣列的性質</strong>
</p>
<ul>
<li>物件的集合（可包含向量、矩陣、資料框、陣列…）<br />
</li>
<li>最複雜的物件，然其使用彈性相當高</li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立陣列</strong>
</p>
<p>使用<code>list()</code>函式建立陣列資料。</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="r-語言基礎語法.html#cb134-1" tabindex="-1"></a>StuScore_list<span class="ot">=</span><span class="fu">list</span>(<span class="at">StudentID=</span><span class="fu">c</span>(<span class="st">&quot;ID1&quot;</span>,<span class="st">&quot;ID2&quot;</span>,<span class="st">&quot;ID3&quot;</span>,<span class="st">&quot;ID4&quot;</span>,<span class="st">&quot;ID5&quot;</span>),</span>
<span id="cb134-2"><a href="r-語言基礎語法.html#cb134-2" tabindex="-1"></a>                   <span class="at">Name=</span><span class="fu">c</span>(<span class="st">&quot;Bob&quot;</span>,<span class="st">&quot;Mary&quot;</span>,<span class="st">&quot;Robert&quot;</span>,<span class="st">&quot;Jason&quot;</span>,<span class="st">&quot;Jane&quot;</span>),</span>
<span id="cb134-3"><a href="r-語言基礎語法.html#cb134-3" tabindex="-1"></a>                   <span class="at">Score=</span><span class="fu">c</span>(<span class="dv">60</span>,<span class="dv">80</span>,<span class="dv">40</span>,<span class="dv">50</span>,<span class="dv">100</span>),</span>
<span id="cb134-4"><a href="r-語言基礎語法.html#cb134-4" tabindex="-1"></a>                   <span class="at">Class=</span><span class="st">&quot;A&quot;</span>)</span></code></pre></div>
<pre><code>## $StudentID
## [1] &quot;ID1&quot; &quot;ID2&quot; &quot;ID3&quot; &quot;ID4&quot; &quot;ID5&quot;
## 
## $Name
## [1] &quot;Bob&quot;    &quot;Mary&quot;   &quot;Robert&quot; &quot;Jason&quot;  &quot;Jane&quot;  
## 
## $Score
## [1]  60  80  40  50 100
## 
## $Class
## [1] &quot;A&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳陣列屬性</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>使用<code>陣列$屬性</code>回傳</u></strong>
</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="r-語言基礎語法.html#cb136-1" tabindex="-1"></a>StuScore_list<span class="sc">$</span>Score</span></code></pre></div>
<pre><code>## [1]  60  80  40  50 100</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>使用陣列索引回傳</u></strong>
</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="r-語言基礎語法.html#cb138-1" tabindex="-1"></a>StuScore_list[[<span class="dv">2</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;Bob&quot;    &quot;Mary&quot;   &quot;Robert&quot; &quot;Jason&quot;  &quot;Jane&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 陣列長度</strong>
</p>
<p>向量的長度可以利用<code>length()</code>函式計算，而陣列亦同，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="r-語言基礎語法.html#cb140-1" tabindex="-1"></a><span class="co"># 建立陣列</span></span>
<span id="cb140-2"><a href="r-語言基礎語法.html#cb140-2" tabindex="-1"></a>num_list<span class="ot">=</span><span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>), <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;D&quot;</span>), <span class="fu">c</span>(T,F,T))</span>
<span id="cb140-3"><a href="r-語言基礎語法.html#cb140-3" tabindex="-1"></a>num_list</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3 4 5
## 
## [[2]]
## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot;
## 
## [[3]]
## [1]  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="r-語言基礎語法.html#cb142-1" tabindex="-1"></a><span class="co"># 計算陣列長度</span></span>
<span id="cb142-2"><a href="r-語言基礎語法.html#cb142-2" tabindex="-1"></a><span class="fu">length</span>(num_list)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>由此可知，<code>num_list</code>的長度為 3。而若欲知該陣列內各別陣列的長度，則必須透過<code>lengths()</code>函數達成此一目的。程式碼撰寫如下，陣列長度的計算詳如圖<a href="r-語言基礎語法.html#fig:list-length-fig">1.3</a>之示意圖所示。</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="r-語言基礎語法.html#cb144-1" tabindex="-1"></a><span class="co"># 計算陣列內各陣列長度</span></span>
<span id="cb144-2"><a href="r-語言基礎語法.html#cb144-2" tabindex="-1"></a><span class="fu">lengths</span>(num_list)</span></code></pre></div>
<pre><code>## [1] 5 4 3</code></pre>
<p>由此可知，<code>num_list</code>陣列內第一個陣列的長度為 5，其次為 4，最後一者為 3。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:list-length-fig"></span>
<img src="figure/length_lengths.png" alt="陣列長度示意圖" width="70%" />
<p class="caption">
圖 1.3: 陣列長度示意圖
</p>
</div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 去除陣列</strong>
</p>
<p>若欲將陣列去除，並回傳所有陣列中的元素，則可使用<code>unlist()</code>達成之。</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="r-語言基礎語法.html#cb146-1" tabindex="-1"></a><span class="co"># 去除陣列</span></span>
<span id="cb146-2"><a href="r-語言基礎語法.html#cb146-2" tabindex="-1"></a><span class="fu">unlist</span>(num_list)</span></code></pre></div>
<pre><code>##  [1] &quot;1&quot;     &quot;2&quot;     &quot;3&quot;     &quot;4&quot;     &quot;5&quot;     &quot;A&quot;     &quot;B&quot;     &quot;C&quot;     &quot;D&quot;    
## [10] &quot;TRUE&quot;  &quot;FALSE&quot; &quot;TRUE&quot;</code></pre>
</div>
</div>
<div id="文字處理" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> 文字處理<a href="r-語言基礎語法.html#文字處理" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>在資料分析中，文字處理是相當重要的程序，可從中解析特定的詞彙，如計算詞彙數量、取代特定字詞、查看文字出現位置等等，從中探索資料中的文字內容。文字處理可以透過 R 內建的<code>base</code>套件或另安裝<code>stringr</code>套件處理之，本節主要即是針對此二套件說明文字處理之應用。</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="r-語言基礎語法.html#cb148-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;stringr&quot;</span>)</span>
<span id="cb148-2"><a href="r-語言基礎語法.html#cb148-2" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre></div>
<p>本節中所論及的函式彙整如表<a href="r-語言基礎語法.html#tab:string-fun">1.5</a>。</p>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:string-fun">表 1.5: </span>文字處理重要函式
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
套件
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
函式
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
功能
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
圖示
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: middle !important;" rowspan="11">
<code>base</code>
</td>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#連接字串"><code>paste()</code></a>
</td>
<td style="text-align:left;">
連接字串
</td>
<td style="text-align:left;">
<img src="figure/string/1.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#連接字串"><code>paste0()</code></a>
</td>
<td style="text-align:left;">
連接字串（無分隔）
</td>
<td style="text-align:left;">
<img src="figure/string/2.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#轉換大小寫"><code>toupper()</code></a>
</td>
<td style="text-align:left;">
轉換為大寫
</td>
<td style="text-align:left;">
<img src="figure/string/3.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#轉換大小寫"><code>tolower()</code></a>
</td>
<td style="text-align:left;">
轉換為小寫
</td>
<td style="text-align:left;">
<img src="figure/string/4.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#擷取與取代字元"><code>substr()</code></a>
</td>
<td style="text-align:left;">
擷取字元
</td>
<td style="text-align:left;">
<img src="figure/string/5.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#拆解字串"><code>strsplit()</code></a>
</td>
<td style="text-align:left;">
拆解字串
</td>
<td style="text-align:left;">
<img src="figure/string/6.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#擷取與取代字元"><code>gsub()</code></a>
</td>
<td style="text-align:left;">
取代字元
</td>
<td style="text-align:left;">
<img src="figure/string/7.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#計算字元數"><code>nchar()</code></a>
</td>
<td style="text-align:left;">
字串長度(字元數)
</td>
<td style="text-align:left;">
<img src="figure/string/8.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>grep()</code></a>
</td>
<td style="text-align:left;">
回傳符合條件的索引值
</td>
<td style="text-align:left;">
<img src="figure/string/9.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>grepl()</code></a>
</td>
<td style="text-align:left;">
回傳是否含有特定字元
</td>
<td style="text-align:left;">
<img src="figure/string/10.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>regexpr()</code></a>
</td>
<td style="text-align:left;">
回傳特定字元首次出現的位置索引
</td>
<td style="text-align:left;">
<img src="figure/string/11.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: middle !important;" rowspan="18">
<code>stringr</code>
</td>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#轉換大小寫"><code>str_to_upper()</code></a>
</td>
<td style="text-align:left;">
轉換為大寫
</td>
<td style="text-align:left;">
<img src="figure/string/3.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#轉換大小寫"><code>str_to_lower()</code></a>
</td>
<td style="text-align:left;">
轉換為小寫
</td>
<td style="text-align:left;">
<img src="figure/string/4.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#轉換大小寫"><code>str_to_title()</code></a>
</td>
<td style="text-align:left;">
首字大寫
</td>
<td style="text-align:left;">
<img src="figure/string/12.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>str_which()</code></a>
</td>
<td style="text-align:left;">
回傳符合條件的索引值
</td>
<td style="text-align:left;">
<img src="figure/string/9.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>str_detect()</code></a>
</td>
<td style="text-align:left;">
回傳是否含有特定字元
</td>
<td style="text-align:left;">
<img src="figure/string/10.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>str_starts()</code></a>
</td>
<td style="text-align:left;">
回傳是否以特定字元開頭
</td>
<td style="text-align:left;">
<img src="figure/string/13.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>str_locate()</code></a>
</td>
<td style="text-align:left;">
回傳特定字元首次出現的位置索引
</td>
<td style="text-align:left;">
<img src="figure/string/11.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>str_locate_all()</code></a>
</td>
<td style="text-align:left;">
回傳特定字元所有出現的位置索引
</td>
<td style="text-align:left;">
<img src="figure/string/14.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#計算字元數"><code>str_count()</code></a>
</td>
<td style="text-align:left;">
回傳特定字元出現的次數
</td>
<td style="text-align:left;">
<img src="figure/string/15.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#擷取與取代字元"><code>str_sub()</code></a>
</td>
<td style="text-align:left;">
擷取字元（可進一步取代）
</td>
<td style="text-align:left;">
<img src="figure/string/5.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#擷取與取代字元"><code>str_replace_all()</code></a>
</td>
<td style="text-align:left;">
取代字元
</td>
<td style="text-align:left;">
<img src="figure/string/7.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#計算字元數"><code>str_length()</code></a>
</td>
<td style="text-align:left;">
字串長度(字元數)
</td>
<td style="text-align:left;">
<img src="figure/string/8.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#文字填補"><code>str_pad()</code></a>
</td>
<td style="text-align:left;">
統一字串長度的格式
</td>
<td style="text-align:left;">
<img src="figure/string/16.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#拆解字串"><code>str_split()</code></a>
</td>
<td style="text-align:left;">
拆解字串
</td>
<td style="text-align:left;">
<img src="figure/string/6.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#連接字串"><code>str_flatten()</code></a>
</td>
<td style="text-align:left;">
連接字串
</td>
<td style="text-align:left;">
<img src="figure/string/1.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#連接字串"><code>str_glue()</code></a>
</td>
<td style="text-align:left;">
連接字串（含變數）
</td>
<td style="text-align:left;">
<img src="figure/string/1.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#文字排序"><code>str_order()</code></a>
</td>
<td style="text-align:left;">
回傳字串排序索引值
</td>
<td style="text-align:left;">
<img src="figure/string/17.png" width="224" height="32">
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#文字排序"><code>str_sort()</code></a>
</td>
<td style="text-align:left;">
回傳字串排序後結果
</td>
<td style="text-align:left;">
<img src="figure/string/18.png" width="224" height="32">
</td>
</tr>
</tbody>
</table>
<div id="連接字串" class="section level3 hasAnchor" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> 連接字串<a href="r-語言基礎語法.html#連接字串" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>paste()</code>：以特定符號連接</strong>
</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="r-語言基礎語法.html#cb149-1" tabindex="-1"></a><span class="fu">paste</span>(文字向量, <span class="at">collapse=</span><span class="st">&quot;分隔符號&quot;</span>)</span></code></pre></div>
<p><code>collapse=</code>引數須設定欲分隔字串的符號。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>paste0()</code>：直接連接（無分隔）</strong>
</p>
<p><code>paste0()</code>將向量內各元素直接連接，相當於<code>paste(文字向量, collapse="")</code>。</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="r-語言基礎語法.html#cb150-1" tabindex="-1"></a><span class="fu">paste0</span>(文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_flatten()</code>：以特定符號連接</strong>
</p>
<p>與<code>paste()</code>函式功能相同。</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="r-語言基礎語法.html#cb151-1" tabindex="-1"></a><span class="fu">str_flatten</span>(文字向量, <span class="at">collapse=</span><span class="st">&quot;分隔符號&quot;</span>)</span></code></pre></div>
<p><code>collapse=</code>引數須設定欲分隔字串的符號。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_glue()</code>：連結字串與變數</strong>
</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="r-語言基礎語法.html#cb152-1" tabindex="-1"></a><span class="fu">str_glue</span>(<span class="st">&quot;文字{變數}&quot;</span>)</span></code></pre></div>
<p>以下簡單示範連結字串之函式應用案例。</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="r-語言基礎語法.html#cb153-1" tabindex="-1"></a><span class="co"># 原始文字向量</span></span>
<span id="cb153-2"><a href="r-語言基礎語法.html#cb153-2" tabindex="-1"></a>transport<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Bus&quot;</span>, <span class="st">&quot;MRT&quot;</span>, <span class="st">&quot;Car&quot;</span>, <span class="st">&quot;Motorcycle&quot;</span>, <span class="st">&quot;Bike&quot;</span>, <span class="st">&quot;Taxi&quot;</span>)</span>
<span id="cb153-3"><a href="r-語言基礎語法.html#cb153-3" tabindex="-1"></a>all_name<span class="ot">=</span><span class="st">&quot;Mode&quot;</span></span>
<span id="cb153-4"><a href="r-語言基礎語法.html#cb153-4" tabindex="-1"></a></span>
<span id="cb153-5"><a href="r-語言基礎語法.html#cb153-5" tabindex="-1"></a><span class="co"># paste()函式連結所有transport內的元素</span></span>
<span id="cb153-6"><a href="r-語言基礎語法.html#cb153-6" tabindex="-1"></a><span class="fu">paste</span>(transport, <span class="at">collapse=</span><span class="st">&quot;|&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Bus|MRT|Car|Motorcycle|Bike|Taxi&quot;</code></pre>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="r-語言基礎語法.html#cb155-1" tabindex="-1"></a><span class="co"># paste()函式連結all_name與transport內各元素</span></span>
<span id="cb155-2"><a href="r-語言基礎語法.html#cb155-2" tabindex="-1"></a><span class="fu">paste</span>(all_name, <span class="st">&quot;:&quot;</span>, transport)</span></code></pre></div>
<pre><code>## [1] &quot;Mode : Bus&quot;        &quot;Mode : MRT&quot;        &quot;Mode : Car&quot;       
## [4] &quot;Mode : Motorcycle&quot; &quot;Mode : Bike&quot;       &quot;Mode : Taxi&quot;</code></pre>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="r-語言基礎語法.html#cb157-1" tabindex="-1"></a><span class="co"># paste0()函式連結all_name與transport內各元素</span></span>
<span id="cb157-2"><a href="r-語言基礎語法.html#cb157-2" tabindex="-1"></a><span class="fu">paste0</span>(all_name, <span class="st">&quot;: &quot;</span>, transport)</span></code></pre></div>
<pre><code>## [1] &quot;Mode: Bus&quot;        &quot;Mode: MRT&quot;        &quot;Mode: Car&quot;        &quot;Mode: Motorcycle&quot;
## [5] &quot;Mode: Bike&quot;       &quot;Mode: Taxi&quot;</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="r-語言基礎語法.html#cb159-1" tabindex="-1"></a><span class="co"># str_flatten()函式連結所有transport內的元素</span></span>
<span id="cb159-2"><a href="r-語言基礎語法.html#cb159-2" tabindex="-1"></a><span class="fu">str_flatten</span>(transport, <span class="at">collapse=</span><span class="st">&quot;|&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Bus|MRT|Car|Motorcycle|Bike|Taxi&quot;</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="r-語言基礎語法.html#cb161-1" tabindex="-1"></a><span class="co"># str_glue()函式連結all_name與transport內各元素</span></span>
<span id="cb161-2"><a href="r-語言基礎語法.html#cb161-2" tabindex="-1"></a><span class="fu">str_glue</span>(<span class="st">&quot;{all_name}: {transport}&quot;</span>)</span></code></pre></div>
<pre><code>## Mode: Bus
## Mode: MRT
## Mode: Car
## Mode: Motorcycle
## Mode: Bike
## Mode: Taxi</code></pre>
</div>
<div id="轉換大小寫" class="section level3 hasAnchor" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> 轉換大小寫<a href="r-語言基礎語法.html#轉換大小寫" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>toupper()</code>：全部轉換為大寫</strong>
</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="r-語言基礎語法.html#cb163-1" tabindex="-1"></a><span class="fu">toupper</span>(文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>tolower()</code>：全部轉換為小寫</strong>
</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="r-語言基礎語法.html#cb164-1" tabindex="-1"></a><span class="fu">tolower</span>(文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_to_upper()</code>：全部轉換為大寫</strong>
</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="r-語言基礎語法.html#cb165-1" tabindex="-1"></a><span class="fu">str_to_upper</span>(文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_to_lower()</code>：全部轉換為小寫</strong>
</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="r-語言基礎語法.html#cb166-1" tabindex="-1"></a><span class="fu">str_to_lower</span>(文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_to_title()</code>：首字大寫</strong>
</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="r-語言基礎語法.html#cb167-1" tabindex="-1"></a><span class="fu">str_to_title</span>(文字向量)</span></code></pre></div>
<p>以下簡單示範轉換字元大小寫之應用案例。</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="r-語言基礎語法.html#cb168-1" tabindex="-1"></a><span class="co"># 原始文字向量</span></span>
<span id="cb168-2"><a href="r-語言基礎語法.html#cb168-2" tabindex="-1"></a>transport<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Bus&quot;</span>, <span class="st">&quot;MRT&quot;</span>, <span class="st">&quot;Car&quot;</span>, <span class="st">&quot;Motorcycle&quot;</span>, <span class="st">&quot;Bike&quot;</span>, <span class="st">&quot;Taxi&quot;</span>)</span>
<span id="cb168-3"><a href="r-語言基礎語法.html#cb168-3" tabindex="-1"></a>all_name<span class="ot">=</span><span class="st">&quot;Mode&quot;</span></span>
<span id="cb168-4"><a href="r-語言基礎語法.html#cb168-4" tabindex="-1"></a></span>
<span id="cb168-5"><a href="r-語言基礎語法.html#cb168-5" tabindex="-1"></a><span class="co"># toupper()函式轉換大寫</span></span>
<span id="cb168-6"><a href="r-語言基礎語法.html#cb168-6" tabindex="-1"></a><span class="fu">toupper</span>(transport)</span></code></pre></div>
<pre><code>## [1] &quot;BUS&quot;        &quot;MRT&quot;        &quot;CAR&quot;        &quot;MOTORCYCLE&quot; &quot;BIKE&quot;      
## [6] &quot;TAXI&quot;</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="r-語言基礎語法.html#cb170-1" tabindex="-1"></a><span class="co"># tolower()函式轉換小寫</span></span>
<span id="cb170-2"><a href="r-語言基礎語法.html#cb170-2" tabindex="-1"></a><span class="fu">tolower</span>(transport)</span></code></pre></div>
<pre><code>## [1] &quot;bus&quot;        &quot;mrt&quot;        &quot;car&quot;        &quot;motorcycle&quot; &quot;bike&quot;      
## [6] &quot;taxi&quot;</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="r-語言基礎語法.html#cb172-1" tabindex="-1"></a><span class="co"># str_to_upper()函式轉換大寫</span></span>
<span id="cb172-2"><a href="r-語言基礎語法.html#cb172-2" tabindex="-1"></a><span class="fu">str_to_upper</span>(transport)</span></code></pre></div>
<pre><code>## [1] &quot;BUS&quot;        &quot;MRT&quot;        &quot;CAR&quot;        &quot;MOTORCYCLE&quot; &quot;BIKE&quot;      
## [6] &quot;TAXI&quot;</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="r-語言基礎語法.html#cb174-1" tabindex="-1"></a><span class="co"># str_to_lower()函式轉換小寫</span></span>
<span id="cb174-2"><a href="r-語言基礎語法.html#cb174-2" tabindex="-1"></a><span class="fu">str_to_lower</span>(transport)</span></code></pre></div>
<pre><code>## [1] &quot;bus&quot;        &quot;mrt&quot;        &quot;car&quot;        &quot;motorcycle&quot; &quot;bike&quot;      
## [6] &quot;taxi&quot;</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="r-語言基礎語法.html#cb176-1" tabindex="-1"></a><span class="co"># str_to_title()函式首字大寫</span></span>
<span id="cb176-2"><a href="r-語言基礎語法.html#cb176-2" tabindex="-1"></a><span class="fu">str_to_title</span>(<span class="st">&quot;national yang ming chiao tung university&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;National Yang Ming Chiao Tung University&quot;</code></pre>
</div>
<div id="擷取與取代字元" class="section level3 hasAnchor" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> 擷取與取代字元<a href="r-語言基礎語法.html#擷取與取代字元" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>substr()</code>：擷取字元</strong>
</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="r-語言基礎語法.html#cb178-1" tabindex="-1"></a><span class="fu">substr</span>(文字向量, 開始字元索引, 結束字元索引)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>gsub()</code>：取代字元</strong>
</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="r-語言基礎語法.html#cb179-1" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;被取代字元&quot;</span>, <span class="st">&quot;新替換字元&quot;</span>, 文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_sub()</code>：擷取並取代字元</strong>
</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="r-語言基礎語法.html#cb180-1" tabindex="-1"></a><span class="co"># 擷取字元</span></span>
<span id="cb180-2"><a href="r-語言基礎語法.html#cb180-2" tabindex="-1"></a><span class="fu">str_sub</span>(文字向量, 開始字元索引, 結束字元索引)</span>
<span id="cb180-3"><a href="r-語言基礎語法.html#cb180-3" tabindex="-1"></a></span>
<span id="cb180-4"><a href="r-語言基礎語法.html#cb180-4" tabindex="-1"></a><span class="co"># 取代指定位置的字元(此時以下的文字向量務必是變數)</span></span>
<span id="cb180-5"><a href="r-語言基礎語法.html#cb180-5" tabindex="-1"></a><span class="fu">str_sub</span>(文字向量, 開始字元索引, 結束字元索引)<span class="ot">=</span><span class="st">&quot;新替換字元&quot;</span></span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_replace_all()</code>：取代字元</strong>
</p>
<p><code>str_replace_all()</code>可取代所有字元，而<code>str_replace()</code>僅能取代第一次出現的字元，應用性較低。</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="r-語言基礎語法.html#cb181-1" tabindex="-1"></a><span class="fu">str_replace_all</span>(文字向量, <span class="st">&quot;被取代字元&quot;</span>, <span class="st">&quot;新替換字元&quot;</span>)</span></code></pre></div>
<p>以下簡單示範擷取與取代字元之應用案例。</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="r-語言基礎語法.html#cb182-1" tabindex="-1"></a><span class="co"># 原始文字向量</span></span>
<span id="cb182-2"><a href="r-語言基礎語法.html#cb182-2" tabindex="-1"></a>transport<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Bus&quot;</span>, <span class="st">&quot;MRT&quot;</span>, <span class="st">&quot;Car&quot;</span>, <span class="st">&quot;Motorcycle&quot;</span>, <span class="st">&quot;Bike&quot;</span>, <span class="st">&quot;Taxi&quot;</span>)</span>
<span id="cb182-3"><a href="r-語言基礎語法.html#cb182-3" tabindex="-1"></a>all_name<span class="ot">=</span><span class="st">&quot;Mode&quot;</span></span>
<span id="cb182-4"><a href="r-語言基礎語法.html#cb182-4" tabindex="-1"></a></span>
<span id="cb182-5"><a href="r-語言基礎語法.html#cb182-5" tabindex="-1"></a><span class="co"># substr()擷取字元</span></span>
<span id="cb182-6"><a href="r-語言基礎語法.html#cb182-6" tabindex="-1"></a><span class="fu">substr</span>(transport, <span class="dv">1</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Bus&quot; &quot;MRT&quot; &quot;Car&quot; &quot;Mot&quot; &quot;Bik&quot; &quot;Tax&quot;</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="r-語言基礎語法.html#cb184-1" tabindex="-1"></a><span class="co"># gsub()取代字元</span></span>
<span id="cb184-2"><a href="r-語言基礎語法.html#cb184-2" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;?&quot;</span>, transport)</span></code></pre></div>
<pre><code>## [1] &quot;Bus&quot;        &quot;MRT&quot;        &quot;C?r&quot;        &quot;Motorcycle&quot; &quot;Bike&quot;      
## [6] &quot;T?xi&quot;</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="r-語言基礎語法.html#cb186-1" tabindex="-1"></a><span class="co"># str_sub()擷取字元</span></span>
<span id="cb186-2"><a href="r-語言基礎語法.html#cb186-2" tabindex="-1"></a><span class="fu">str_sub</span>(transport, <span class="dv">1</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Bu&quot; &quot;MR&quot; &quot;Ca&quot; &quot;Mo&quot; &quot;Bi&quot; &quot;Ta&quot;</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="r-語言基礎語法.html#cb188-1" tabindex="-1"></a><span class="co"># str_sub()取代特定位置之字元</span></span>
<span id="cb188-2"><a href="r-語言基礎語法.html#cb188-2" tabindex="-1"></a>transport_new<span class="ot">=</span>transport</span>
<span id="cb188-3"><a href="r-語言基礎語法.html#cb188-3" tabindex="-1"></a><span class="fu">str_sub</span>(transport_new, <span class="dv">2</span>, <span class="dv">3</span>)<span class="ot">=</span><span class="st">&quot;??&quot;</span></span>
<span id="cb188-4"><a href="r-語言基礎語法.html#cb188-4" tabindex="-1"></a>transport_new</span></code></pre></div>
<pre><code>## [1] &quot;B??&quot;        &quot;M??&quot;        &quot;C??&quot;        &quot;M??orcycle&quot; &quot;B??e&quot;      
## [6] &quot;T??i&quot;</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="r-語言基礎語法.html#cb190-1" tabindex="-1"></a><span class="co"># str_replace_all()取代字元</span></span>
<span id="cb190-2"><a href="r-語言基礎語法.html#cb190-2" tabindex="-1"></a><span class="fu">str_replace_all</span>(transport, <span class="st">&quot;[aeiou]&quot;</span>, <span class="st">&quot;?&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;B?s&quot;        &quot;MRT&quot;        &quot;C?r&quot;        &quot;M?t?rcycl?&quot; &quot;B?k?&quot;      
## [6] &quot;T?x?&quot;</code></pre>
<p>以上範例中<code>str_replace()</code>函式的<code>[aeiou]</code>係指中括號內任一字元皆可被取代。關於此類符號的表達請參考<a href="r-語言基礎語法.html#正規表示式"><strong>正規表示式</strong></a>一節。</p>
</div>
<div id="拆解字串" class="section level3 hasAnchor" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> 拆解字串<a href="r-語言基礎語法.html#拆解字串" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>strsplit()</code>：拆解字串</strong>
</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="r-語言基礎語法.html#cb192-1" tabindex="-1"></a><span class="fu">strsplit</span>(文字向量, <span class="st">&quot;切割符號&quot;</span>)</span></code></pre></div>
<p>程式碼中的「切割符號」係指在字串中用以切割字串的符號。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_split()</code>：拆解字串</strong>
</p>
<p><code>str_split()</code>函式為<code>stringr</code>套件的函式，其與<code>base</code>套件中的<code>strsplit</code>函式完全相同。</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="r-語言基礎語法.html#cb193-1" tabindex="-1"></a><span class="fu">str_split</span>(文字向量, <span class="st">&quot;切割符號&quot;</span>)</span></code></pre></div>
<p>以下範例說明拆解字串的做法。</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="r-語言基礎語法.html#cb194-1" tabindex="-1"></a><span class="co"># 原始文字向量</span></span>
<span id="cb194-2"><a href="r-語言基礎語法.html#cb194-2" tabindex="-1"></a>transport_comb<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Bus &amp; MRT &amp; Bike&quot;</span>, <span class="st">&quot;Motorcycle &amp; Car&quot;</span>, <span class="st">&quot;Taxi&quot;</span>)</span>
<span id="cb194-3"><a href="r-語言基礎語法.html#cb194-3" tabindex="-1"></a></span>
<span id="cb194-4"><a href="r-語言基礎語法.html#cb194-4" tabindex="-1"></a><span class="co"># strsplit()拆解字串</span></span>
<span id="cb194-5"><a href="r-語言基礎語法.html#cb194-5" tabindex="-1"></a><span class="fu">strsplit</span>(transport_comb, <span class="st">&quot; &amp; &quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Bus&quot;  &quot;MRT&quot;  &quot;Bike&quot;
## 
## [[2]]
## [1] &quot;Motorcycle&quot; &quot;Car&quot;       
## 
## [[3]]
## [1] &quot;Taxi&quot;</code></pre>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="r-語言基礎語法.html#cb196-1" tabindex="-1"></a><span class="co"># str_split()拆解字串</span></span>
<span id="cb196-2"><a href="r-語言基礎語法.html#cb196-2" tabindex="-1"></a><span class="fu">str_split</span>(transport_comb, <span class="st">&quot; &amp; &quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Bus&quot;  &quot;MRT&quot;  &quot;Bike&quot;
## 
## [[2]]
## [1] &quot;Motorcycle&quot; &quot;Car&quot;       
## 
## [[3]]
## [1] &quot;Taxi&quot;</code></pre>
<p>上述拆解完成後的字串，儲存於一陣列中，[[1]] 中即是<code>transport_comb</code>向量中第一個元素拆解後的結果，包含三個元素（Bus、MRT、Bike），其他則以此類推。此外我們亦可利用<code>unlist()</code>函式將所有拆解的結果從陣列中抽離出來，轉換成向量。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="r-語言基礎語法.html#cb198-1" tabindex="-1"></a><span class="co"># 拆解字串</span></span>
<span id="cb198-2"><a href="r-語言基礎語法.html#cb198-2" tabindex="-1"></a>word_split<span class="ot">=</span><span class="fu">strsplit</span>(transport_comb, <span class="st">&quot; &amp; &quot;</span>)</span>
<span id="cb198-3"><a href="r-語言基礎語法.html#cb198-3" tabindex="-1"></a></span>
<span id="cb198-4"><a href="r-語言基礎語法.html#cb198-4" tabindex="-1"></a><span class="co"># 去除陣列，轉換為向量</span></span>
<span id="cb198-5"><a href="r-語言基礎語法.html#cb198-5" tabindex="-1"></a><span class="fu">unlist</span>(word_split)</span></code></pre></div>
<pre><code>## [1] &quot;Bus&quot;        &quot;MRT&quot;        &quot;Bike&quot;       &quot;Motorcycle&quot; &quot;Car&quot;       
## [6] &quot;Taxi&quot;</code></pre>
</div>
<div id="計算字元數" class="section level3 hasAnchor" number="1.2.5">
<h3><span class="header-section-number">1.2.5</span> 計算字元數<a href="r-語言基礎語法.html#計算字元數" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>nchar()</code>：計算字串內所有字元數</strong>
</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="r-語言基礎語法.html#cb200-1" tabindex="-1"></a><span class="fu">nchar</span>(文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_length()</code>：計算字串內所有字元數</strong>
</p>
<p>抑或可利用<code>stringr</code>套件中的<code>str_length()</code>函式達成相同目的。</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="r-語言基礎語法.html#cb201-1" tabindex="-1"></a><span class="fu">str_length</span>(文字向量)</span></code></pre></div>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="r-語言基礎語法.html#cb202-1" tabindex="-1"></a><span class="co"># 建立向量</span></span>
<span id="cb202-2"><a href="r-語言基礎語法.html#cb202-2" tabindex="-1"></a>transport<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Bus&quot;</span>, <span class="st">&quot;MRT&quot;</span>, <span class="st">&quot;Car&quot;</span>, <span class="st">&quot;Motorcycle&quot;</span>, <span class="st">&quot;Bike&quot;</span>, <span class="st">&quot;Taxi&quot;</span>)</span>
<span id="cb202-3"><a href="r-語言基礎語法.html#cb202-3" tabindex="-1"></a></span>
<span id="cb202-4"><a href="r-語言基礎語法.html#cb202-4" tabindex="-1"></a><span class="co"># nchar()計算長度</span></span>
<span id="cb202-5"><a href="r-語言基礎語法.html#cb202-5" tabindex="-1"></a><span class="fu">nchar</span>(transport)</span></code></pre></div>
<pre><code>## [1]  3  3  3 10  4  4</code></pre>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="r-語言基礎語法.html#cb204-1" tabindex="-1"></a><span class="co"># str_length()計算長度</span></span>
<span id="cb204-2"><a href="r-語言基礎語法.html#cb204-2" tabindex="-1"></a><span class="fu">str_length</span>(transport)</span></code></pre></div>
<pre><code>## [1]  3  3  3 10  4  4</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_count()</code>：計算符合條件的字元數</strong>
</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="r-語言基礎語法.html#cb206-1" tabindex="-1"></a><span class="fu">str_count</span>(文字向量, <span class="st">&quot;欲尋找字元&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="r-語言基礎語法.html#cb207-1" tabindex="-1"></a><span class="fu">str_count</span>(transport, <span class="st">&quot;[^aeiou]&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 2 3 2 7 2 2</code></pre>
<p>程式碼中的<code>[^aeiou]</code>意指「不包含」「aeiou」任一字元者，因此「Bus」去除「u」之後，字元數為 2。此類符號的表達請參考<a href="r-語言基礎語法.html#正規表示式"><strong>正規表示式</strong></a>一節。</p>
</div>
<div id="搜尋字元" class="section level3 hasAnchor" number="1.2.6">
<h3><span class="header-section-number">1.2.6</span> 搜尋字元<a href="r-語言基礎語法.html#搜尋字元" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>透過搜尋字元，可以瞭解特定字元是否存在於一文字向量中，抑或進一步知道特定字元在向量各元素內的出現位置。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>grep()</code>尋找特定字元存在索引</strong>
</p>
<p>回傳結果為一索引值向量，若完全無符合條件者，會回傳<code>integer(0)</code>。</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="r-語言基礎語法.html#cb209-1" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;欲尋找字元&quot;</span>, 文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_which()</code>尋找特定字元存在索引</strong>
</p>
<p>回傳結果為一索引值向量，若完全無符合條件者，會回傳<code>integer(0)</code>。</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="r-語言基礎語法.html#cb210-1" tabindex="-1"></a><span class="fu">str_which</span>(文字向量, <span class="st">&quot;欲尋找字元&quot;</span>)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>grepl()</code>尋找特定字元存在與否</strong>
</p>
<p>回傳結果為一邏輯向量，該向量長度與輸入的文字向量長度相同。</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="r-語言基礎語法.html#cb211-1" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;欲尋找字元&quot;</span>, 文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_detect()</code>尋找特定字元存在與否</strong>
</p>
<p>回傳結果為一邏輯向量，該向量長度與輸入的文字向量長度相同。</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="r-語言基礎語法.html#cb212-1" tabindex="-1"></a><span class="fu">str_detect</span>(文字向量, <span class="st">&quot;欲尋找字元&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="r-語言基礎語法.html#cb213-1" tabindex="-1"></a><span class="co"># 建立向量</span></span>
<span id="cb213-2"><a href="r-語言基礎語法.html#cb213-2" tabindex="-1"></a>transport<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Bus&quot;</span>, <span class="st">&quot;MRT&quot;</span>, <span class="st">&quot;Car&quot;</span>, <span class="st">&quot;Motorcycle&quot;</span>, <span class="st">&quot;Bike&quot;</span>, <span class="st">&quot;Taxi&quot;</span>)</span>
<span id="cb213-3"><a href="r-語言基礎語法.html#cb213-3" tabindex="-1"></a></span>
<span id="cb213-4"><a href="r-語言基礎語法.html#cb213-4" tabindex="-1"></a><span class="co"># grep()尋找字元存在之索引</span></span>
<span id="cb213-5"><a href="r-語言基礎語法.html#cb213-5" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;a|c&quot;</span>, transport)</span></code></pre></div>
<pre><code>## [1] 3 4 6</code></pre>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="r-語言基礎語法.html#cb215-1" tabindex="-1"></a><span class="co"># str_which()尋找字元存在之索引</span></span>
<span id="cb215-2"><a href="r-語言基礎語法.html#cb215-2" tabindex="-1"></a><span class="fu">str_which</span>(transport, <span class="st">&quot;a|c&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 3 4 6</code></pre>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="r-語言基礎語法.html#cb217-1" tabindex="-1"></a><span class="co"># grepl()尋找字元存在之邏輯值</span></span>
<span id="cb217-2"><a href="r-語言基礎語法.html#cb217-2" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;a|c&quot;</span>, transport)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="r-語言基礎語法.html#cb219-1" tabindex="-1"></a><span class="co"># str_detect()尋找字元存在之邏輯值</span></span>
<span id="cb219-2"><a href="r-語言基礎語法.html#cb219-2" tabindex="-1"></a><span class="fu">str_detect</span>(transport, <span class="st">&quot;a|c&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE FALSE  TRUE</code></pre>
<p>程式碼中，<code>a|c</code>表示 a 或者 c，相當於<code>[ac]</code>，關於此類符號的表達請參考<a href="r-語言基礎語法.html#正規表示式"><strong>正規表示式</strong></a>一節。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_starts()</code>查看是否以特定字元起始</strong>
</p>
<p>程式碼中所設定的引數「欲尋找字元」，會尋找文字向量中各元素是否會以該字元為開頭。</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="r-語言基礎語法.html#cb221-1" tabindex="-1"></a><span class="fu">str_starts</span>(文字向量, <span class="st">&quot;欲尋找字元&quot;</span>)</span></code></pre></div>
<p>再次以<code>transport</code>向量為例，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="r-語言基礎語法.html#cb222-1" tabindex="-1"></a><span class="fu">str_starts</span>(transport, <span class="st">&quot;B&quot;</span>)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE FALSE  TRUE FALSE</code></pre>
<p>回傳結果顯示第一個元素（Bus）與第五個元素（Bike）符合所設定規則。</p>
<p>上述是查看特定字元是否存在於向量中，輸出結果為邏輯向量或索引值向量。然有時我們會希望瞭解該特定字元位於向量各元素中的位置，此時可利用<code>regexpr()</code>與<code>str_locate()</code>函式達成目的。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>regexpr()</code>尋找特定字元「首次」出現位置</strong>
</p>
<p>回傳結果為一索引值向量，該向量長度與輸入的文字向量長度相同。若元素無該字元，會回傳<code>-1</code>。</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="r-語言基礎語法.html#cb224-1" tabindex="-1"></a><span class="fu">regexpr</span>(<span class="st">&quot;欲尋找字元&quot;</span>, 文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_locate()</code>尋找特定字元「首次」出現位置</strong>
</p>
<p>回傳結果為一矩陣（matrix），該矩陣的橫列數（<code>nrow()</code>）為輸入的文字向量之長度，而直行有兩個，其一為 start，表示字元開始的索引；另一為 end，表示字元結束的索引。若元素無該字元，會回傳<code>NA</code>。</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="r-語言基礎語法.html#cb225-1" tabindex="-1"></a><span class="fu">str_locate</span>(文字向量, <span class="st">&quot;欲尋找字元&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="r-語言基礎語法.html#cb226-1" tabindex="-1"></a><span class="co"># 建立向量</span></span>
<span id="cb226-2"><a href="r-語言基礎語法.html#cb226-2" tabindex="-1"></a>fruit_eg<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;papaya&quot;</span>, <span class="st">&quot;grape&quot;</span>, <span class="st">&quot;lychee&quot;</span>, <span class="st">&quot;apple&quot;</span>, <span class="st">&quot;guava&quot;</span>, <span class="st">&quot;coconut&quot;</span>)</span>
<span id="cb226-3"><a href="r-語言基礎語法.html#cb226-3" tabindex="-1"></a></span>
<span id="cb226-4"><a href="r-語言基礎語法.html#cb226-4" tabindex="-1"></a><span class="co"># grepl()尋找字元出現位置</span></span>
<span id="cb226-5"><a href="r-語言基礎語法.html#cb226-5" tabindex="-1"></a><span class="fu">regexpr</span>(<span class="st">&quot;a&quot;</span>, fruit_eg)</span></code></pre></div>
<pre><code>## [1]  2  3 -1  1  3 -1
## attr(,&quot;match.length&quot;)
## [1]  1  1 -1  1  1 -1
## attr(,&quot;index.type&quot;)
## [1] &quot;chars&quot;
## attr(,&quot;useBytes&quot;)
## [1] TRUE</code></pre>
<p>回傳結果第一列係顯示 a 字元第一次出現於<code>fruit_eg</code>向量各元素中的索引位置，如第一個元素「papaya」，其首次出現 a，是位於第二個字元，故回傳結果為「2」。此外，以第三個元素「lychee」為例，由於該元素內並無 a 字元，故回傳結果為「-1」。</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="r-語言基礎語法.html#cb228-1" tabindex="-1"></a><span class="co"># str_locate()尋找字元出現位置</span></span>
<span id="cb228-2"><a href="r-語言基礎語法.html#cb228-2" tabindex="-1"></a><span class="fu">str_locate</span>(fruit_eg, <span class="st">&quot;a&quot;</span>)</span></code></pre></div>
<pre><code>##      start end
## [1,]     2   2
## [2,]     3   3
## [3,]    NA  NA
## [4,]     1   1
## [5,]     3   3
## [6,]    NA  NA</code></pre>
<p>利用<code>str_locate()</code>函式所得結果更為直接，其顯示字元出現的起迄位置，如回傳結果第一列係指第一個元素「papaya」首次出現 a，是位於第二個字元；而第三列的「NA」則表示該字元未出現於第三個元素中。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_locate_all()</code>尋找特定字元「所有」出現位置</strong>
</p>
<p>然而由上述範例可知，無論是<code>regexpr()</code>或是<code>str_locate()</code>函式接僅能回傳首次出現字元的位置，若希望能回傳所有結果，可使用<code>str_locate_all()</code>函式，引數設定方式與<code>str_locate()</code>相同，回傳結果則包含各元素內所有出現特定字元的起迄位置，並以陣列（list）顯示，有別於<code>str_locate()</code>係以矩陣表示。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="r-語言基礎語法.html#cb230-1" tabindex="-1"></a><span class="co"># str_locate_all()尋找字元所有出現位置</span></span>
<span id="cb230-2"><a href="r-語言基礎語法.html#cb230-2" tabindex="-1"></a><span class="fu">str_locate_all</span>(fruit_eg, <span class="st">&quot;a&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
##      start end
## [1,]     2   2
## [2,]     4   4
## [3,]     6   6
## 
## [[2]]
##      start end
## [1,]     3   3
## 
## [[3]]
##      start end
## 
## [[4]]
##      start end
## [1,]     1   1
## 
## [[5]]
##      start end
## [1,]     3   3
## [2,]     5   5
## 
## [[6]]
##      start end</code></pre>
<p>回傳結果為一陣列，陣列中共有 6 個子陣列，分別代表<code>fruit_eg</code>向量中各元素的執行結果。其中第一個陣列 [[1]] 的矩陣內橫列數（<code>nrow()</code>）為 3，表示在「papaya」元素中共找到 3 個符合條件的字元，而其位置分別為第 2、4、6 個字元。若未找到符合條件的字元，則逕顯示表頭（start、end），其橫列數為 0。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 合併使用尋找字元與擷取字元</strong>
</p>
<p>在實務資料分析時，我們很常在一文字向量中尋找特定字元並依據特定字元擷取段落，此時有賴於尋找及<a href="r-語言基礎語法.html#擷取與取代字元">擷取</a>兩種不同功能的函式。範例如下：</p>
<p>以鄉鎮市區的名稱擷取為例，由於全臺灣行政區的名稱長度落於 2 至 4 字之間，無法單純藉由<code>substr()</code>直接鎖定位置，故應先尋找出「鄉鎮市區」字元所在的位置，再進一步擷取。得知該位置後，擷取的字元必須自第一個開始，結束於上述「鄉鎮市區」的位置減 1。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="r-語言基礎語法.html#cb232-1" tabindex="-1"></a><span class="co"># 建立文字向量</span></span>
<span id="cb232-2"><a href="r-語言基礎語法.html#cb232-2" tabindex="-1"></a>cha_vec<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;竹北市&quot;</span>,<span class="st">&quot;東區&quot;</span>,<span class="st">&quot;那瑪夏區&quot;</span>,<span class="st">&quot;羅東鎮&quot;</span>,<span class="st">&quot;太麻里鄉&quot;</span>)</span>
<span id="cb232-3"><a href="r-語言基礎語法.html#cb232-3" tabindex="-1"></a></span>
<span id="cb232-4"><a href="r-語言基礎語法.html#cb232-4" tabindex="-1"></a><span class="co"># 先利用regexpr()搜尋「鄉鎮市區」的位置</span></span>
<span id="cb232-5"><a href="r-語言基礎語法.html#cb232-5" tabindex="-1"></a>district_loc<span class="ot">=</span><span class="fu">regexpr</span>(<span class="st">&quot;[鄉鎮市區]&quot;</span>, cha_vec)</span>
<span id="cb232-6"><a href="r-語言基礎語法.html#cb232-6" tabindex="-1"></a><span class="co"># regexpr(&quot;鄉|鎮|市|區&quot;, cha_vec) # 或利用「|」</span></span>
<span id="cb232-7"><a href="r-語言基礎語法.html#cb232-7" tabindex="-1"></a>district_loc</span></code></pre></div>
<pre><code>## [1] 3 2 4 3 4
## attr(,&quot;match.length&quot;)
## [1] 1 1 1 1 1</code></pre>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="r-語言基礎語法.html#cb234-1" tabindex="-1"></a><span class="co"># 接著利用substr()擷取字元 (注意必須減1)</span></span>
<span id="cb234-2"><a href="r-語言基礎語法.html#cb234-2" tabindex="-1"></a><span class="fu">substr</span>(cha_vec, <span class="dv">1</span>, district_loc<span class="dv">-1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;竹北&quot;   &quot;東&quot;     &quot;那瑪夏&quot; &quot;羅東&quot;   &quot;太麻里&quot;</code></pre>
</div>
<div id="文字填補" class="section level3 hasAnchor" number="1.2.7">
<h3><span class="header-section-number">1.2.7</span> 文字填補<a href="r-語言基礎語法.html#文字填補" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>文字填補可使向量中所有文字皆為固定長度，使文字格式得以統一，在<code>stringr</code>套件中可利用<code>str_pad()</code>函式填補字元。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_pad()</code>填補字元</strong>
</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="r-語言基礎語法.html#cb236-1" tabindex="-1"></a><span class="fu">str_pad</span>(文字向量, <span class="at">width=</span>, <span class="at">side=</span>, <span class="at">pad=</span><span class="st">&quot;填補字元&quot;</span>)</span></code></pre></div>
<p>在上述程式碼中所需設定的引數彙整如下：</p>
<ul>
<li><code>width=</code>設定文字的寬度，如希望的統一字串格式為「5」個字元，則設定「<code>width=5</code>」<br />
</li>
<li><code>side=</code>設定填補的方向，包含<code>right</code>與<code>left</code><br />
</li>
<li><code>pad=</code>設定欲填補的字元，如希望統一補上「A」字元，則設定「<code>pad="A"</code>」</li>
</ul>
<p>實際範例如下。</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="r-語言基礎語法.html#cb237-1" tabindex="-1"></a><span class="co"># 建立向量</span></span>
<span id="cb237-2"><a href="r-語言基礎語法.html#cb237-2" tabindex="-1"></a>num_pad<span class="ot">=</span><span class="fu">seq</span>(<span class="dv">2</span>, <span class="dv">20</span>, <span class="dv">2</span>)</span>
<span id="cb237-3"><a href="r-語言基礎語法.html#cb237-3" tabindex="-1"></a></span>
<span id="cb237-4"><a href="r-語言基礎語法.html#cb237-4" tabindex="-1"></a><span class="co"># 若希望以0填補於文字最前方，並須為三個字元</span></span>
<span id="cb237-5"><a href="r-語言基礎語法.html#cb237-5" tabindex="-1"></a><span class="fu">str_pad</span>(num_pad, <span class="at">width=</span><span class="dv">3</span>, <span class="at">side=</span><span class="st">&quot;left&quot;</span>, <span class="at">pad=</span><span class="st">&quot;0&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;002&quot; &quot;004&quot; &quot;006&quot; &quot;008&quot; &quot;010&quot; &quot;012&quot; &quot;014&quot; &quot;016&quot; &quot;018&quot; &quot;020&quot;</code></pre>
</div>
<div id="文字排序" class="section level3 hasAnchor" number="1.2.8">
<h3><span class="header-section-number">1.2.8</span> 文字排序<a href="r-語言基礎語法.html#文字排序" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>向量排序是利用<code>sort()</code>、<code>order()</code>、<code>rank()</code>等達成目的（參見<A href="#vector-sort">向量排序</A>小節），而在文字分析中可以利用<code>str_sort()</code>與<code>str_order()</code>達成之。文字的排序係以 UTF-8 編碼順序為原則。程式碼傳如下。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_sort()</code>排序</strong>
</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="r-語言基礎語法.html#cb239-1" tabindex="-1"></a><span class="fu">str_sort</span>(文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_order()</code>取得排序索引</strong>
</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="r-語言基礎語法.html#cb240-1" tabindex="-1"></a><span class="fu">str_order</span>(文字向量)</span></code></pre></div>
<p>實際範例如下。</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="r-語言基礎語法.html#cb241-1" tabindex="-1"></a><span class="co"># 建立向量</span></span>
<span id="cb241-2"><a href="r-語言基礎語法.html#cb241-2" tabindex="-1"></a>transport<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Bus&quot;</span>, <span class="st">&quot;MRT&quot;</span>, <span class="st">&quot;Car&quot;</span>, <span class="st">&quot;Motorcycle&quot;</span>, <span class="st">&quot;Bike&quot;</span>, <span class="st">&quot;Taxi&quot;</span>)</span>
<span id="cb241-3"><a href="r-語言基礎語法.html#cb241-3" tabindex="-1"></a></span>
<span id="cb241-4"><a href="r-語言基礎語法.html#cb241-4" tabindex="-1"></a><span class="co"># 排序</span></span>
<span id="cb241-5"><a href="r-語言基礎語法.html#cb241-5" tabindex="-1"></a><span class="fu">str_sort</span>(transport)</span></code></pre></div>
<pre><code>## [1] &quot;Bike&quot;       &quot;Bus&quot;        &quot;Car&quot;        &quot;Motorcycle&quot; &quot;MRT&quot;       
## [6] &quot;Taxi&quot;</code></pre>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="r-語言基礎語法.html#cb243-1" tabindex="-1"></a><span class="co"># 排序索引</span></span>
<span id="cb243-2"><a href="r-語言基礎語法.html#cb243-2" tabindex="-1"></a><span class="fu">str_order</span>(transport)</span></code></pre></div>
<pre><code>## [1] 5 1 3 4 2 6</code></pre>
</div>
<div id="正規表示式" class="section level3 hasAnchor" number="1.2.9">
<h3><span class="header-section-number">1.2.9</span> 正規表示式<a href="r-語言基礎語法.html#正規表示式" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>正規表示式（Regular Expression）是各程式語言中的標準格式，可藉此做進階的文字處理，擴充上述小節中文字取代、搜尋等功能的彈性，若能掌握此技巧，得以提升文字探勘的能力。常用的正規表示式彙整如表<a href="r-語言基礎語法.html#tab:string-regular-expr">1.6</a>。</p>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:string-regular-expr">表 1.6: </span>文字符號規則
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
符號
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
意義
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
符號
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
意義
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>\\</code>
</td>
<td style="text-align:left;">
符號（如：<code>\\.</code>表示「.」<code>\\\</code>表示「\」）
</td>
<td style="text-align:left;">
<code>*</code>
</td>
<td style="text-align:left;">
連接零個或多個未知字元（如：<code>ab*</code>表示 ab 後面可接或不接任何字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\n</code>
</td>
<td style="text-align:left;">
換行
</td>
<td style="text-align:left;">
<code>+</code>
</td>
<td style="text-align:left;">
連接一個或多個未知字元（如：<code>ab+</code>表示 ab 後面需加一個或多個字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\t</code>
</td>
<td style="text-align:left;">
tab
</td>
<td style="text-align:left;">
<code>?</code>
</td>
<td style="text-align:left;">
連接零個或一個未知字元（如：<code>ab?</code>表示 ab 後面可接一個或不接任何字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\s</code>
</td>
<td style="text-align:left;">
空白
</td>
<td style="text-align:left;">
<code>{n}</code>
</td>
<td style="text-align:left;">
連接前一個字元 n 次（如：<code>a{5}</code>表示 a 重複 5 次）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\S</code>
</td>
<td style="text-align:left;">
非空白
</td>
<td style="text-align:left;">
<code>[]</code>
</td>
<td style="text-align:left;">
任一字元（如：<code>[abc]</code>表示「a、b、c」任一字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\d</code>
</td>
<td style="text-align:left;">
數值
</td>
<td style="text-align:left;">
<code>[^]</code>
</td>
<td style="text-align:left;">
排除..的其他字元（如：<code>[^abc]</code>表示不包含「a、b、c」此三者的其他字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\D</code>
</td>
<td style="text-align:left;">
非數值
</td>
<td style="text-align:left;">
<code>[-]</code>
</td>
<td style="text-align:left;">
範圍（如：<code>[a-c]</code>表示 a 至 c 所有字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\w</code>
</td>
<td style="text-align:left;">
文字
</td>
<td style="text-align:left;">
<code>^</code>
</td>
<td style="text-align:left;">
以…為起始字元（如<code>^abc</code>即是以 abc 為起始字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\W</code>
</td>
<td style="text-align:left;">
非文字
</td>
<td style="text-align:left;">
<code>$</code>
</td>
<td style="text-align:left;">
以…為結尾字元（如<code>abc$</code>即是以 abc 為結尾字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>|</code>
</td>
<td style="text-align:left;">
或者（如：<code>a|b</code>即是 a 或者 b）
</td>
<td style="text-align:left;">
<code>(?=)</code>
</td>
<td style="text-align:left;">
字元後方必須為特定字元者（如：<code>a(?=b)</code>表示 a 後面必須接 b 字元者）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>.</code>
</td>
<td style="text-align:left;">
連接一個未知字元（如：<code>ab.</code>表示 ab 後面必須連接一個字元）
</td>
<td style="text-align:left;">
<code>(?!)</code>
</td>
<td style="text-align:left;">
字元後方必須非特定字元者（如：<code>a(?!b)</code>表示 a 後面非接 b 字元者）
</td>
</tr>
</tbody>
</table>
<p>關於正規表示式的詳細說明請參考<a href="https://www.wikiwand.com/zh-tw/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">此</a>。</p>
</div>
</div>
<div id="控制流程" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> 控制流程<a href="r-語言基礎語法.html#控制流程" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="邏輯判斷" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> 邏輯判斷<a href="r-語言基礎語法.html#邏輯判斷" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<H2 id="if-else">
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>if()</code>函式邏輯控制</strong>
</p>
</H2>
<p>在程式語言中往往需要使用邏輯判斷進一步控制是否往下執行，此時可以利用<code>if(){}</code>的函式判斷，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="r-語言基礎語法.html#cb245-1" tabindex="-1"></a><span class="cf">if</span>(條件){</span>
<span id="cb245-2"><a href="r-語言基礎語法.html#cb245-2" tabindex="-1"></a>  條件為「真」的執行程序</span>
<span id="cb245-3"><a href="r-語言基礎語法.html#cb245-3" tabindex="-1"></a>}</span></code></pre></div>
<p>若<code>條件</code>回傳結果為「真」（<code>TRUE</code>），執行下方的程式碼，否則不執行之。</p>
<p>此外，若條件為「偽」（<code>FALSE</code>）時亦有其他須執行程序，可利用<code>else{}</code>控制之，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="r-語言基礎語法.html#cb246-1" tabindex="-1"></a><span class="cf">if</span>(條件){</span>
<span id="cb246-2"><a href="r-語言基礎語法.html#cb246-2" tabindex="-1"></a>  條件為「真」的執行程序</span>
<span id="cb246-3"><a href="r-語言基礎語法.html#cb246-3" tabindex="-1"></a>}<span class="cf">else</span>{</span>
<span id="cb246-4"><a href="r-語言基礎語法.html#cb246-4" tabindex="-1"></a>  條件為「偽」的執行程序</span>
<span id="cb246-5"><a href="r-語言基礎語法.html#cb246-5" tabindex="-1"></a>}</span></code></pre></div>
<p>若有多重條件判斷，可利用<code>else if(){}</code>判斷多種不同的條件，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="r-語言基礎語法.html#cb247-1" tabindex="-1"></a><span class="cf">if</span>(條件1){</span>
<span id="cb247-2"><a href="r-語言基礎語法.html#cb247-2" tabindex="-1"></a>  條件1為「真」的執行程序</span>
<span id="cb247-3"><a href="r-語言基礎語法.html#cb247-3" tabindex="-1"></a>}<span class="cf">else</span> <span class="cf">if</span>(條件2){</span>
<span id="cb247-4"><a href="r-語言基礎語法.html#cb247-4" tabindex="-1"></a>  條件2為「真」的執行程序</span>
<span id="cb247-5"><a href="r-語言基礎語法.html#cb247-5" tabindex="-1"></a>}<span class="cf">else</span>{</span>
<span id="cb247-6"><a href="r-語言基礎語法.html#cb247-6" tabindex="-1"></a>  條件為「偽」的執行程序</span>
<span id="cb247-7"><a href="r-語言基礎語法.html#cb247-7" tabindex="-1"></a>}</span></code></pre></div>
以上三種不同的邏輯判斷控制，可參照圖<a href="r-語言基礎語法.html#fig:for-loop-fig">1.4</a>之示意圖。
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:for-loop-fig"></span>
<img src="figure/if_loop.png" alt="邏輯判斷示意圖" width="70%" />
<p class="caption">
圖 1.4: 邏輯判斷示意圖
</p>
</div>
<p>以下示範多重條件判斷的程式碼，撰寫如下。</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="r-語言基礎語法.html#cb248-1" tabindex="-1"></a>score<span class="ot">=</span><span class="dv">65</span></span>
<span id="cb248-2"><a href="r-語言基礎語法.html#cb248-2" tabindex="-1"></a></span>
<span id="cb248-3"><a href="r-語言基礎語法.html#cb248-3" tabindex="-1"></a><span class="cf">if</span>(score<span class="sc">&gt;=</span><span class="dv">90</span>){</span>
<span id="cb248-4"><a href="r-語言基礎語法.html#cb248-4" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;A&quot;</span>)</span>
<span id="cb248-5"><a href="r-語言基礎語法.html#cb248-5" tabindex="-1"></a>}<span class="cf">else</span> <span class="cf">if</span>(score<span class="sc">&gt;=</span><span class="dv">70</span>){</span>
<span id="cb248-6"><a href="r-語言基礎語法.html#cb248-6" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;B&quot;</span>)</span>
<span id="cb248-7"><a href="r-語言基礎語法.html#cb248-7" tabindex="-1"></a>}<span class="cf">else</span> <span class="cf">if</span>(score<span class="sc">&gt;=</span><span class="dv">60</span>){</span>
<span id="cb248-8"><a href="r-語言基礎語法.html#cb248-8" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;C&quot;</span>)</span>
<span id="cb248-9"><a href="r-語言基礎語法.html#cb248-9" tabindex="-1"></a>}<span class="cf">else</span>{</span>
<span id="cb248-10"><a href="r-語言基礎語法.html#cb248-10" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;F&quot;</span>)</span>
<span id="cb248-11"><a href="r-語言基礎語法.html#cb248-11" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;C&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>ifelse()</code>函式</strong>
</p>
<p>除了上述流程控制以外，若欲執行簡單的邏輯判斷，並將程式碼縮減至一行，可嘗試使用<code>ifelse()</code>函式，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="r-語言基礎語法.html#cb250-1" tabindex="-1"></a><span class="fu">ifelse</span>(條件, 條件為「真」的執行程序, 條件為「偽」的執行程序)</span></code></pre></div>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="r-語言基礎語法.html#cb251-1" tabindex="-1"></a>score<span class="ot">=</span><span class="dv">65</span></span>
<span id="cb251-2"><a href="r-語言基礎語法.html#cb251-2" tabindex="-1"></a><span class="fu">ifelse</span>(score<span class="sc">&gt;=</span><span class="dv">90</span>, <span class="st">&quot;Excellent&quot;</span>, <span class="st">&quot;Good&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Good&quot;</code></pre>
<p>或撰寫複雜的巢式邏輯判斷，如下：</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="r-語言基礎語法.html#cb253-1" tabindex="-1"></a>score<span class="ot">=</span><span class="dv">65</span></span>
<span id="cb253-2"><a href="r-語言基礎語法.html#cb253-2" tabindex="-1"></a><span class="fu">ifelse</span>(score<span class="sc">&gt;=</span><span class="dv">90</span>, <span class="st">&quot;A&quot;</span>, <span class="fu">ifelse</span>(score<span class="sc">&gt;=</span><span class="dv">70</span>, <span class="st">&quot;B&quot;</span>, <span class="fu">ifelse</span>(score<span class="sc">&gt;=</span><span class="dv">60</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;F&quot;</span>)))</span></code></pre></div>
<pre><code>## [1] &quot;C&quot;</code></pre>
<p>雖然利用<code>ifelse()</code>函式可達到相同目的，且程式碼縮減至一行，然而此種寫法在偵錯時不容易檢查，故建議若只是執行簡單（非巢狀）的邏輯判斷時可利用<code>ifelse()</code>函式；若為複雜的邏輯判斷，仍須使用<A href="#if-else"><code>if(){}else if{}else{}</code></A>的邏輯控制較為清楚。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>switch()</code>函式判斷</strong>
</p>
<p><code>switch()</code>的功能與<code>if()</code>函式邏輯控制相當，在判斷的邏輯較為單純的時候，可應用此函式較為簡潔，程式碼撰寫如下：</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="r-語言基礎語法.html#cb255-1" tabindex="-1"></a><span class="cf">switch</span>(x,</span>
<span id="cb255-2"><a href="r-語言基礎語法.html#cb255-2" tabindex="-1"></a>       條件1 <span class="ot">=</span> 結果1,</span>
<span id="cb255-3"><a href="r-語言基礎語法.html#cb255-3" tabindex="-1"></a>       條件2 <span class="ot">=</span> 結果2,</span>
<span id="cb255-4"><a href="r-語言基礎語法.html#cb255-4" tabindex="-1"></a>       條件3 <span class="ot">=</span> 結果3,</span>
<span id="cb255-5"><a href="r-語言基礎語法.html#cb255-5" tabindex="-1"></a>)</span></code></pre></div>
<p>再次以分數與等第之間的轉換為例，若等第與分數之間屬於一對一的關係，則可單純透過<code>switch()</code>函式控制，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="r-語言基礎語法.html#cb256-1" tabindex="-1"></a>grade<span class="ot">=</span><span class="st">&quot;A&quot;</span></span>
<span id="cb256-2"><a href="r-語言基礎語法.html#cb256-2" tabindex="-1"></a></span>
<span id="cb256-3"><a href="r-語言基礎語法.html#cb256-3" tabindex="-1"></a><span class="cf">switch</span>(grade,</span>
<span id="cb256-4"><a href="r-語言基礎語法.html#cb256-4" tabindex="-1"></a>       <span class="st">&quot;A&quot;</span><span class="ot">=</span><span class="dv">95</span>,</span>
<span id="cb256-5"><a href="r-語言基礎語法.html#cb256-5" tabindex="-1"></a>       <span class="st">&quot;B&quot;</span><span class="ot">=</span><span class="dv">80</span>,</span>
<span id="cb256-6"><a href="r-語言基礎語法.html#cb256-6" tabindex="-1"></a>       <span class="st">&quot;C&quot;</span><span class="ot">=</span><span class="dv">65</span>,</span>
<span id="cb256-7"><a href="r-語言基礎語法.html#cb256-7" tabindex="-1"></a>       <span class="st">&quot;F&quot;</span><span class="ot">=</span><span class="dv">50</span></span>
<span id="cb256-8"><a href="r-語言基礎語法.html#cb256-8" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## [1] 95</code></pre>
</div>
<div id="for迴圈" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> <code>for()</code>迴圈<a href="r-語言基礎語法.html#for迴圈" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>迴圈應用於需要重複執行的程式碼，其中最常見的是<code>for()</code>迴圈，用以控制執行的次數，其程式撰寫如下：</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="r-語言基礎語法.html#cb258-1" tabindex="-1"></a><span class="cf">for</span>(物件 <span class="cf">in</span> 向量){</span>
<span id="cb258-2"><a href="r-語言基礎語法.html#cb258-2" tabindex="-1"></a>  執行程序</span>
<span id="cb258-3"><a href="r-語言基礎語法.html#cb258-3" tabindex="-1"></a>}</span></code></pre></div>
<p>程式中的<code>物件</code>為向量中的元素，當所有元素皆輪流執行程序，則此迴圈即停止。具體來說，以由 1 計數並列印至 5 為例，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="r-語言基礎語法.html#cb259-1" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)){</span>
<span id="cb259-2"><a href="r-語言基礎語法.html#cb259-2" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb259-3"><a href="r-語言基礎語法.html#cb259-3" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p>此範例中<code>c(1:5)</code>即是向量，而向量中的每一元素即作為迴圈中的物件<code>i</code>，並用以執行程式（列印<code>i</code>）。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>break</code>結束迴圈</strong>
</p>
<p>有時我們希望在特定條件「結束」整個迴圈，可利用<code>break</code>終止之。如以下範例中，若遇到除以 3 的<A href="#vector-compute">餘數（<code>%%</code>）</A>為 0 時即停止。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="r-語言基礎語法.html#cb261-1" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)){</span>
<span id="cb261-2"><a href="r-語言基礎語法.html#cb261-2" tabindex="-1"></a>  <span class="cf">if</span>(i <span class="sc">%%</span> <span class="dv">3</span><span class="sc">==</span><span class="dv">0</span>){</span>
<span id="cb261-3"><a href="r-語言基礎語法.html#cb261-3" tabindex="-1"></a>    <span class="cf">break</span></span>
<span id="cb261-4"><a href="r-語言基礎語法.html#cb261-4" tabindex="-1"></a>  }</span>
<span id="cb261-5"><a href="r-語言基礎語法.html#cb261-5" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb261-6"><a href="r-語言基礎語法.html#cb261-6" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>next</code>跳過迴圈</strong>
</p>
<p>有時我們希望在特定條件「跳過」迴圈，可利用<code>next</code>執行下一程序。如以下範例中，若遇到除以 3 的<A href="#vector-compute">餘數（<code>%%</code>）</A>為 0 時跳過該執行程序，並繼續執行下一個。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="r-語言基礎語法.html#cb263-1" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)){</span>
<span id="cb263-2"><a href="r-語言基礎語法.html#cb263-2" tabindex="-1"></a>  <span class="cf">if</span>(i <span class="sc">%%</span> <span class="dv">3</span><span class="sc">==</span><span class="dv">0</span>){</span>
<span id="cb263-3"><a href="r-語言基礎語法.html#cb263-3" tabindex="-1"></a>    <span class="cf">next</span></span>
<span id="cb263-4"><a href="r-語言基礎語法.html#cb263-4" tabindex="-1"></a>  }</span>
<span id="cb263-5"><a href="r-語言基礎語法.html#cb263-5" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb263-6"><a href="r-語言基礎語法.html#cb263-6" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 4
## [1] 5
## [1] 7
## [1] 8
## [1] 10</code></pre>
</div>
<div id="while迴圈" class="section level3 hasAnchor" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> <code>while()</code>迴圈<a href="r-語言基礎語法.html#while迴圈" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>for()</code>迴圈可以控制執行的次數，所輸入向量的長度即表示程式需執行的次數，然而有時候我們不知道須執行幾次，或希望程式不斷地執行，直至「不滿足」指定的執行條件時才終止，此時可以利用<code>while()</code>迴圈達成此目的。程式碼撰寫如下：</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="r-語言基礎語法.html#cb265-1" tabindex="-1"></a><span class="cf">while</span>(執行條件){</span>
<span id="cb265-2"><a href="r-語言基礎語法.html#cb265-2" tabindex="-1"></a>  執行程序</span>
<span id="cb265-3"><a href="r-語言基礎語法.html#cb265-3" tabindex="-1"></a>}</span></code></pre></div>
<p>以由 1 計數至 10 為例，利用<code>while()</code>迴圈執行之程式碼撰寫如下。</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="r-語言基礎語法.html#cb266-1" tabindex="-1"></a>i<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb266-2"><a href="r-語言基礎語法.html#cb266-2" tabindex="-1"></a><span class="cf">while</span>(i<span class="sc">&lt;=</span><span class="dv">10</span>){</span>
<span id="cb266-3"><a href="r-語言基礎語法.html#cb266-3" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb266-4"><a href="r-語言基礎語法.html#cb266-4" tabindex="-1"></a>  i<span class="ot">=</span>i<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb266-5"><a href="r-語言基礎語法.html#cb266-5" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
</div>
<div id="建立自定義函式" class="section level3 hasAnchor" number="1.3.4">
<h3><span class="header-section-number">1.3.4</span> 建立自定義函式<a href="r-語言基礎語法.html#建立自定義函式" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>在程式撰寫中，通常我們會使用套件中的函式來做運算，然而有時候現成的函式無法滿足自身需求，此時就必須自行建立函式，可透過<code>function()</code>函式建立之。<code>function()</code>函式的撰寫架構如下：</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="r-語言基礎語法.html#cb268-1" tabindex="-1"></a>函式名稱<span class="ot">=</span><span class="cf">function</span>(變數1, 變數2, ...){</span>
<span id="cb268-2"><a href="r-語言基礎語法.html#cb268-2" tabindex="-1"></a>  執行程式</span>
<span id="cb268-3"><a href="r-語言基礎語法.html#cb268-3" tabindex="-1"></a>  <span class="fu">return</span>(結果)</span>
<span id="cb268-4"><a href="r-語言基礎語法.html#cb268-4" tabindex="-1"></a>}</span></code></pre></div>
<p>其中，<code>執行程式</code>為利用所輸入的<code>變數</code>進行程式運算，而最終<code>結果</code>即為欲輸出的資訊，可為任何一種物件（object），並利用<code>return()</code>函式明確說明欲輸出的資訊。</p>
<p>以下以簡單的範例說明<code>function()</code>函式之應用，以向量的最小值與最大值之加總為例。</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="r-語言基礎語法.html#cb269-1" tabindex="-1"></a><span class="co"># 建立函式</span></span>
<span id="cb269-2"><a href="r-語言基礎語法.html#cb269-2" tabindex="-1"></a>minmax<span class="ot">=</span><span class="cf">function</span>(x){</span>
<span id="cb269-3"><a href="r-語言基礎語法.html#cb269-3" tabindex="-1"></a>  temp<span class="ot">=</span><span class="fu">min</span>(x)<span class="sc">+</span><span class="fu">max</span>(x)</span>
<span id="cb269-4"><a href="r-語言基礎語法.html#cb269-4" tabindex="-1"></a>  <span class="fu">return</span>(temp)</span>
<span id="cb269-5"><a href="r-語言基礎語法.html#cb269-5" tabindex="-1"></a>}</span>
<span id="cb269-6"><a href="r-語言基礎語法.html#cb269-6" tabindex="-1"></a></span>
<span id="cb269-7"><a href="r-語言基礎語法.html#cb269-7" tabindex="-1"></a><span class="co"># 測試函式</span></span>
<span id="cb269-8"><a href="r-語言基礎語法.html#cb269-8" tabindex="-1"></a><span class="fu">minmax</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>))</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>透過自定義函式，可提升程式撰寫的效率，並簡化程式碼的複雜度，對於後續偵錯與檢驗有極高助益。此外在 R 語言中自定義函式亦可打包為套件，未來執行相關程式時，僅需讀取套件後，即可應用自定義的函式，進而提升程式編撰彈性與效率。</p>
</div>
<div id="錯誤處理" class="section level3 hasAnchor" number="1.3.5">
<h3><span class="header-section-number">1.3.5</span> 錯誤處理<a href="r-語言基礎語法.html#錯誤處理" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>在迴圈控制中，有時程式會因執行錯誤而停止迴圈，造成執行的困擾。此時可以利用<code>tryCatch()</code>函式偵錯，以決定發現錯誤後的下一步驟，可透過「停止（<code>stop()</code>）」立即終止迴圈，或透過「警告（<code>warning()</code>）」顯示警告訊息，抑或透過「訊息（<code>message()</code>）」顯示提示訊息。<code>tryCatch()</code>函式的撰寫說明如下。</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="r-語言基礎語法.html#cb271-1" tabindex="-1"></a><span class="fu">tryCatch</span>({</span>
<span id="cb271-2"><a href="r-語言基礎語法.html#cb271-2" tabindex="-1"></a>    執行程式碼</span>
<span id="cb271-3"><a href="r-語言基礎語法.html#cb271-3" tabindex="-1"></a>  }, <span class="at">error=</span><span class="cf">function</span>(e){</span>
<span id="cb271-4"><a href="r-語言基礎語法.html#cb271-4" tabindex="-1"></a>    錯誤回傳訊息（可為stop、warning或message）</span>
<span id="cb271-5"><a href="r-語言基礎語法.html#cb271-5" tabindex="-1"></a>})</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>stop()</code>終止迴圈</strong>
</p>
<p>為說明錯誤處理的程序，在此先建立一個錯誤的程式，此程式係將陣列中的各元素乘以 2。</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="r-語言基礎語法.html#cb272-1" tabindex="-1"></a>vec_try<span class="ot">=</span><span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="st">&quot;a&quot;</span>, <span class="dv">10</span>, <span class="st">&quot;b&quot;</span>, <span class="dv">6</span>, <span class="dv">8</span>)</span>
<span id="cb272-2"><a href="r-語言基礎語法.html#cb272-2" tabindex="-1"></a></span>
<span id="cb272-3"><a href="r-語言基礎語法.html#cb272-3" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> vec_try){</span>
<span id="cb272-4"><a href="r-語言基礎語法.html#cb272-4" tabindex="-1"></a>  <span class="fu">print</span>(i<span class="sc">*</span><span class="dv">2</span>)</span>
<span id="cb272-5"><a href="r-語言基礎語法.html#cb272-5" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 2
## [1] 10</code></pre>
<pre><code>## Error in i * 2: 二元運算子中有非數值引數</code></pre>
<p>由上述執行結果可知，由於<code>vec_try</code>陣列中含有部分元素屬於文字，無法做四則運算，故程式執行有誤。</p>
<p>若希望迴圈遇到問題即自動停止，並顯示自定義的錯誤訊息，程式撰寫如下。</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="r-語言基礎語法.html#cb275-1" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> vec_try){</span>
<span id="cb275-2"><a href="r-語言基礎語法.html#cb275-2" tabindex="-1"></a>  <span class="fu">tryCatch</span>({</span>
<span id="cb275-3"><a href="r-語言基礎語法.html#cb275-3" tabindex="-1"></a>    <span class="fu">print</span>(i<span class="sc">*</span><span class="dv">2</span>)</span>
<span id="cb275-4"><a href="r-語言基礎語法.html#cb275-4" tabindex="-1"></a>  }, <span class="at">error=</span><span class="cf">function</span>(e){</span>
<span id="cb275-5"><a href="r-語言基礎語法.html#cb275-5" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="fu">paste0</span>(i, <span class="st">&quot; is not numeric!</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb275-6"><a href="r-語言基礎語法.html#cb275-6" tabindex="-1"></a>  })</span>
<span id="cb275-7"><a href="r-語言基礎語法.html#cb275-7" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 2
## [1] 10</code></pre>
<pre><code>## Error in value[[3L]](cond): a is not numeric!</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>warning()</code>顯示警告</strong>
</p>
<p>若希望迴圈遇到錯誤時勿停止，而是顯示自定義的警告訊息，並繼續執行程式碼，則程式撰寫如下。</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="r-語言基礎語法.html#cb278-1" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> vec_try){</span>
<span id="cb278-2"><a href="r-語言基礎語法.html#cb278-2" tabindex="-1"></a>  <span class="fu">tryCatch</span>({</span>
<span id="cb278-3"><a href="r-語言基礎語法.html#cb278-3" tabindex="-1"></a>    <span class="fu">print</span>(i<span class="sc">*</span><span class="dv">2</span>)</span>
<span id="cb278-4"><a href="r-語言基礎語法.html#cb278-4" tabindex="-1"></a>  }, <span class="at">error=</span><span class="cf">function</span>(e){</span>
<span id="cb278-5"><a href="r-語言基礎語法.html#cb278-5" tabindex="-1"></a>    <span class="fu">warning</span>(<span class="fu">paste0</span>(i, <span class="st">&quot; is not numeric!</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb278-6"><a href="r-語言基礎語法.html#cb278-6" tabindex="-1"></a>  })</span>
<span id="cb278-7"><a href="r-語言基礎語法.html#cb278-7" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 2
## [1] 10</code></pre>
<pre><code>## Warning in value[[3L]](cond): a is not numeric!</code></pre>
<pre><code>## [1] 20</code></pre>
<pre><code>## Warning in value[[3L]](cond): b is not numeric!</code></pre>
<pre><code>## [1] 12
## [1] 16</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>message()</code>顯示訊息</strong>
</p>
<p>若希望迴圈遇到錯誤時勿停止，而是顯示自定義的訊息，並繼續執行程式碼，則程式撰寫如下。</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="r-語言基礎語法.html#cb284-1" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> vec_try){</span>
<span id="cb284-2"><a href="r-語言基礎語法.html#cb284-2" tabindex="-1"></a>  <span class="fu">tryCatch</span>({</span>
<span id="cb284-3"><a href="r-語言基礎語法.html#cb284-3" tabindex="-1"></a>    <span class="fu">print</span>(i<span class="sc">*</span><span class="dv">2</span>)</span>
<span id="cb284-4"><a href="r-語言基礎語法.html#cb284-4" tabindex="-1"></a>  }, <span class="at">error=</span><span class="cf">function</span>(e){</span>
<span id="cb284-5"><a href="r-語言基礎語法.html#cb284-5" tabindex="-1"></a>    <span class="fu">message</span>(<span class="fu">paste0</span>(i, <span class="st">&quot; is not numeric!&quot;</span>))</span>
<span id="cb284-6"><a href="r-語言基礎語法.html#cb284-6" tabindex="-1"></a>  })</span>
<span id="cb284-7"><a href="r-語言基礎語法.html#cb284-7" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 2
## [1] 10</code></pre>
<pre><code>## a is not numeric!</code></pre>
<pre><code>## [1] 20</code></pre>
<pre><code>## b is not numeric!</code></pre>
<pre><code>## [1] 12
## [1] 16</code></pre>
<p>錯誤處理範例可應用於未來執行複雜程式碼時所面臨到的執行錯誤，使程式執行更自動化，以避免受到資料品質等問題的干擾而需人工涉入除錯。</p>
</div>
<div id="apply函式家族" class="section level3 hasAnchor" number="1.3.6">
<h3><span class="header-section-number">1.3.6</span> <code>apply</code>函式家族<a href="r-語言基礎語法.html#apply函式家族" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>apply()</code></strong>
</p>
<p>在<a href="r-語言基礎語法.html#矩陣matrix">矩陣（Matrix）</a>小節中，我們提過可以利用<code>rowSums</code>等函式達成橫列與直行運算（請參照表<a href="r-語言基礎語法.html#tab:matrix-operation-table">1.4</a>），然試想若沒有該函式用以處理矩陣資料，我們可直接透過<code>for()</code>迴圈逐行或逐列針對矩陣運算，以橫列加總（<code>rowSums</code>）為例，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="r-語言基礎語法.html#cb290-1" tabindex="-1"></a><span class="co"># 建立mat_eg矩陣</span></span>
<span id="cb290-2"><a href="r-語言基礎語法.html#cb290-2" tabindex="-1"></a>mat_eg<span class="ot">=</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">6</span>,</span>
<span id="cb290-3"><a href="r-語言基礎語法.html#cb290-3" tabindex="-1"></a>                <span class="dv">8</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">6</span>,<span class="dv">10</span>,</span>
<span id="cb290-4"><a href="r-語言基礎語法.html#cb290-4" tabindex="-1"></a>                <span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">7</span>,<span class="dv">5</span>,</span>
<span id="cb290-5"><a href="r-語言基礎語法.html#cb290-5" tabindex="-1"></a>                <span class="dv">7</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">9</span>,</span>
<span id="cb290-6"><a href="r-語言基礎語法.html#cb290-6" tabindex="-1"></a>                <span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">8</span>), <span class="at">nrow=</span><span class="dv">5</span>)</span>
<span id="cb290-7"><a href="r-語言基礎語法.html#cb290-7" tabindex="-1"></a></span>
<span id="cb290-8"><a href="r-語言基礎語法.html#cb290-8" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(mat_eg))){</span>
<span id="cb290-9"><a href="r-語言基礎語法.html#cb290-9" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">sum</span>(mat_eg[i,]), <span class="st">&quot; &quot;</span>)</span>
<span id="cb290-10"><a href="r-語言基礎語法.html#cb290-10" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## 31  21  28  28  38</code></pre>
<p>然而如是的寫法效率極差，在 R 語言中類似 <code>for()</code> 迴圈的程序可以考慮更高效率的<code>apply()</code>函式取代之，程式語法如下：</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="r-語言基礎語法.html#cb292-1" tabindex="-1"></a><span class="fu">apply</span>(矩陣資料, 方向, 運算函式)</span></code></pre></div>
<p>其中<code>方向</code>有兩種選擇：<code>1</code>表示逐列（row）運算；<code>2</code>表示逐行（column）運算。而<code>運算函式</code>可以是 R 語言中固有的運算式（如：<code>sum</code>、<code>mean</code>）等，亦可利用自定義的函式。<code>apply()</code>函式的運算概念如圖<a href="r-語言基礎語法.html#fig:apply-fig">1.5</a>之示意圖。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:apply-fig"></span>
<img src="figure/apply.png" alt="`apply()`函式運算示意圖" width="60%" />
<p class="caption">
圖 1.5: <code>apply()</code>函式運算示意圖
</p>
</div>
<p>以<code>mat_eg</code>矩陣為範例，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="r-語言基礎語法.html#cb293-1" tabindex="-1"></a><span class="co"># 逐列加總 (=rowSums)</span></span>
<span id="cb293-2"><a href="r-語言基礎語法.html#cb293-2" tabindex="-1"></a><span class="fu">apply</span>(mat_eg, <span class="dv">1</span>, sum)</span></code></pre></div>
<pre><code>## [1] 31 21 28 28 38</code></pre>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="r-語言基礎語法.html#cb295-1" tabindex="-1"></a><span class="co"># 逐行平均 (=colMeans)</span></span>
<span id="cb295-2"><a href="r-語言基礎語法.html#cb295-2" tabindex="-1"></a><span class="fu">apply</span>(mat_eg, <span class="dv">2</span>, mean)</span></code></pre></div>
<pre><code>## [1] 5.8 7.8 5.6 5.0 5.0</code></pre>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="r-語言基礎語法.html#cb297-1" tabindex="-1"></a><span class="co"># 逐列尋找最小值</span></span>
<span id="cb297-2"><a href="r-語言基礎語法.html#cb297-2" tabindex="-1"></a><span class="fu">apply</span>(mat_eg, <span class="dv">1</span>, min)</span></code></pre></div>
<pre><code>## [1] 2 1 2 3 5</code></pre>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="r-語言基礎語法.html#cb299-1" tabindex="-1"></a><span class="co"># 逐行尋找最小值索引</span></span>
<span id="cb299-2"><a href="r-語言基礎語法.html#cb299-2" tabindex="-1"></a><span class="fu">apply</span>(mat_eg, <span class="dv">2</span>, which.min)</span></code></pre></div>
<pre><code>## [1] 2 4 1 3 4</code></pre>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="r-語言基礎語法.html#cb301-1" tabindex="-1"></a><span class="co"># 逐行計算標準差</span></span>
<span id="cb301-2"><a href="r-語言基礎語法.html#cb301-2" tabindex="-1"></a><span class="fu">apply</span>(mat_eg, <span class="dv">2</span>, sd)</span></code></pre></div>
<pre><code>## [1] 3.492850 1.483240 2.607681 2.915476 1.870829</code></pre>
<p>此外，<code>運算函式</code>亦可自行定義，請參考<a href="r-語言基礎語法.html#建立自定義函式">建立自定義函式</a>小節，程式碼範例如下。</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="r-語言基礎語法.html#cb303-1" tabindex="-1"></a><span class="co"># 建立自定義函式</span></span>
<span id="cb303-2"><a href="r-語言基礎語法.html#cb303-2" tabindex="-1"></a>minmax<span class="ot">=</span><span class="cf">function</span>(x){</span>
<span id="cb303-3"><a href="r-語言基礎語法.html#cb303-3" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">min</span>(x)<span class="sc">+</span><span class="fu">max</span>(x))</span>
<span id="cb303-4"><a href="r-語言基礎語法.html#cb303-4" tabindex="-1"></a>}</span></code></pre></div>
<p>先行建立一個自定義函式，其功能係將向量中的最小值與最大值予以相加。</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="r-語言基礎語法.html#cb304-1" tabindex="-1"></a><span class="co"># 逐列計算最小值與最大值之加總</span></span>
<span id="cb304-2"><a href="r-語言基礎語法.html#cb304-2" tabindex="-1"></a><span class="fu">apply</span>(mat_eg, <span class="dv">1</span>, minmax)</span></code></pre></div>
<pre><code>## [1] 12  8 11 11 15</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>lapply()</code></strong>
</p>
<p><code>lapply()</code>函式可以針對一陣列中所有向量，或一向量內中所有元素做運算，所回傳的結果為一陣列，程式碼撰寫如下：</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="r-語言基礎語法.html#cb306-1" tabindex="-1"></a><span class="fu">lapply</span>(陣列或向量, 執行函式)</span></code></pre></div>
<p>以下簡單範例中計算陣列內各向量的總和。</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="r-語言基礎語法.html#cb307-1" tabindex="-1"></a><span class="co"># 建立陣列</span></span>
<span id="cb307-2"><a href="r-語言基礎語法.html#cb307-2" tabindex="-1"></a>list_eg<span class="ot">=</span><span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">5</span>,<span class="dv">7</span>), <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">5</span>,<span class="dv">9</span>), <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">9</span>,<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb307-3"><a href="r-語言基礎語法.html#cb307-3" tabindex="-1"></a></span>
<span id="cb307-4"><a href="r-語言基礎語法.html#cb307-4" tabindex="-1"></a><span class="fu">lapply</span>(list_eg, sum)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 22
## 
## [[2]]
## [1] 25
## 
## [[3]]
## [1] 27</code></pre>
<p>此外，<code>lapply()</code>的常見應用係取代<code>for()</code>迴圈批次讀取大量的檔案，以下範例中係讀取向量內各元素的檔案。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="r-語言基礎語法.html#cb309-1" tabindex="-1"></a><span class="co"># 利用dir()讀取指定資料夾檔案</span></span>
<span id="cb309-2"><a href="r-語言基礎語法.html#cb309-2" tabindex="-1"></a>dir_files<span class="ot">=</span><span class="fu">dir</span>(<span class="st">&quot;路徑&quot;</span>)</span>
<span id="cb309-3"><a href="r-語言基礎語法.html#cb309-3" tabindex="-1"></a></span>
<span id="cb309-4"><a href="r-語言基礎語法.html#cb309-4" tabindex="-1"></a>df<span class="ot">=</span><span class="fu">lapply</span>(dir_files, read.csv)</span></code></pre></div>
<p><a href="r-語言基礎語法.html#資料來源"><code>dir()</code></a>函式係讀取指定資料夾內所有檔案名稱；<a href="r-語言基礎語法.html#csv-與-txt-檔"><code>read.csv()</code></a>函式用以讀取文字檔案。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>sapply()</code></strong>
</p>
<p><code>sapply()</code>函式與<code>lapply()</code>函式相當，惟其輸出結果更為簡潔，為一向量，而非陣列。程式碼建構如下：</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="r-語言基礎語法.html#cb310-1" tabindex="-1"></a><span class="fu">sapply</span>(陣列或向量, 執行函式)</span></code></pre></div>
<p>再次以<code>list_eg</code>資料計算陣列中各向量之總和為例，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="r-語言基礎語法.html#cb311-1" tabindex="-1"></a><span class="fu">sapply</span>(list_eg, sum)</span></code></pre></div>
<pre><code>## [1] 22 25 27</code></pre>
<p>由輸出結果可知，計算成果與<code>lapply()</code>相同，最大差別在於其為一向量，結果更為簡單明瞭。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>mapply()</code></strong>
</p>
<p><code>mapply()</code>函式是所有<code>apply</code>家族中應用彈性最高者，亦可解決許多使用<code>for()</code>迴圈運算速度過慢的問題，其函式撰寫架構如下：</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="r-語言基礎語法.html#cb313-1" tabindex="-1"></a><span class="fu">mapply</span>(<span class="cf">function</span>(引數) 執行程式, 引數範圍)</span></code></pre></div>
<p>上式中<code>function(引數) 執行程式</code>即<a href="r-語言基礎語法.html#建立自定義函式">自定義函式</a>，在給定的<code>引數範圍</code>條件下，依序執行程式。</p>
<p>具體而言，再次以前文中的陣列內各向量加總為例，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="r-語言基礎語法.html#cb314-1" tabindex="-1"></a><span class="fu">mapply</span>(<span class="cf">function</span>(x) <span class="fu">sum</span>(list_eg[[x]]), <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(list_eg)))</span></code></pre></div>
</div>
</div>
<div id="資料讀取與匯出" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> 資料讀取與匯出<a href="r-語言基礎語法.html#資料讀取與匯出" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="csv-與-txt-檔" class="section level3 hasAnchor" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> CSV 與 TXT 檔<a href="r-語言基礎語法.html#csv-與-txt-檔" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>CSV 與 TXT 檔皆為純文字資料格式，其中前者為「逗號分隔」，而後者對於分隔的格式不拘（可能是逗號、tab 等）。由於此兩類型檔案易於儲存大量資料，且可直接由如電腦內建的 Notepad 軟體開啟，故應用最為廣泛。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 讀取資料</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>由本機讀取</u></strong>
</p>
<p>於<code>read.csv()</code>函式中填入資料的路徑，資料型態可為：.csv 或 .txt 檔案。</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="r-語言基礎語法.html#cb315-1" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">&quot;路徑&quot;</span>)</span></code></pre></div>
<p>路徑可以透過「斜線」或「雙反斜線」編寫。</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="r-語言基礎語法.html#cb316-1" tabindex="-1"></a><span class="co"># 斜線</span></span>
<span id="cb316-2"><a href="r-語言基礎語法.html#cb316-2" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">&quot;C:/Users/USER/Downloads/world.csv&quot;</span>)</span>
<span id="cb316-3"><a href="r-語言基礎語法.html#cb316-3" tabindex="-1"></a></span>
<span id="cb316-4"><a href="r-語言基礎語法.html#cb316-4" tabindex="-1"></a><span class="co"># 雙反斜線</span></span>
<span id="cb316-5"><a href="r-語言基礎語法.html#cb316-5" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">&quot;C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">USER</span><span class="sc">\\</span><span class="st">Downloads</span><span class="sc">\\</span><span class="st">world.csv&quot;</span>)</span></code></pre></div>
<p style="font-size:18px;line-height:1">
<strong><u>由網站讀取</u></strong>
</p>
<p>於<code>read.csv()</code>函式中填入資料的網址（url）。</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="r-語言基礎語法.html#cb317-1" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">&quot;url&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="r-語言基礎語法.html#cb318-1" tabindex="-1"></a>world<span class="ot">=</span><span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/ChiaJung-Yeh/R-Code-Sharing/main/R_Preliminary/world.csv&quot;</span>)</span></code></pre></div>
<p><code>world</code>資料讀取結果如下</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-4ad5ea134b839f0a2d29" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4ad5ea134b839f0a2d29">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177"],["FJ","TZ","EH","CA","US","KZ","UZ","PG","ID","AR","CL","CD","SO","KE","SD","TD","HT","DO","RU","BS","FK","NO","GL","TF","TL","ZA","LS","MX","UY","BR","BO","PE","CO","PA","CR","NI","HN","SV","GT","BZ","VE","GY","SR","FR","EC","PR","JM","CU","ZW","BW",null,"SN","ML","MR","BJ","NE","NG","CM","TG","GH","CI","GN","GW","LR","SL","BF","CF","CG","GA","GQ","ZM","MW","MZ","SZ","AO","BI","IL","LB","MG","PS","GM","TN","DZ","JO","AE","QA","KW","IQ","OM","VU","KH","TH","LA","MM","VN","KP","KR","MN","IN","BD","BT","NP","PK","AF","TJ","KG","TM","IR","SY","AM","SE","BY","UA","PL","AT","HU","MD","RO","LT","LV","EE","DE","BG","GR","TR","AL","HR","CH","LU","BE","NL","PT","ES","IE","NC","SB","NZ","AU","LK","CN","TW","IT","DK","GB","IS","AZ","GE","PH","MY","BN","SI","FI","SK","CZ","ER","JP","PY","YE","SA","AQ",null,"CY","MA","EG","LY","ET","DJ",null,"UG","RW","BA","MK","RS","ME","XK","TT","SS"],["Fiji","Tanzania","Western Sahara","Canada","United States","Kazakhstan","Uzbekistan","Papua New Guinea","Indonesia","Argentina","Chile","Democratic Republic of the Congo","Somalia","Kenya","Sudan","Chad","Haiti","Dominican Republic","Russian Federation","Bahamas","Falkland Islands","Norway","Greenland","French Southern and Antarctic Lands","Timor-Leste","South Africa","Lesotho","Mexico","Uruguay","Brazil","Bolivia","Peru","Colombia","Panama","Costa Rica","Nicaragua","Honduras","El Salvador","Guatemala","Belize","Venezuela","Guyana","Suriname","France","Ecuador","Puerto Rico","Jamaica","Cuba","Zimbabwe","Botswana","Namibia","Senegal","Mali","Mauritania","Benin","Niger","Nigeria","Cameroon","Togo","Ghana","Cote d'Ivoire","Guinea","Guinea-Bissau","Liberia","Sierra Leone","Burkina Faso","Central African Republic","Republic of the Congo","Gabon","Equatorial Guinea","Zambia","Malawi","Mozambique","eSwatini","Angola","Burundi","Israel","Lebanon","Madagascar","Palestine","The Gambia","Tunisia","Algeria","Jordan","United Arab Emirates","Qatar","Kuwait","Iraq","Oman","Vanuatu","Cambodia","Thailand","Lao PDR","Myanmar","Vietnam","Dem. Rep. Korea","Republic of Korea","Mongolia","India","Bangladesh","Bhutan","Nepal","Pakistan","Afghanistan","Tajikistan","Kyrgyzstan","Turkmenistan","Iran","Syria","Armenia","Sweden","Belarus","Ukraine","Poland","Austria","Hungary","Moldova","Romania","Lithuania","Latvia","Estonia","Germany","Bulgaria","Greece","Turkey","Albania","Croatia","Switzerland","Luxembourg","Belgium","Netherlands","Portugal","Spain","Ireland","New Caledonia","Solomon Islands","New Zealand","Australia","Sri Lanka","China","Taiwan","Italy","Denmark","United Kingdom","Iceland","Azerbaijan","Georgia","Philippines","Malaysia","Brunei Darussalam","Slovenia","Finland","Slovakia","Czech Republic","Eritrea","Japan","Paraguay","Yemen","Saudi Arabia","Antarctica","Northern Cyprus","Cyprus","Morocco","Egypt","Libya","Ethiopia","Djibouti","Somaliland","Uganda","Rwanda","Bosnia and Herzegovina","Macedonia","Serbia","Montenegro","Kosovo","Trinidad and Tobago","South Sudan"],["Oceania","Africa","Africa","North America","North America","Asia","Asia","Oceania","Asia","South America","South America","Africa","Africa","Africa","Africa","Africa","North America","North America","Europe","North America","South America","Europe","North America","Seven seas (open ocean)","Asia","Africa","Africa","North America","South America","South America","South America","South America","South America","North America","North America","North America","North America","North America","North America","North America","South America","South America","South America","Europe","South America","North America","North America","North America","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Asia","Asia","Africa","Asia","Africa","Africa","Africa","Asia","Asia","Asia","Asia","Asia","Asia","Oceania","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Asia","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Oceania","Oceania","Oceania","Oceania","Asia","Asia","Asia","Europe","Europe","Europe","Europe","Asia","Asia","Asia","Asia","Asia","Europe","Europe","Europe","Europe","Africa","Asia","South America","Asia","Asia","Antarctica","Asia","Asia","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Europe","Europe","Europe","Europe","Europe","North America","Africa"],["Oceania","Africa","Africa","Americas","Americas","Asia","Asia","Oceania","Asia","Americas","Americas","Africa","Africa","Africa","Africa","Africa","Americas","Americas","Europe","Americas","Americas","Europe","Americas","Seven seas (open ocean)","Asia","Africa","Africa","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Europe","Americas","Americas","Americas","Americas","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Asia","Asia","Africa","Asia","Africa","Africa","Africa","Asia","Asia","Asia","Asia","Asia","Asia","Oceania","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Asia","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Oceania","Oceania","Oceania","Oceania","Asia","Asia","Asia","Europe","Europe","Europe","Europe","Asia","Asia","Asia","Asia","Asia","Europe","Europe","Europe","Europe","Africa","Asia","Americas","Asia","Asia","Antarctica","Asia","Asia","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Europe","Europe","Europe","Europe","Europe","Americas","Africa"],["Melanesia","Eastern Africa","Northern Africa","Northern America","Northern America","Central Asia","Central Asia","Melanesia","South-Eastern Asia","South America","South America","Middle Africa","Eastern Africa","Eastern Africa","Northern Africa","Middle Africa","Caribbean","Caribbean","Eastern Europe","Caribbean","South America","Northern Europe","Northern America","Seven seas (open ocean)","South-Eastern Asia","Southern Africa","Southern Africa","Central America","South America","South America","South America","South America","South America","Central America","Central America","Central America","Central America","Central America","Central America","Central America","South America","South America","South America","Western Europe","South America","Caribbean","Caribbean","Caribbean","Eastern Africa","Southern Africa","Southern Africa","Western Africa","Western Africa","Western Africa","Western Africa","Western Africa","Western Africa","Middle Africa","Western Africa","Western Africa","Western Africa","Western Africa","Western Africa","Western Africa","Western Africa","Western Africa","Middle Africa","Middle Africa","Middle Africa","Middle Africa","Eastern Africa","Eastern Africa","Eastern Africa","Southern Africa","Middle Africa","Eastern Africa","Western Asia","Western Asia","Eastern Africa","Western Asia","Western Africa","Northern Africa","Northern Africa","Western Asia","Western Asia","Western Asia","Western Asia","Western Asia","Western Asia","Melanesia","South-Eastern Asia","South-Eastern Asia","South-Eastern Asia","South-Eastern Asia","South-Eastern Asia","Eastern Asia","Eastern Asia","Eastern Asia","Southern Asia","Southern Asia","Southern Asia","Southern Asia","Southern Asia","Southern Asia","Central Asia","Central Asia","Central Asia","Southern Asia","Western Asia","Western Asia","Northern Europe","Eastern Europe","Eastern Europe","Eastern Europe","Western Europe","Eastern Europe","Eastern Europe","Eastern Europe","Northern Europe","Northern Europe","Northern Europe","Western Europe","Eastern Europe","Southern Europe","Western Asia","Southern Europe","Southern Europe","Western Europe","Western Europe","Western Europe","Western Europe","Southern Europe","Southern Europe","Northern Europe","Melanesia","Melanesia","Australia and New Zealand","Australia and New Zealand","Southern Asia","Eastern Asia","Eastern Asia","Southern Europe","Northern Europe","Northern Europe","Northern Europe","Western Asia","Western Asia","South-Eastern Asia","South-Eastern Asia","South-Eastern Asia","Southern Europe","Northern Europe","Eastern Europe","Eastern Europe","Eastern Africa","Eastern Asia","South America","Western Asia","Western Asia","Antarctica","Western Asia","Western Asia","Northern Africa","Northern Africa","Northern Africa","Eastern Africa","Eastern Africa","Eastern Africa","Eastern Africa","Eastern Africa","Southern Europe","Southern Europe","Southern Europe","Southern Europe","Southern Europe","Caribbean","Eastern Africa"],["Sovereign country","Sovereign country","Indeterminate","Sovereign country","Country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Dependency","Sovereign country","Country","Dependency","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Country","Sovereign country","Dependency","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Country","Sovereign country","Sovereign country","Disputed","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Country","Sovereign country","Sovereign country","Sovereign country","Dependency","Sovereign country","Country","Country","Sovereign country","Country","Sovereign country","Sovereign country","Country","Country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Indeterminate","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Indeterminate","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country"],[19289.9707329765,932745.792357074,96270.60104084721,10036042.9767873,9510743.744824581,2729810.51298781,461410.258459096,464520.072464586,1819251.32898731,2784468.58938384,814844.2204878021,2323492.47746214,484332.792984678,590836.914195733,1850885.56479243,1271694.59820398,28540.5459842261,48157.8742821646,17018507.4094666,15584.7908248632,16363.7987423901,397994.628980977,2206644.43953262,11602.5718467462,14714.9313315426,1216400.83108031,27505.6549786909,1969480.30676826,176853.635919616,8508557.091825729,1085269.59559136,1309699.63635968,1151882.92596349,75265.4490305216,53832.1357021123,129540.211674483,113789.774793235,20893.3402330773,109459.048786204,22045.4508313613,908499.070492869,209801.857246846,144268.722604462,644847.882258842,250747.109536984,9224.663167074759,12460.5868709093,114866.218150043,376328.488742711,591912.017166329,824886.560992482,194390.438881923,1235561.37340316,1054107.1940836,116998.712578633,1182269.64800007,905071.739171952,460324.701614163,60966.9622339568,243473.120281533,329825.951440485,239565.079458458,36191.8856963154,98206.7829620829,75980.3314665435,271593.671943161,621860.349185054,339681.855452815,269475.797919465,27120.5747694609,751921.215016539,111197.018347598,810994.757216461,18118.6341282849,1245463.74769785,26238.9478592737,22991.165807789,10099.0030328829,589382.827011519,5037.10382587155,14031.2844514589,156237.321647096,2315916.65788588,89207.13690631661,79880.73828096691,11327.854664807,16652.1196912198,436965.03416826,309302.033595231,7490.040146716,182235.977782045,510125.56979289,229080.422295565,679573.994237083,335990.801728306,125679.216030188,99044.36683048939,1544322.15019105,3142892.09769282,133782.141414655,39377.4020057345,150706.871321559,874119.998315395,652270.070308025,138111.759254274,195874.658497004,480809.521855032,1617559.0402466,185004.125494595,28656.6007515336,450581.582203591,208969.829718131,572548.983743491,310402.33298673,85064.89515859541,92476.460365273,32320.3917738368,238356.297115474,63831.0914781956,63923.5330136017,44678.1968086173,357430.341206566,110216.875059118,131964.646663977,798849.164057534,29694.8002916761,57530.8517530272,46185.2506729716,2416.87048266498,30126.0378859233,40024.104481118,93408.59409916009,502306.467818081,58457.5134141208,23219.0117362846,24728.114237136,277627.604539654,7687613.84310903,65370.3895242611,9409830.493433909,34345.7011138443,315104.851197605,42759.9277031922,249986.395211549,107735.721363006,91113.2541543127,69048.16050446031,292256.939380041,338226.486563138,10700.3342457981,19118.1227179494,341242.33887092,47068.0820296185,81207.60292943619,119319.584873889,404619.932853689,401335.916394788,455915.007254186,1920324.14608918,12335956.0763551,3786.36450592132,6207.00619061686,591718.98943203,996311.623193406,1633720.7173726,1132393.1671779,21880.2505119017,167349.612740013,245768.479387209,23365.4111927782,50605.0748516557,25062.2552860575,76388.6050646267,13443.6780594717,11230.2616721538,7737.80985537389,624909.0990858451],[885806,52234869,null,35535348,318622525,17288285,30757700,7755785,255131116,42981515,17613798,73722860,13513125,46024250,37737913,13569438,10572466,10405844,143819666,382169,null,null,56295,null,1212814,54539571,2145785,124221600,3419546,204213133,10562159,30973354,47791911,3903986,4757575,6013997,8809216,6281189,15923559,351694,30738378,763393,547928,null,15903112,3534874,2862087,11439767,15411675,2168573,2370992,14546111,16962846,4063920,10286712,19148219,176460502,22239904,7228915,26962563,22531350,11805509,1725744,4390737,7079162,17585977,4515392,4871101,1875713,1129424,15620974,17068838,27212382,1295097,26920466,9891790,8215700,5603279,23589801,4294682,1917852,11143908,39113313,8809306,9070867,2374419,3782450,35006080,3960925,258850,15270790,68416772,6576397,51924182,92544915,25116363,50746659,2923896,1293859294,159405279,776448,28323241,185546257,32758020,8362745,5835500,5466241,78411092,19203090,2906220,9696110,9474511,45271947,38011735,8546356,9866468,3556397,19908979,2932367,1993782,1314545,80982500,7223938,10892413,77030628,2889104,4238389,8188649,556319,11209057,16865008,10401062,46480882,4657740,268050,575504,4509700,23504138,20771000,1364270000,null,60789140,5643475,64613160,327386,9535079,3727000,100102249,30228017,411704,2061980,5461512,5418649,10525347,null,127276000,6552584,26246327,30776722,null,null,1152309,34318082,91812566,6204108,97366774,912164,null,38833338,11345357,3566002,2077495,7130576,621810,1821800,1354493,11530971],[69.95999999999999,64.163,null,81.9530487804878,78.84146341463411,71.62,71.039,65.23,68.85599999999999,76.252,79.117,58.782,55.467,66.242,64.002,52.204,62.757,73.483,70.7436585365854,75.379,null,null,null,null,68.285,60.993,53.268,76.753,77.19,75.042,68.357,74.518,74.02200000000001,77.61,79.44,74.884,73.181,73.015,72.869,70.027,74.196,66.425,71.13800000000001,null,75.879,79.3901219512195,75.68899999999999,79.41500000000001,59.36,64.78,62.981,66.376,57.007,62.907,60.373,59.228,52.549,57.111,59.601,62.154,52.52,58.846,56.598,61.527,50.951,59.457,50.621,63.536,65.211,57.18,60.775,61.932,57.099,56.287,60.858,56.688,82.1536585365854,79.23099999999999,65.133,73.126,60.707,75.33499999999999,75.64100000000001,74.03400000000001,76.94799999999999,77.88800000000001,74.458,69.458,76.578,71.709,68.251,74.895,65.97499999999999,66.285,75.855,71.179,81.72195121951221,68.84699999999999,68.021,71.803,69.43000000000001,69.511,66.139,62.895,70.69,70.4024390243902,67.55200000000001,75.46599999999999,69.81699999999999,74.255,82.25365853658541,72.9707317073171,71.1865853658537,77.60243902439031,81.490243902439,75.7634146341463,71.258,74.9609756097561,74.51707317073171,74.1243902439024,77.0341463414634,81.090243902439,74.4658536585366,81.3853658536585,75.239,77.96299999999999,77.4780487804878,83.1975609756098,82.2292682926829,81.2878048780488,81.7073170731707,81.1219512195122,83.2292682926829,81.3487804878049,77.25287259572259,70.113,81.4048780487805,82.3,74.90600000000001,75.932,null,83.090243902439,80.7,81.30487804878049,82.8609756097561,71.8,72.95099999999999,68.813,74.976,76.917,81.0780487804878,81.1804878048781,76.81219512195121,78.8243902439024,64.17400000000001,83.5878048780488,72.913,64.523,74.23399999999999,null,null,80.173,75.309,71.12,71.65900000000001,64.535,62.006,null,59.224,66.188,76.56100000000001,75.384,75.33658536585369,76.712,71.0975609756098,70.426,55.817],[8222.25378436842,2402.09940362843,null,43079.1425247165,51921.9846391384,23587.3375151466,5370.86580208835,3709.08164370316,10003.0890293448,18797.5479465897,22195.2743713617,785.347340663008,null,2753.23613475312,4188.33481399507,2076.65000798778,1652.85480345734,12663.0422473566,25284.5862019855,28456.8165292476,null,null,null,null,6262.90551556596,12389.7146679241,2677.19807805197,16622.5970457658,19827.5649886027,15374.2615071807,6324.82725807651,11547.8342162709,12715.9673914398,20017.9943624961,14372.4007814474,4784.83046366078,4231.32506716223,6890.72322429183,7147.42922806486,7999.57369198528,16745.0219796981,6906.01230864481,15306.6924367639,null,10901.4185562194,35066.0463763697,8051.24402830602,null,1925.138698418,15914.6702328332,9617.3969565111,2218.55191733521,1865.16062183071,3655.38850923143,2001.0772890116,904.456729989966,5671.9006010195,3196.36152634263,1315.3402595533,3868.60089371873,3054.53487386428,1734.73674695657,1398.25480632738,804.719886747093,1692.14206707555,1582.33369667322,597.135168986395,5538.05294137178,16678.6381326502,31542.5107726021,3632.50375331402,1090.3672076732,1079.82386564737,7870.97074814257,6257.15287433489,803.172837396172,31702.0835366295,13831.3752293893,1372.02096124513,4319.52828287882,1550.21843235512,10767.0276518537,13483.3378622219,8622.18546801292,63943.1858285789,120860.06755829,70832.36836452071,14838.3829483763,40365.2732623193,2892.34160435097,3124.31929344274,14857.202932021,5436.48264275006,4770.01209867368,5264.82809971072,null,33425.6895931418,11348.6473412397,5385.14181406703,2973.0415646346,7366.42412644897,2266.18429824848,4576.2270153496,1838.96024371997,2546.50048351137,3181.64216292265,14332.3657698371,16924.2006778247,null,7971.11792762162,44167.6318669891,17944.2098463253,8243.47351509088,24347.0736576846,44320.5020125474,24161.4255236519,4762.7808726743,19677.5202527307,26258.2100974103,22172.2535081352,27113.6859213723,43560.6192440775,16302.3205614307,24081.6305378246,22401.8804311394,10701.1207857986,20334.4464738451,57218.0279263612,93655.33416306481,41360.3955755286,45668.4414721322,26023.6978492184,31195.4052422035,48898.3286615603,null,2139.56074060145,34455.3312172237,43547.1974836868,10650.3901782483,12758.647789259,null,33945.8438783585,45057.0741699595,38251.7924802929,41701.1372653816,16715.1055213058,8749.156189273521,6585.89594870884,24194.6339084542,76089.2865740815,28417.656441512,39017.5372069548,27285.284673711,29119.6166119074,null,37337.3174057788,8501.54353959203,3766.80525494897,49958.4433361471,null,null,29786.3656529772,7078.88148932392,9879.79935855302,16371.9021546442,1424.52698442707,null,null,1637.27508138464,1629.86886584829,10516.7864355965,12298.4901835571,13112.9089581967,14796.6353955591,8698.291558898831,31181.8211959284,1935.87940008879]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>iso_a2<\/th>\n      <th>name_long<\/th>\n      <th>continent<\/th>\n      <th>region_un<\/th>\n      <th>subregion<\/th>\n      <th>type<\/th>\n      <th>area_km2<\/th>\n      <th>pop<\/th>\n      <th>lifeExp<\/th>\n      <th>gdpPercap<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"headerCallback":"function(thead) {\n  $(thead).css('font-size', '0.7em');\n}","columnDefs":[{"targets":7,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":9,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":10,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"className":"dt-right","targets":[7,8,9,10]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'font-size':'12px'});\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'font-size':'12px'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'font-size':'12px'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'font-size':'12px'});\nvar value=data[5]; $(this.api().cell(row, 5).node()).css({'font-size':'12px'});\nvar value=data[6]; $(this.api().cell(row, 6).node()).css({'font-size':'12px'});\nvar value=data[7]; $(this.api().cell(row, 7).node()).css({'font-size':'12px'});\nvar value=data[8]; $(this.api().cell(row, 8).node()).css({'font-size':'12px'});\nvar value=data[9]; $(this.api().cell(row, 9).node()).css({'font-size':'12px'});\nvar value=data[10]; $(this.api().cell(row, 10).node()).css({'font-size':'12px'});\n}"}},"evals":["options.headerCallback","options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.rowCallback"],"jsHooks":[]}</script>
<p>此外，<code>read.csv()</code>函式有諸多引數可供設定，以下簡要說明各引數的功能及設定方式：</p>
<ul>
<li><code>header=</code>設定是否有表頭，若有應設定為<code>T</code>，否則預設為<code>F</code>。<br />
</li>
<li><code>sep=</code>設定分隔符號，例如常見的 .csv 檔即為「逗號」分隔。此引數預設為「,」，若非逗點分隔，需設定此引數，如「\t」為「tab」分隔。<br />
</li>
<li><code>colClasses=</code>設定各欄位的資料型態，如已知 A 欄位為數值型態；B 欄位為文字型態，則應設定：<code>c("A"="numeric", "B"="character")</code>。<br />
</li>
<li><code>nrows=</code>設定擷取的橫列數。<br />
</li>
<li><code>skip=</code>設定跳過前幾筆資料。<br />
</li>
<li><code>fileEncoding=</code>設定文字編碼，一般而言英文的編碼無須另外設定，然若是中文字則通常為「Big5」或「UTF-8」。</li>
</ul>
<p>除了<code>read.csv()</code>函式可讀取資料外，亦可使用<code>read.table()</code>函式讀取，功能與引數完全相同。此外，<code>data.table</code>套件中的<code>fread()</code>亦可讀取資料，其所使用引數與<code>read.csv()</code>大致相同，亦可讀取本機及網路上的文字資料，惟讀取速度非常快，適合大數據資料的讀取。</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="r-語言基礎語法.html#cb319-1" tabindex="-1"></a><span class="fu">fread</span>(<span class="st">&quot;路徑&quot;</span>)  <span class="co"># 本機資料</span></span>
<span id="cb319-2"><a href="r-語言基礎語法.html#cb319-2" tabindex="-1"></a><span class="fu">fread</span>(<span class="st">&quot;url&quot;</span>)   <span class="co"># 網路資料</span></span>
<span id="cb319-3"><a href="r-語言基礎語法.html#cb319-3" tabindex="-1"></a></span>
<span id="cb319-4"><a href="r-語言基礎語法.html#cb319-4" tabindex="-1"></a><span class="co"># 範例</span></span>
<span id="cb319-5"><a href="r-語言基礎語法.html#cb319-5" tabindex="-1"></a>world<span class="ot">=</span><span class="fu">fread</span>(<span class="st">&quot;https://raw.githubusercontent.com/ChiaJung-Yeh/R-Code-Sharing/main/R_Preliminary/world.csv&quot;</span>)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 匯出資料</strong>
</p>
<p>匯出資料可以使用<code>write.csv()</code>函式，程式撰寫如下：</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="r-語言基礎語法.html#cb320-1" tabindex="-1"></a><span class="fu">write.csv</span>(資料, <span class="st">&quot;路徑&quot;</span>)</span>
<span id="cb320-2"><a href="r-語言基礎語法.html#cb320-2" tabindex="-1"></a></span>
<span id="cb320-3"><a href="r-語言基礎語法.html#cb320-3" tabindex="-1"></a><span class="co"># 範例</span></span>
<span id="cb320-4"><a href="r-語言基礎語法.html#cb320-4" tabindex="-1"></a><span class="fu">write.csv</span>(world, <span class="st">&quot;./world.csv&quot;</span>)</span></code></pre></div>
<p>在<code>write.csv()</code>函式中，主要的引數如下：</p>
<ul>
<li><code>row.names=</code>設定是否回傳橫列名稱，預設為<code>T</code>，若不希望匯出列名稱，則須設定為<code>F</code>。</li>
<li><code>sep=</code>設定分隔符號。<br />
</li>
<li><code>fileEncoding=</code>設定文字編碼，一般而言英文的編碼無須另外設定，然若是中文字則通常為「Big5」或「UTF-8」。</li>
</ul>
<p>同樣地，<code>write.csv()</code>函式在匯出資料的效率並不高，可以使用<code>data.table</code>套件中的<code>fwrite()</code>函式，以減少程式執行的時間，在大數據資料之處理上尤為實用。</p>
</div>
<div id="json-檔" class="section level3 hasAnchor" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> JSON 檔<a href="r-語言基礎語法.html#json-檔" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>JSON (JavaScript Object Notation) 檔案是一種輕量的資料交換格式，其結構化資料有利於分析與傳輸，且易於閱讀與解析，故許多程式語言皆可直接讀取此類型檔案，也常作為應用程式介面（Application Programming Interface, API）傳輸資料之方式。JSON 格式範例如下：</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="r-語言基礎語法.html#cb321-1" tabindex="-1"></a>[</span>
<span id="cb321-2"><a href="r-語言基礎語法.html#cb321-2" tabindex="-1"></a>  {</span>
<span id="cb321-3"><a href="r-語言基礎語法.html#cb321-3" tabindex="-1"></a>    <span class="st">&quot;StudentID&quot;</span><span class="sc">:</span> <span class="st">&quot;ID1&quot;</span>,</span>
<span id="cb321-4"><a href="r-語言基礎語法.html#cb321-4" tabindex="-1"></a>    <span class="st">&quot;Name&quot;</span><span class="sc">:</span> <span class="st">&quot;Bob&quot;</span>,</span>
<span id="cb321-5"><a href="r-語言基礎語法.html#cb321-5" tabindex="-1"></a>    <span class="st">&quot;Score&quot;</span><span class="sc">:</span> <span class="dv">60</span></span>
<span id="cb321-6"><a href="r-語言基礎語法.html#cb321-6" tabindex="-1"></a>  },</span>
<span id="cb321-7"><a href="r-語言基礎語法.html#cb321-7" tabindex="-1"></a>  {</span>
<span id="cb321-8"><a href="r-語言基礎語法.html#cb321-8" tabindex="-1"></a>    <span class="st">&quot;StudentID&quot;</span><span class="sc">:</span> <span class="st">&quot;ID2&quot;</span>,</span>
<span id="cb321-9"><a href="r-語言基礎語法.html#cb321-9" tabindex="-1"></a>    <span class="st">&quot;Name&quot;</span><span class="sc">:</span> <span class="st">&quot;Mary&quot;</span>,</span>
<span id="cb321-10"><a href="r-語言基礎語法.html#cb321-10" tabindex="-1"></a>    <span class="st">&quot;Score&quot;</span><span class="sc">:</span> <span class="dv">80</span></span>
<span id="cb321-11"><a href="r-語言基礎語法.html#cb321-11" tabindex="-1"></a>    ]</span>
<span id="cb321-12"><a href="r-語言基礎語法.html#cb321-12" tabindex="-1"></a>  },</span>
<span id="cb321-13"><a href="r-語言基礎語法.html#cb321-13" tabindex="-1"></a>  {</span>
<span id="cb321-14"><a href="r-語言基礎語法.html#cb321-14" tabindex="-1"></a>    <span class="st">&quot;StudentID&quot;</span><span class="sc">:</span> <span class="st">&quot;ID3&quot;</span>,</span>
<span id="cb321-15"><a href="r-語言基礎語法.html#cb321-15" tabindex="-1"></a>    <span class="st">&quot;Name&quot;</span><span class="sc">:</span> <span class="st">&quot;Robert&quot;</span>,</span>
<span id="cb321-16"><a href="r-語言基礎語法.html#cb321-16" tabindex="-1"></a>    <span class="st">&quot;Score&quot;</span><span class="sc">:</span> <span class="dv">40</span></span>
<span id="cb321-17"><a href="r-語言基礎語法.html#cb321-17" tabindex="-1"></a>    ]</span>
<span id="cb321-18"><a href="r-語言基礎語法.html#cb321-18" tabindex="-1"></a>  }</span>
<span id="cb321-19"><a href="r-語言基礎語法.html#cb321-19" tabindex="-1"></a>]</span></code></pre></div>
<p>在 R 語言中若欲讀取、解析 JSON 檔案，可利用<code>jsonlite</code>套件中的函式。</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="r-語言基礎語法.html#cb322-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;jsonlite&quot;</span>)</span>
<span id="cb322-2"><a href="r-語言基礎語法.html#cb322-2" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 讀取資料</strong>
</p>
<p>利用<code>jsonlite</code>套件中的<code>fromJSON()</code>函式讀取資料，函式撰寫如下。</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="r-語言基礎語法.html#cb323-1" tabindex="-1"></a><span class="fu">fromJSON</span>(資料)</span></code></pre></div>
<p>函式中的<code>資料</code>可為本機資料，亦可為網址 url。以下以<a href="https://segis.moi.gov.tw/STAT/Web/Portal/STAT_PortalHome.aspx">社會經濟資料服務平臺</a>所提供的<a href="https://segisws.moi.gov.tw/STATWSSTData/OpenService.asmx/GetAdminSTDataForOpenCode?oCode=88641597DE2A496B3B5AF84EB798086251A1FBEE829C41DBF0767011744D917A2539094FCB65D41BDDE79C332EB9258D">縣市行政人口統計</a>為例，透過所提供的網址讀取 XML 資料。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="r-語言基礎語法.html#cb324-1" tabindex="-1"></a>population<span class="ot">=</span><span class="fu">fromJSON</span>(<span class="st">&quot;https://segisws.moi.gov.tw/STATWSSTData/OpenService.asmx/GetAdminSTDataForOpenCode?oCode=88641597DE2A496B3B5AF84EB798086251A1FBEE829C41DBF0767011744D917A2539094FCB65D41BDDE79C332EB9258D&quot;</span>)</span>
<span id="cb324-2"><a href="r-語言基礎語法.html#cb324-2" tabindex="-1"></a></span>
<span id="cb324-3"><a href="r-語言基礎語法.html#cb324-3" tabindex="-1"></a><span class="co"># 檢查讀取資料的格式</span></span>
<span id="cb324-4"><a href="r-語言基礎語法.html#cb324-4" tabindex="-1"></a><span class="fu">class</span>(population)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="r-語言基礎語法.html#cb326-1" tabindex="-1"></a><span class="co"># 查看資料含有內容</span></span>
<span id="cb326-2"><a href="r-語言基礎語法.html#cb326-2" tabindex="-1"></a><span class="fu">names</span>(population)</span></code></pre></div>
<pre><code>## [1] &quot;Info&quot;        &quot;ColumnList&quot;  &quot;RowDataList&quot;</code></pre>
<p>由上述資料格式可發現，所讀取的 JSON 檔案經過此一函式讀取後，會變為 R 語言中的陣列（list）格式，依此可進一步解析陣列內容，以擷取需要的資訊。以本範例而言，所需內容儲存於 RowDataList 的陣列中：</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="r-語言基礎語法.html#cb328-1" tabindex="-1"></a>population<span class="ot">=</span>population<span class="sc">$</span>RowDataList</span>
<span id="cb328-2"><a href="r-語言基礎語法.html#cb328-2" tabindex="-1"></a></span>
<span id="cb328-3"><a href="r-語言基礎語法.html#cb328-3" tabindex="-1"></a><span class="co"># 查看前六筆資料</span></span>
<span id="cb328-4"><a href="r-語言基礎語法.html#cb328-4" tabindex="-1"></a><span class="fu">head</span>(population)</span></code></pre></div>
<pre><code>##   INFO_TIME COUNTY_ID COUNTY   H_CNT   P_CNT   M_CNT   F_CNT
## 1   111Y12M     65000 新北市 1638908 3995551 1946890 2048661
## 2   111Y12M     63000 臺北市 1050981 2480681 1177022 1303659
## 3   111Y12M     68000 桃園市  878466 2281464 1126870 1154594
## 4   111Y12M     66000 臺中市 1033821 2814459 1378315 1436144
## 5   111Y12M     67000 臺南市  716543 1852997  921168  931829
## 6   111Y12M     64000 高雄市 1136785 2728137 1341492 1386645</code></pre>
</div>
<div id="xml-檔案" class="section level3 hasAnchor" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> XML 檔案<a href="r-語言基礎語法.html#xml-檔案" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>可擴展標記語言（eXtensible Markup Language, XML）是一種類似 HTML 的標記語言，其結構化的設計可有條理地儲存各項複雜的資訊，並方便傳送與接收資料。與 JSON 格式雷同，XML 亦可作為 API 傳輸之格式。XML 檔案中包含標籤（Tag）、元素（Element）與屬性（Attribute），其中標籤適用以標示結構的名稱，元素是指標籤內部的實際內容，屬性則是提供元素額外的訊息。XML 格式範例如下：</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="r-語言基礎語法.html#cb330-1" tabindex="-1"></a><span class="sc">&lt;</span>?xml version<span class="ot">=</span><span class="st">&quot;1.0&quot;</span> encoding<span class="ot">=</span><span class="st">&quot;UTF-8&quot;</span>?<span class="sc">&gt;</span></span>
<span id="cb330-2"><a href="r-語言基礎語法.html#cb330-2" tabindex="-1"></a><span class="sc">-</span> <span class="er">&lt;</span>StuScore<span class="sc">&gt;</span></span>
<span id="cb330-3"><a href="r-語言基礎語法.html#cb330-3" tabindex="-1"></a>  <span class="sc">-</span> <span class="er">&lt;</span>student id<span class="ot">=</span><span class="st">&quot;ID1&quot;</span><span class="sc">&gt;</span></span>
<span id="cb330-4"><a href="r-語言基礎語法.html#cb330-4" tabindex="-1"></a>      <span class="er">&lt;</span>Name<span class="sc">&gt;</span>Bob<span class="sc">&lt;</span><span class="er">/</span>Name<span class="sc">&gt;</span></span>
<span id="cb330-5"><a href="r-語言基礎語法.html#cb330-5" tabindex="-1"></a>      <span class="er">&lt;</span>Score<span class="sc">&gt;</span><span class="dv">60</span><span class="sc">&lt;</span><span class="er">/</span>Score<span class="sc">&gt;</span></span>
<span id="cb330-6"><a href="r-語言基礎語法.html#cb330-6" tabindex="-1"></a>  <span class="er">&lt;/</span>student<span class="sc">&gt;</span></span>
<span id="cb330-7"><a href="r-語言基礎語法.html#cb330-7" tabindex="-1"></a>  <span class="sc">-</span> <span class="er">&lt;</span>student id<span class="ot">=</span><span class="st">&quot;ID2&quot;</span><span class="sc">&gt;</span></span>
<span id="cb330-8"><a href="r-語言基礎語法.html#cb330-8" tabindex="-1"></a>      <span class="er">&lt;</span>Name<span class="sc">&gt;</span>Mary<span class="sc">&lt;</span><span class="er">/</span>Name<span class="sc">&gt;</span></span>
<span id="cb330-9"><a href="r-語言基礎語法.html#cb330-9" tabindex="-1"></a>      <span class="er">&lt;</span>Score<span class="sc">&gt;</span><span class="dv">80</span><span class="sc">&lt;</span><span class="er">/</span>Score<span class="sc">&gt;</span></span>
<span id="cb330-10"><a href="r-語言基礎語法.html#cb330-10" tabindex="-1"></a>  <span class="er">&lt;/</span>student<span class="sc">&gt;</span></span>
<span id="cb330-11"><a href="r-語言基礎語法.html#cb330-11" tabindex="-1"></a>  <span class="sc">-</span> <span class="er">&lt;</span>student id<span class="ot">=</span><span class="st">&quot;ID3&quot;</span><span class="sc">&gt;</span></span>
<span id="cb330-12"><a href="r-語言基礎語法.html#cb330-12" tabindex="-1"></a>      <span class="er">&lt;</span>Name<span class="sc">&gt;</span>Robert<span class="sc">&lt;</span><span class="er">/</span>Name<span class="sc">&gt;</span></span>
<span id="cb330-13"><a href="r-語言基礎語法.html#cb330-13" tabindex="-1"></a>      <span class="er">&lt;</span>Score<span class="sc">&gt;</span><span class="dv">40</span><span class="sc">&lt;</span><span class="er">/</span>Score<span class="sc">&gt;</span></span>
<span id="cb330-14"><a href="r-語言基礎語法.html#cb330-14" tabindex="-1"></a>  <span class="er">&lt;/</span>student<span class="sc">&gt;</span></span>
<span id="cb330-15"><a href="r-語言基礎語法.html#cb330-15" tabindex="-1"></a><span class="er">&lt;/</span>StuScore<span class="sc">&gt;</span></span></code></pre></div>
<p>在 R 語言中若欲讀取、解析 XML 檔案，可利用<code>xml2</code>套件中的函式。</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="r-語言基礎語法.html#cb331-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;xml2&quot;</span>)</span>
<span id="cb331-2"><a href="r-語言基礎語法.html#cb331-2" tabindex="-1"></a><span class="fu">library</span>(xml2)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 讀取資料</strong>
</p>
<p>再次以<a href="https://segis.moi.gov.tw/STAT/Web/Portal/STAT_PortalHome.aspx">社會經濟資料服務平臺</a>所提供的<a href="https://segisws.moi.gov.tw/STATWSSTData/OpenService.asmx/GetAdminSTDataForOpenCode?oCode=88641597DE2A496B3B5AF84EB798086251A1FBEE829C41DBF0767011744D917A965B611E6BA96C61">縣市行政人口統計</a>為例，透過所提供的網址讀取 XML 資料。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="r-語言基礎語法.html#cb332-1" tabindex="-1"></a>population<span class="ot">=</span><span class="fu">read_xml</span>(<span class="st">&quot;https://segisws.moi.gov.tw/STATWSSTData/OpenService.asmx/GetAdminSTDataForOpenCode?oCode=88641597DE2A496B3B5AF84EB798086251A1FBEE829C41DBF0767011744D917A965B611E6BA96C61&quot;</span>)</span>
<span id="cb332-2"><a href="r-語言基礎語法.html#cb332-2" tabindex="-1"></a></span>
<span id="cb332-3"><a href="r-語言基礎語法.html#cb332-3" tabindex="-1"></a><span class="co"># 檢查讀取資料的格式</span></span>
<span id="cb332-4"><a href="r-語言基礎語法.html#cb332-4" tabindex="-1"></a><span class="fu">class</span>(population)</span></code></pre></div>
<pre><code>## [1] &quot;xml_document&quot; &quot;xml_node&quot;</code></pre>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="r-語言基礎語法.html#cb334-1" tabindex="-1"></a><span class="co"># 查看資料</span></span>
<span id="cb334-2"><a href="r-語言基礎語法.html#cb334-2" tabindex="-1"></a>population</span></code></pre></div>
<pre><code>## {xml_document}
## &lt;Result&gt;
## [1] &lt;Info&gt;\n  &lt;InMetaDatCode&gt;3A1FA_A1C1&lt;/InMetaDatCode&gt;\n  &lt;InSTUnitCode&gt;U01C ...
## [2] &lt;ColumnList&gt;\n  &lt;Column&gt;\n    &lt;COLUMN_NAME&gt;INFO_TIME&lt;/COLUMN_NAME&gt;\n    &lt; ...
## [3] &lt;RowDataList&gt;\n  &lt;RowData&gt;\n    &lt;INFO_TIME&gt;111Y12M&lt;/INFO_TIME&gt;\n    &lt;COUN ...</code></pre>
<p>讀取完成後，<code>population</code>的資料格式為「xml_document」與「xml_node」，而資料回傳結果為具有標籤、元素等資訊的複雜結構。接著我們必須拆解 XML 格式的結構，以萃取出需要的資訊。在<code>xml2</code>套件中可利用<code>xml_find_all()</code>回傳指定節點內容，該函式內須設定引數<code>xpath=</code>以指定路徑。由以上的結果我們可以發現，標籤包含 INFO_TIME、COUNTY_ID、COUNTY、H_CNT 等（建議可以將網址貼至瀏覽器開啟觀察，更能瞭解內部結構），該標籤即為路徑。以標籤 COUNTY 為例，程式撰寫如下。</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="r-語言基礎語法.html#cb336-1" tabindex="-1"></a><span class="fu">xml_find_all</span>(population, <span class="st">&quot;//COUNTY&quot;</span>)</span></code></pre></div>
<pre><code>## {xml_nodeset (22)}
##  [1] &lt;COUNTY&gt;新北市&lt;/COUNTY&gt;
##  [2] &lt;COUNTY&gt;臺北市&lt;/COUNTY&gt;
##  [3] &lt;COUNTY&gt;桃園市&lt;/COUNTY&gt;
##  [4] &lt;COUNTY&gt;臺中市&lt;/COUNTY&gt;
##  [5] &lt;COUNTY&gt;臺南市&lt;/COUNTY&gt;
##  [6] &lt;COUNTY&gt;高雄市&lt;/COUNTY&gt;
##  [7] &lt;COUNTY&gt;宜蘭縣&lt;/COUNTY&gt;
##  [8] &lt;COUNTY&gt;新竹縣&lt;/COUNTY&gt;
##  [9] &lt;COUNTY&gt;苗栗縣&lt;/COUNTY&gt;
## [10] &lt;COUNTY&gt;彰化縣&lt;/COUNTY&gt;
## [11] &lt;COUNTY&gt;南投縣&lt;/COUNTY&gt;
## [12] &lt;COUNTY&gt;雲林縣&lt;/COUNTY&gt;
## [13] &lt;COUNTY&gt;嘉義縣&lt;/COUNTY&gt;
## [14] &lt;COUNTY&gt;屏東縣&lt;/COUNTY&gt;
## [15] &lt;COUNTY&gt;臺東縣&lt;/COUNTY&gt;
## [16] &lt;COUNTY&gt;花蓮縣&lt;/COUNTY&gt;
## [17] &lt;COUNTY&gt;澎湖縣&lt;/COUNTY&gt;
## [18] &lt;COUNTY&gt;基隆市&lt;/COUNTY&gt;
## [19] &lt;COUNTY&gt;新竹市&lt;/COUNTY&gt;
## [20] &lt;COUNTY&gt;嘉義市&lt;/COUNTY&gt;
## ...</code></pre>
<p>由以上結果可知道 COUNTY 標籤所有的元素，而若希望萃取出元素的文字，需進一步利用<code>xml_text()</code>函式達成之。程式撰寫如下。</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="r-語言基礎語法.html#cb338-1" tabindex="-1"></a><span class="fu">xml_text</span>(<span class="fu">xml_find_all</span>(population, <span class="st">&quot;//COUNTY&quot;</span>))</span></code></pre></div>
<pre><code>##  [1] &quot;新北市&quot; &quot;臺北市&quot; &quot;桃園市&quot; &quot;臺中市&quot; &quot;臺南市&quot; &quot;高雄市&quot; &quot;宜蘭縣&quot; &quot;新竹縣&quot;
##  [9] &quot;苗栗縣&quot; &quot;彰化縣&quot; &quot;南投縣&quot; &quot;雲林縣&quot; &quot;嘉義縣&quot; &quot;屏東縣&quot; &quot;臺東縣&quot; &quot;花蓮縣&quot;
## [17] &quot;澎湖縣&quot; &quot;基隆市&quot; &quot;新竹市&quot; &quot;嘉義市&quot; &quot;金門縣&quot; &quot;連江縣&quot;</code></pre>
<p>執行<code>xml_text()</code>函式後，所得結果即為一文字向量。</p>
<p>綜觀上述，若欲擷取完整的資料，並儲存取資料框中，可撰寫程式碼如下。</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="r-語言基礎語法.html#cb340-1" tabindex="-1"></a>population<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">INFO_TIME=</span><span class="fu">xml_text</span>(<span class="fu">xml_find_all</span>(population, <span class="st">&quot;//INFO_TIME&quot;</span>)),</span>
<span id="cb340-2"><a href="r-語言基礎語法.html#cb340-2" tabindex="-1"></a>                      <span class="at">COUNTY_ID=</span><span class="fu">xml_text</span>(<span class="fu">xml_find_all</span>(population, <span class="st">&quot;//COUNTY_ID&quot;</span>)),</span>
<span id="cb340-3"><a href="r-語言基礎語法.html#cb340-3" tabindex="-1"></a>                      <span class="at">COUNTY=</span><span class="fu">xml_text</span>(<span class="fu">xml_find_all</span>(population, <span class="st">&quot;//COUNTY&quot;</span>)),</span>
<span id="cb340-4"><a href="r-語言基礎語法.html#cb340-4" tabindex="-1"></a>                      <span class="at">H_CNT=</span><span class="fu">xml_text</span>(<span class="fu">xml_find_all</span>(population, <span class="st">&quot;//H_CNT&quot;</span>)),</span>
<span id="cb340-5"><a href="r-語言基礎語法.html#cb340-5" tabindex="-1"></a>                      <span class="at">P_CNT=</span><span class="fu">xml_text</span>(<span class="fu">xml_find_all</span>(population, <span class="st">&quot;//P_CNT&quot;</span>)),</span>
<span id="cb340-6"><a href="r-語言基礎語法.html#cb340-6" tabindex="-1"></a>                      <span class="at">M_CNT=</span><span class="fu">xml_text</span>(<span class="fu">xml_find_all</span>(population, <span class="st">&quot;//M_CNT&quot;</span>)),</span>
<span id="cb340-7"><a href="r-語言基礎語法.html#cb340-7" tabindex="-1"></a>                      <span class="at">F_CNT=</span><span class="fu">xml_text</span>(<span class="fu">xml_find_all</span>(population, <span class="st">&quot;//F_CNT&quot;</span>)))</span>
<span id="cb340-8"><a href="r-語言基礎語法.html#cb340-8" tabindex="-1"></a></span>
<span id="cb340-9"><a href="r-語言基礎語法.html#cb340-9" tabindex="-1"></a><span class="co"># 查看前六筆資料</span></span>
<span id="cb340-10"><a href="r-語言基礎語法.html#cb340-10" tabindex="-1"></a><span class="fu">head</span>(population)</span></code></pre></div>
<pre><code>##   INFO_TIME COUNTY_ID COUNTY   H_CNT   P_CNT   M_CNT   F_CNT
## 1   111Y12M     65000 新北市 1638908 3995551 1946890 2048661
## 2   111Y12M     63000 臺北市 1050981 2480681 1177022 1303659
## 3   111Y12M     68000 桃園市  878466 2281464 1126870 1154594
## 4   111Y12M     66000 臺中市 1033821 2814459 1378315 1436144
## 5   111Y12M     67000 臺南市  716543 1852997  921168  931829
## 6   111Y12M     64000 高雄市 1136785 2728137 1341492 1386645</code></pre>
<p>經過本案例可發現，解析（parse）XML 檔案必須先透徹瞭解其標籤，否則難以轉換為一般常見的資料框格式。相較於 XML 而言，JSON 檔案更為簡便，在 R 語言中的執行速度亦較快。</p>
</div>
<div id="資料來源" class="section level3 hasAnchor" number="1.4.4">
<h3><span class="header-section-number">1.4.4</span> 資料來源<a href="r-語言基礎語法.html#資料來源" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 本機資料讀取</strong>
</p>
<p>本機資料可透過指定路徑與檔案讀取，然而若有眾多檔案需要讀取，不大可能把所有路徑一一寫出，此時我們會先利用<code>dir()</code>函式尋找指定資料夾內的所有檔案。程式碼撰寫如下：</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="r-語言基礎語法.html#cb342-1" tabindex="-1"></a><span class="fu">dir</span>(<span class="st">&quot;資料夾路徑&quot;</span>, <span class="at">pattern=</span>, <span class="at">full.names=</span>, <span class="at">recursive=</span>)</span></code></pre></div>
<p>引數設定說明如下：</p>
<ul>
<li><code>pattern=</code>設定符合字串規則的檔案名稱，其概念類似<a href="r-語言基礎語法.html#搜尋字元"><code>grepl()</code></a>函式中的<a href="r-語言基礎語法.html#正規表示式">正規表示式</a>。</li>
<li><code>full.names=</code>設定是否回傳完整的路徑與檔案名稱（<code>T</code>），否則僅回傳檔案名稱（<code>F</code>）</li>
<li><code>recursive=</code>設定是否往下探索資料夾內的資料夾（<code>T</code>），否則僅探索所設定的路徑資料夾（<code>F</code>）</li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 線上資料介接</strong>
</p>
<p>臺灣有許多免費公開資料平臺，提供相當豐富的資料集，所提供的資料格式不外乎是 CSV、TXT、XML、JSON 等格式，可利用本節說明範例中雷同的方法接取並解析資料。常見平臺羅列如下：</p>
<ul>
<li><a href="https://data.gov.tw/">政府資料放平臺</a></li>
<li><a href="https://segis.moi.gov.tw/STAT/Web/Portal/STAT_PortalHome.aspx">社會經濟資料服務平臺</a></li>
<li><a href="https://data.taipei/">臺北市資料大平臺</a></li>
<li><a href="http://data.moi.gov.tw/">內政資料開放平臺</a></li>
<li><a href="https://tisvcloud.freeway.gov.tw/">高公局交通資料庫</a></li>
<li><a href="https://data.gcis.nat.gov.tw/main/index">商工行政資料開放平臺</a></li>
<li><a href="https://ci.taiwan.gov.tw/dsp/">民生公共物聯網-資料服務平臺</a></li>
<li><a href="https://data.cdc.gov.tw/">疾病管制署資料開放平臺</a></li>
</ul>
<p>另請注意，<a href="https://tdx.transportdata.tw/">運輸資料流通服務平臺</a>亦提供 JSON、XML 等資料介接的 API 格式，然而由於其介接過程需要權杖（access token），無法直接如以上平臺逕利用網址即可連結資料，須利用<code>httr</code>套件處理權杖，故程序較為複雜。</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="資料清洗與處理.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": "https://github.com/ChiaJung-Yeh/Transport-Analysis/tree/master/01-Basic-R.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["series.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
