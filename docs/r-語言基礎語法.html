<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 R 語言基礎語法 | 運輸資料分析角落：初學者園地</title>
  <meta name="description" content="運輸資料分析" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 R 語言基礎語法 | 運輸資料分析角落：初學者園地" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="運輸資料分析" />
  <meta name="github-repo" content="ChiaJung-Yeh/Transport-Analysis" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 R 語言基礎語法 | 運輸資料分析角落：初學者園地" />
  
  <meta name="twitter:description" content="運輸資料分析" />
  

<meta name="author" content="Chia-Jung (Robert) Yeh 葉家榮 PhD: Insitute of Transport and Logistics Studies, USYD M.S.: Department of Transportation and Logistics Management, NYCU" />


<meta name="date" content="2024-01-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="基本資料統計.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.28/datatables.js"></script>
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
<link rel="stylesheet" href="stylebox.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">運輸資料分析角落：初學者園地</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><strong>前言</strong></a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#安裝套件"><i class="fa fa-check"></i>安裝套件</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#tdx-套件使用方式"><i class="fa fa-check"></i>TDX 套件使用方式</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#其他參考資料"><i class="fa fa-check"></i>其他參考資料</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html"><i class="fa fa-check"></i><b>1</b> <strong>R 語言基礎語法</strong></a>
<ul>
<li class="chapter" data-level="1.1" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#物件object"><i class="fa fa-check"></i><b>1.1</b> 物件（Object）</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#向量vector"><i class="fa fa-check"></i><b>1.1.1</b> 向量（Vector）</a></li>
<li class="chapter" data-level="1.1.2" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#因子factor"><i class="fa fa-check"></i><b>1.1.2</b> 因子（Factor）</a></li>
<li class="chapter" data-level="1.1.3" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#矩陣matrix"><i class="fa fa-check"></i><b>1.1.3</b> 矩陣（Matrix）</a></li>
<li class="chapter" data-level="1.1.4" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#資料框data-frame"><i class="fa fa-check"></i><b>1.1.4</b> 資料框（Data Frame）</a></li>
<li class="chapter" data-level="1.1.5" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#陣列list"><i class="fa fa-check"></i><b>1.1.5</b> 陣列（List）</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#文字處理"><i class="fa fa-check"></i><b>1.2</b> 文字處理</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#連接字串"><i class="fa fa-check"></i><b>1.2.1</b> 連接字串</a></li>
<li class="chapter" data-level="1.2.2" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#轉換大小寫"><i class="fa fa-check"></i><b>1.2.2</b> 轉換大小寫</a></li>
<li class="chapter" data-level="1.2.3" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#擷取與取代字元"><i class="fa fa-check"></i><b>1.2.3</b> 擷取與取代字元</a></li>
<li class="chapter" data-level="1.2.4" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#拆解字串"><i class="fa fa-check"></i><b>1.2.4</b> 拆解字串</a></li>
<li class="chapter" data-level="1.2.5" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#計算字元數"><i class="fa fa-check"></i><b>1.2.5</b> 計算字元數</a></li>
<li class="chapter" data-level="1.2.6" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#搜尋字元"><i class="fa fa-check"></i><b>1.2.6</b> 搜尋字元</a></li>
<li class="chapter" data-level="1.2.7" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#正規表示式"><i class="fa fa-check"></i><b>1.2.7</b> 正規表示式</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#資料讀取與匯出"><i class="fa fa-check"></i><b>1.3</b> 資料讀取與匯出</a></li>
<li class="chapter" data-level="1.4" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#資料清洗與處理"><i class="fa fa-check"></i><b>1.4</b> 資料清洗與處理</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="基本資料統計.html"><a href="基本資料統計.html"><i class="fa fa-check"></i><b>2</b> <strong>基本資料統計</strong></a>
<ul>
<li class="chapter" data-level="2.1" data-path="基本資料統計.html"><a href="基本資料統計.html#公車資料統計分析"><i class="fa fa-check"></i><b>2.1</b> 公車資料統計分析</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="基本資料統計.html"><a href="基本資料統計.html#路線統計分析"><i class="fa fa-check"></i><b>2.1.1</b> 路線統計分析</a></li>
<li class="chapter" data-level="2.1.2" data-path="基本資料統計.html"><a href="基本資料統計.html#站牌統計分析"><i class="fa fa-check"></i><b>2.1.2</b> 站牌統計分析</a></li>
<li class="chapter" data-level="2.1.3" data-path="基本資料統計.html"><a href="基本資料統計.html#站間行駛距離計算"><i class="fa fa-check"></i><b>2.1.3</b> 站間行駛距離計算</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://www.sydney.edu.au/business/about/our-people/research-students/chia-jung-yeh-557.html" target="blank">葉家榮 Chia-Jung Yeh</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">運輸資料分析角落：初學者園地</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-語言基礎語法" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chapter 1</span> <strong>R 語言基礎語法</strong><a href="r-語言基礎語法.html#r-語言基礎語法" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>本章節系統性介紹 R 語言的重要語法和<code>dplyr</code>套件的功能及用法，請務必熟悉各函式，以便後續程式碼撰寫。</p>
<div id="物件object" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> 物件（Object）<a href="r-語言基礎語法.html#物件object" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>物件是 R 語言中構成資料的基本要素，常見者包含五大類：</p>
<ol style="list-style-type: decimal">
<li>向量（vector）<br />
</li>
<li>因子（factor）<br />
</li>
<li>矩陣（matrix）<br />
</li>
<li>資料框（data frame）<br />
</li>
<li>陣列（list）</li>
</ol>
<p>以下小節針對各基本要素的構建與運算詳細說明。</p>
<div id="向量vector" class="section level3 hasAnchor" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> 向量（Vector）<a href="r-語言基礎語法.html#向量vector" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量的性質</strong>
</p>
<ul>
<li>一組值<br />
</li>
<li>一維<br />
</li>
<li>資料型態可為：數值、文字、邏輯值</li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立向量</strong>
</p>
<p>建立向量可利用<code>c()</code>函式建構。</p>
<p style="font-size:18px;line-height:1">
<strong><u>數值向量</u></strong>
</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="r-語言基礎語法.html#cb1-1" tabindex="-1"></a>vec1<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>文字向量</u></strong>
</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="r-語言基礎語法.html#cb3-1" tabindex="-1"></a>vec2<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;D&quot;</span>,<span class="st">&quot;E&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>邏輯向量</u></strong>
</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="r-語言基礎語法.html#cb5-1" tabindex="-1"></a>vec3<span class="ot">=</span><span class="fu">c</span>(T,F,T,F,T)</span>
<span id="cb5-2"><a href="r-語言基礎語法.html#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="r-語言基礎語法.html#cb5-3" tabindex="-1"></a><span class="co"># 或寫完整的邏輯值</span></span>
<span id="cb5-4"><a href="r-語言基礎語法.html#cb5-4" tabindex="-1"></a>vec3<span class="ot">=</span><span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE FALSE  TRUE</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 擷取向量中特定元素</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>擷取單一元素</u></strong>
</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="r-語言基礎語法.html#cb7-1" tabindex="-1"></a>vec2[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] &quot;C&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>擷取多個連續元素</u></strong>
</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="r-語言基礎語法.html#cb9-1" tabindex="-1"></a>vec2[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] &quot;B&quot; &quot;C&quot; &quot;D&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>擷取多個非連續元素</u></strong>
</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="r-語言基礎語法.html#cb11-1" tabindex="-1"></a>vec2[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;C&quot; &quot;E&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>以邏輯值擷取元素</u></strong>
</p>
<p>請注意輸入的邏輯值向量長度必須與原向量相同！</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="r-語言基礎語法.html#cb13-1" tabindex="-1"></a>vec2[<span class="fu">c</span>(T,T,F,F,T)]</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;B&quot; &quot;E&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 連續數值資料</strong>
</p>
<p>利用<code>seq()</code>函式建立連續數值，程式碼撰寫如下：</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="r-語言基礎語法.html#cb15-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from=</span>開始數值, <span class="at">to=</span>結束數值, <span class="at">by=</span>遞增數值)</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="r-語言基礎語法.html#cb16-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from=</span><span class="dv">2</span>, <span class="at">to=</span><span class="dv">20</span>, <span class="at">by=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1]  2  4  6  8 10 12 14 16 18 20</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量運算</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>統計運算</u></strong>
</p>
<p>以下建立一個向量<code>vec4</code>作為範例，所有運算的程式碼與結果請參照表<a href="r-語言基礎語法.html#tab:vector-operation-table">1.1</a>。</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="r-語言基礎語法.html#cb18-1" tabindex="-1"></a>vec4<span class="ot">=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">3</span>,<span class="dv">15</span>,<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">12</span>)</span></code></pre></div>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:vector-operation-table">表 1.1: </span>向量運算
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
運算
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
程式碼
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
輸出結果
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
最大值
</td>
<td style="text-align:left;">
<code>max(vec4)</code>
</td>
<td style="text-align:left;">
<code>15</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
最小值
</td>
<td style="text-align:left;">
<code>min(vec4)</code>
</td>
<td style="text-align:left;">
<code>2</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
最大值索引
</td>
<td style="text-align:left;">
<code>which.max(vec4)</code>
</td>
<td style="text-align:left;">
<code>4</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
最小值索引
</td>
<td style="text-align:left;">
<code>which.min(vec4)</code>
</td>
<td style="text-align:left;">
<code>6</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
全域
</td>
<td style="text-align:left;">
<code>range(vec4)</code>
</td>
<td style="text-align:left;">
<code>2  15</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
總和
</td>
<td style="text-align:left;">
<code>sum(vec4)</code>
</td>
<td style="text-align:left;">
<code>60</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
平均
</td>
<td style="text-align:left;">
<code>mean(vec4)</code>
</td>
<td style="text-align:left;">
<code>7.5</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
中位數
</td>
<td style="text-align:left;">
<code>median(vec4)</code>
</td>
<td style="text-align:left;">
<code>7</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
乘積
</td>
<td style="text-align:left;">
<code>prod(vec4)</code>
</td>
<td style="text-align:left;">
<code>2332800</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
變異數
</td>
<td style="text-align:left;">
<code>var(vec4)</code>
</td>
<td style="text-align:left;">
<code>19.714</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
標準差
</td>
<td style="text-align:left;">
<code>sd(vec4)</code>
</td>
<td style="text-align:left;">
<code>4.44</code>
</td>
</tr>
</tbody>
</table>
<p style="font-size:18px;line-height:1">
<strong><u>數學運算</u></strong>
</p>
<p>以下利用<code>vec4</code>與新建向量<code>vec5</code>作為範例，所有運算的程式碼與結果請參照表<a href="r-語言基礎語法.html#tab:vector-calculation-table">1.2</a>。。</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="r-語言基礎語法.html#cb19-1" tabindex="-1"></a>vec5<span class="ot">=</span><span class="fu">c</span>(<span class="fl">0.57</span>,<span class="fl">4.28</span>,<span class="sc">-</span><span class="fl">1.23</span>,<span class="fl">6.58</span>,<span class="sc">-</span><span class="fl">4.67</span>,<span class="fl">2.09</span>)</span></code></pre></div>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:vector-calculation-table">表 1.2: </span>數學運算
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
運算
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
程式碼
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
輸出結果
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
絕對值
</td>
<td style="text-align:left;">
<code>abs(vec5)</code>
</td>
<td style="text-align:left;">
<code>0.57 4.28 1.23 6.58 4.67 2.09</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
根號
</td>
<td style="text-align:left;">
<code>sqrt(vec4)</code>
</td>
<td style="text-align:left;">
<code>2.236 3 1.732 3.873 2.449 1.414 2.828 3.464</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
四捨五入
</td>
<td style="text-align:left;">
<code>round(vec5, digits=1)</code>
</td>
<td style="text-align:left;">
<code>0.6  4.3  -1.2  6.6  -4.7  2.1</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
取整函數
</td>
<td style="text-align:left;">
<code>ceiling(vec5)</code>
</td>
<td style="text-align:left;">
<code>1 5 -1 7 -4 3</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
下取整函數
</td>
<td style="text-align:left;">
<code>floor(vec5)</code>
</td>
<td style="text-align:left;">
<code>0 4 -2 6 -5 2</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
對數
</td>
<td style="text-align:left;">
<code>log(vec4)</code>
</td>
<td style="text-align:left;">
<code>1.609 2.197 1.099 2.708 1.792 0.693 2.079 2.485</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
指數
</td>
<td style="text-align:left;">
<code>exp(vec4)</code>
</td>
<td style="text-align:left;">
<code>148.4 8103.1 20.1 3269017.4 403.4 7.4 2981 162754.8</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
標準化
</td>
<td style="text-align:left;">
<code>scale(vec4)</code>
</td>
<td style="text-align:left;">
<code>-0.563 0.338 -1.013 1.689 -0.338 -1.239 0.113 1.013</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
累積加總
</td>
<td style="text-align:left;">
<code>cumsum(vec4)</code>
</td>
<td style="text-align:left;">
<code>5 14 17 32 38 40 48 60</code>
</td>
</tr>
</tbody>
</table>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量長度</strong>
</p>
<p>計算向量中的元素個數。</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="r-語言基礎語法.html#cb20-1" tabindex="-1"></a><span class="fu">length</span>(vec4)</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量統計</strong>
</p>
<p>統計向量中各元素的個數。</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="r-語言基礎語法.html#cb22-1" tabindex="-1"></a>vec_tab<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;D&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;B&quot;</span>)</span>
<span id="cb22-2"><a href="r-語言基礎語法.html#cb22-2" tabindex="-1"></a><span class="fu">table</span>(vec_tab)</span></code></pre></div>
<pre><code>## vec_tab
## A B C D E 
## 2 3 2 1 4</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量排序</strong>
</p>
<ul>
<li><code>sort()</code>函式直接將向量予以由小至大之排序<br />
</li>
<li><code>order()</code>函式回傳向量由小至大排序所對應的原向量序號<br />
</li>
<li><code>rank()</code>函式回傳向量中各元素由小至大之順序</li>
</ul>
<p>程式碼撰寫如下，請參照圖<a href="r-語言基礎語法.html#fig:vector-sort-order-rank-fig">1.1</a>之示意圖。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:vector-sort-order-rank-fig"></span>
<img src="figure/sort_order_rank.png" alt="排序函式示意圖" width="90%" />
<p class="caption">
圖 1.1: 排序函式示意圖
</p>
</div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="r-語言基礎語法.html#cb24-1" tabindex="-1"></a><span class="fu">sort</span>(vec4)</span></code></pre></div>
<pre><code>## [1]  2  3  5  6  8  9 12 15</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="r-語言基礎語法.html#cb26-1" tabindex="-1"></a><span class="fu">order</span>(vec4)</span></code></pre></div>
<pre><code>## [1] 6 3 1 5 7 2 8 4</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="r-語言基礎語法.html#cb28-1" tabindex="-1"></a><span class="fu">rank</span>(vec4)</span></code></pre></div>
<pre><code>## [1] 3 6 2 8 4 1 5 7</code></pre>
<p>由<code>sort()</code>的結果可知，其將<code>vec4</code>向量由小至大排序。<code>order()</code>則是回傳排序所對應至原向量的序號，例如回傳結果的最後一個值是<code>4</code>，表示該向量中最大的數值位於向量的第 4 個元素。根據上述，我們亦可透過如下程式碼達到與<code>sort()</code>相同的結果。</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="r-語言基礎語法.html#cb30-1" tabindex="-1"></a>vec4[<span class="fu">order</span>(vec4)]</span></code></pre></div>
<pre><code>## [1]  2  3  5  6  8  9 12 15</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量唯一值</strong>
</p>
<p>去除重複的值。</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="r-語言基礎語法.html#cb32-1" tabindex="-1"></a>vec_dup<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">1</span>,<span class="dv">8</span>,<span class="dv">5</span>,<span class="dv">2</span>)</span>
<span id="cb32-2"><a href="r-語言基礎語法.html#cb32-2" tabindex="-1"></a><span class="fu">unique</span>(vec_dup)</span></code></pre></div>
<pre><code>## [1] 1 9 5 2 6 8</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 檢查使否存在 NA</strong>
</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="r-語言基礎語法.html#cb34-1" tabindex="-1"></a>vec_na<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">5</span>,<span class="cn">NA</span>,<span class="dv">6</span>,<span class="cn">NA</span>)</span>
<span id="cb34-2"><a href="r-語言基礎語法.html#cb34-2" tabindex="-1"></a><span class="fu">is.na</span>(vec_na)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE FALSE  TRUE</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量四則運算</strong>
</p>
<p>以下範例使用<code>vec4</code>與新建立的<code>vec6</code>示範向量的四則運算。</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="r-語言基礎語法.html#cb36-1" tabindex="-1"></a>vec6<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">7</span>,<span class="dv">4</span>,<span class="dv">10</span>,<span class="dv">3</span>)</span></code></pre></div>
<p style="font-size:18px;line-height:1">
<strong><u>兩向量運算</u></strong>
</p>
<p>兩向量運算時，兩組向量的長度（<code>length()</code>）務必相同！<br />
所有運算結果如表<a href="r-語言基礎語法.html#tab:vector-arithmetic-table">1.3</a>。</p>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:vector-arithmetic-table">表 1.3: </span>向量運算
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
運算
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
程式碼
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
輸出結果
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
<strong><code>vec4=c(5,9,3,15,6,2,8,12)</code><br />
<code>vec6=c(2,5,8,11,7,4,10,3)</code></strong>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
加法
</td>
<td style="text-align:left;">
<code>vec4+vec6</code>
</td>
<td style="text-align:left;">
<code>7 14 11 26 13 6 18 15</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
減法
</td>
<td style="text-align:left;">
<code>vec4-vec6</code>
</td>
<td style="text-align:left;">
<code>3 4 -5 4 -1 -2 -2 9</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
乘法
</td>
<td style="text-align:left;">
<code>vec4*vec6</code>
</td>
<td style="text-align:left;">
<code>10 45 24 165 42 8 80 36</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
除法
</td>
<td style="text-align:left;">
<code>vec4/vec6</code>
</td>
<td style="text-align:left;">
<code>2.5 1.8 0.375 1.364 0.857 0.5 0.8 4</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
取餘數
</td>
<td style="text-align:left;">
<code>vec4 %% vec6</code>
</td>
<td style="text-align:left;">
<code>1 4 3 4 6 2 8 0</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
取除數
</td>
<td style="text-align:left;">
<code>vec4 %/% vec6</code>
</td>
<td style="text-align:left;">
<code>2 1 0 1 0 0 0 4</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
內積
</td>
<td style="text-align:left;">
<code>vec4 %*% vec6</code>
</td>
<td style="text-align:left;">
<code>410</code>
</td>
</tr>
</tbody>
</table>
<p style="font-size:18px;line-height:1">
<strong><u>向量與元素運算</u></strong>
</p>
<p>一組向量與一個元素之間的運算，即是將向量中的每一個元素分別與該元素運算。</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="r-語言基礎語法.html#cb37-1" tabindex="-1"></a>vec6<span class="sc">+</span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1]  7 10 13 16 12  9 15  8</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="r-語言基礎語法.html#cb39-1" tabindex="-1"></a>vec6<span class="sc">*</span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] 10 25 40 55 35 20 50 15</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 轉換資料型態</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>文字轉換為數值</u></strong>
</p>
<p>建立<code>vec_cha</code>文字資料</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="r-語言基礎語法.html#cb41-1" tabindex="-1"></a>vec_cha<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;1&quot;</span>,<span class="st">&quot;2&quot;</span>,<span class="st">&quot;3&quot;</span>,<span class="st">&quot;4&quot;</span>,<span class="st">&quot;5&quot;</span>)</span></code></pre></div>
<p>先利用<code>class()</code>函式檢查<code>vec_cha</code>資料型態</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="r-語言基礎語法.html#cb42-1" tabindex="-1"></a><span class="fu">class</span>(vec_cha)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>利用<code>as.numeric()</code>函式轉化為數值資料</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="r-語言基礎語法.html#cb44-1" tabindex="-1"></a><span class="fu">as.numeric</span>(vec_cha)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>數值轉換為文字</u></strong>
</p>
<p>另外，可利用<code>as.character()</code>函式轉化為文字資料</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="r-語言基礎語法.html#cb46-1" tabindex="-1"></a>vec_num<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span>
<span id="cb46-2"><a href="r-語言基礎語法.html#cb46-2" tabindex="-1"></a><span class="fu">as.character</span>(vec_num)</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立重複資料</strong>
</p>
<p>利用<code>rep()</code>函式建立重複資料，該函式主要有兩大引數可以設定：</p>
<ul>
<li><code>each=</code>是設定每一個元素重複的次數</li>
<li><code>times=</code>是設定該向量整體循環的次數</li>
</ul>
<p>以實際範例說明之，程式碼撰寫如下：</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="r-語言基礎語法.html#cb48-1" tabindex="-1"></a>vec6<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">7</span>,<span class="dv">4</span>,<span class="dv">10</span>,<span class="dv">3</span>)</span>
<span id="cb48-2"><a href="r-語言基礎語法.html#cb48-2" tabindex="-1"></a></span>
<span id="cb48-3"><a href="r-語言基礎語法.html#cb48-3" tabindex="-1"></a><span class="co"># 設定每一個元素重複的次數</span></span>
<span id="cb48-4"><a href="r-語言基礎語法.html#cb48-4" tabindex="-1"></a><span class="fu">rep</span>(vec6, <span class="at">each=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1]  2  2  5  5  8  8 11 11  7  7  4  4 10 10  3  3</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="r-語言基礎語法.html#cb50-1" tabindex="-1"></a><span class="co"># 設定向量整體重複的次數</span></span>
<span id="cb50-2"><a href="r-語言基礎語法.html#cb50-2" tabindex="-1"></a><span class="fu">rep</span>(vec6, <span class="at">times=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1]  2  5  8 11  7  4 10  3  2  5  8 11  7  4 10  3</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳向量中 TRUE 索引值</strong>
</p>
<p><code>which()</code>函式可用以回傳向量中 TRUE 的索引值。</p>
<p style="font-size:18px;line-height:1">
<strong><u>TRUE 索引值</u></strong>
</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="r-語言基礎語法.html#cb52-1" tabindex="-1"></a>vec3<span class="ot">=</span><span class="fu">c</span>(T,F,T,F,T)</span>
<span id="cb52-2"><a href="r-語言基礎語法.html#cb52-2" tabindex="-1"></a><span class="fu">which</span>(vec3)</span></code></pre></div>
<pre><code>## [1] 1 3 5</code></pre>
<p>由上述範例可知，TRUE 位於<code>vec3</code>向量的第 1、3、5 個元素。</p>
<p style="font-size:18px;line-height:1">
<strong><u>回傳符合條件索引值</u></strong>
</p>
<p>除了上述基本案例外，通常我們會藉由運算子（<code>==</code>, <code>&gt;</code>, <code>&lt;</code>, …）以尋找符合條件的元素，並進一步透過<code>which()</code>函式回傳結果為 TRUE 的索引值。範例如下。</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="r-語言基礎語法.html#cb54-1" tabindex="-1"></a>vec6<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">7</span>,<span class="dv">4</span>,<span class="dv">10</span>,<span class="dv">3</span>)</span>
<span id="cb54-2"><a href="r-語言基礎語法.html#cb54-2" tabindex="-1"></a></span>
<span id="cb54-3"><a href="r-語言基礎語法.html#cb54-3" tabindex="-1"></a><span class="co"># vec6大於5的邏輯判斷</span></span>
<span id="cb54-4"><a href="r-語言基礎語法.html#cb54-4" tabindex="-1"></a>vec6<span class="sc">&gt;</span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE  TRUE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="r-語言基礎語法.html#cb56-1" tabindex="-1"></a><span class="co"># 回傳vec6大於5的索引值</span></span>
<span id="cb56-2"><a href="r-語言基礎語法.html#cb56-2" tabindex="-1"></a><span class="fu">which</span>(vec6<span class="sc">&gt;</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 3 4 5 7</code></pre>
</div>
<div id="因子factor" class="section level3 hasAnchor" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> 因子（Factor）<a href="r-語言基礎語法.html#因子factor" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 因子的性質</strong>
</p>
<ul>
<li>由文字向量建立<br />
</li>
<li>須設定文字層級<br />
</li>
<li>設立因子的延伸應用：
<ul>
<li>在<code>ggplot2</code>套件中調整圖例順序<br />
</li>
<li>在計量模型中建立啞變量（dummy variables）</li>
</ul></li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立因子</strong>
</p>
<p>因子的建立可以使用<code>factor()</code>函式，其中必須透過<code>levels=</code>引數設定層級，程式碼建構如下：</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="r-語言基礎語法.html#cb58-1" tabindex="-1"></a><span class="fu">factor</span>(文字向量, <span class="at">levels=</span>期望的層級向量)</span></code></pre></div>
<p>以下列簡單範例說明因子的功能，建立<code>school</code>之文字向量。</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="r-語言基礎語法.html#cb59-1" tabindex="-1"></a>school<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;大學&quot;</span>,<span class="st">&quot;幼稚園&quot;</span>,<span class="st">&quot;國小&quot;</span>,<span class="st">&quot;高中&quot;</span>,<span class="st">&quot;國中&quot;</span>)</span></code></pre></div>
<p>若欲將<code>school</code>轉換為具有層級意義的因子，並依據學校層級排序，則程式碼撰寫如下：</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="r-語言基礎語法.html#cb60-1" tabindex="-1"></a>school_fc<span class="ot">=</span><span class="fu">factor</span>(school, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;幼稚園&quot;</span>,<span class="st">&quot;國小&quot;</span>,<span class="st">&quot;國中&quot;</span>,<span class="st">&quot;高中&quot;</span>,<span class="st">&quot;大學&quot;</span>))</span>
<span id="cb60-2"><a href="r-語言基礎語法.html#cb60-2" tabindex="-1"></a>school_fc</span></code></pre></div>
<pre><code>## [1] 大學   幼稚園 國小   高中   國中  
## Levels: 幼稚園 國小 國中 高中 大學</code></pre>
<p>由上述可發現，有別於文字向量，因子會另出現「Levels:」的訊息，表示文字具有層級意義。<br />
最後可利用<code>is.factor()</code>函式判斷一變數是否為因子，抑或利用<code>class()</code>函式逕查詢該變數的資料型態。</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="r-語言基礎語法.html#cb62-1" tabindex="-1"></a><span class="fu">is.factor</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="r-語言基礎語法.html#cb64-1" tabindex="-1"></a><span class="fu">class</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<p>上述所建立的因子具有層級意義，故可以排序，可進一步利用<code>sort()</code>函式排序，程式碼如下：</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="r-語言基礎語法.html#cb66-1" tabindex="-1"></a><span class="fu">sort</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] 幼稚園 國小   國中   高中   大學  
## Levels: 幼稚園 國小 國中 高中 大學</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立有序因子</strong>
</p>
<p>上述所建立的因子具有層級意義，可以排序，然而各元素間不具有大小意義，無法直接比較大小值。以<code>school_fc</code>為例，我們所設定的「大學」層級高於「幼稚園」，然而這不意謂著<code>大學&gt;幼稚園</code>。因此若直接拿兩元素相比較大小，程式會出現警告（大小關係對因子無意義），且回傳<code>NA</code>，試驗如下：</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="r-語言基礎語法.html#cb68-1" tabindex="-1"></a>school_fc[<span class="dv">1</span>]<span class="sc">&gt;</span>school_fc[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## Warning in Ops.factor(school_fc[1], school_fc[2]): &#39;&gt;&#39; 對因子沒有意義</code></pre>
<pre><code>## [1] NA</code></pre>
<p>若欲建立具大小關係的因子，則需在<code>factor()</code>函式中設定<code>order=T</code>引數，以表達具有順序意義。</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="r-語言基礎語法.html#cb71-1" tabindex="-1"></a>school_order<span class="ot">=</span><span class="fu">factor</span>(school, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;幼稚園&quot;</span>,<span class="st">&quot;國小&quot;</span>,<span class="st">&quot;國中&quot;</span>,<span class="st">&quot;高中&quot;</span>,<span class="st">&quot;大學&quot;</span>), <span class="at">order=</span>T)</span>
<span id="cb71-2"><a href="r-語言基礎語法.html#cb71-2" tabindex="-1"></a>school_order</span></code></pre></div>
<pre><code>## [1] 大學   幼稚園 國小   高中   國中  
## Levels: 幼稚園 &lt; 國小 &lt; 國中 &lt; 高中 &lt; 大學</code></pre>
<p>由輸出結果可發現，層級中具有「&lt;」符號，用以表達有序之大小關係。</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="r-語言基礎語法.html#cb73-1" tabindex="-1"></a><span class="co"># 比較幼稚園與大學的大小關係</span></span>
<span id="cb73-2"><a href="r-語言基礎語法.html#cb73-2" tabindex="-1"></a>school_order[<span class="dv">1</span>]<span class="sc">&gt;</span>school_order[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 轉換資料型態</strong>
</p>
<p>可透過<code>as.character()</code>將因子轉換為單純的文字向量，亦可藉由<code>as.numeric()</code>將因子轉換為數值，而該數值乃依據層級的大小給定，層級越高（後）者，數值愈大。以上述<code>school_fc</code>為案例說明。</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="r-語言基礎語法.html#cb75-1" tabindex="-1"></a><span class="co"># 轉換為文字向量</span></span>
<span id="cb75-2"><a href="r-語言基礎語法.html#cb75-2" tabindex="-1"></a><span class="fu">as.character</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] &quot;大學&quot;   &quot;幼稚園&quot; &quot;國小&quot;   &quot;高中&quot;   &quot;國中&quot;</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="r-語言基礎語法.html#cb77-1" tabindex="-1"></a><span class="co"># 轉換為數值向量</span></span>
<span id="cb77-2"><a href="r-語言基礎語法.html#cb77-2" tabindex="-1"></a><span class="fu">as.numeric</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] 5 1 2 4 3</code></pre>
</div>
<div id="矩陣matrix" class="section level3 hasAnchor" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> 矩陣（Matrix）<a href="r-語言基礎語法.html#矩陣matrix" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 矩陣的性質</strong>
</p>
<ul>
<li>二維<br />
</li>
<li>含括多個橫列（rows）與直行（columns）<br />
</li>
<li>可以組合「相同」資料型態的向量 (文字向量、數值向量、邏輯向量)</li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立矩陣</strong>
</p>
<p>利用<code>matrix()</code>函式建立矩陣，其中必須設定兩引數：</p>
<ul>
<li><code>nrow=</code> 設定矩陣的橫列數<br />
</li>
<li><code>ncol=</code> 設定矩陣的直行數</li>
</ul>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="r-語言基礎語法.html#cb79-1" tabindex="-1"></a><span class="fu">matrix</span>(向量, <span class="at">nrow=</span>, <span class="at">ncol=</span>)</span></code></pre></div>
<p>範例如下：</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="r-語言基礎語法.html#cb80-1" tabindex="-1"></a>mat1<span class="ot">=</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="at">nrow=</span><span class="dv">3</span>, <span class="at">ncol=</span><span class="dv">5</span>)</span>
<span id="cb80-2"><a href="r-語言基礎語法.html#cb80-2" tabindex="-1"></a>mat1</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    4    7   10   13
## [2,]    2    5    8   11   14
## [3,]    3    6    9   12   15</code></pre>
<p>由回傳結果可發現，該矩陣是先由上至下，再由左至右填入向量。若希望矩陣的填法是先由左至右，再由上至下，則須設定引數<code>byrow=T</code>，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="r-語言基礎語法.html#cb82-1" tabindex="-1"></a>mat2<span class="ot">=</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="at">nrow=</span><span class="dv">3</span>, <span class="at">ncol=</span><span class="dv">5</span>, <span class="at">byrow=</span>T)</span>
<span id="cb82-2"><a href="r-語言基礎語法.html#cb82-2" tabindex="-1"></a>mat2</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    2    3    4    5
## [2,]    6    7    8    9   10
## [3,]   11   12   13   14   15</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 查看矩陣的維度</strong>
</p>
<p>矩陣是二維的資料，若要進一步該二維資料中的橫列與直行個數，可利用<code>nrow()</code>與<code>ncol()</code>函式分別查看，或逕利用<code>dim()</code>函式查看之。</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="r-語言基礎語法.html#cb84-1" tabindex="-1"></a><span class="fu">nrow</span>(mat2)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="r-語言基礎語法.html#cb86-1" tabindex="-1"></a><span class="fu">ncol</span>(mat2)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="r-語言基礎語法.html#cb88-1" tabindex="-1"></a><span class="fu">dim</span>(mat2)</span></code></pre></div>
<pre><code>## [1] 3 5</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳矩陣的特定元素</strong>
</p>
<p>利用中括號<code>[ , ]</code>可回傳特定元素的值，其中逗點前必須放置橫列的索引值，而逗點後則是直行的索引值。<br />
以第 2 橫列第 4 行為例，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="r-語言基礎語法.html#cb90-1" tabindex="-1"></a>mat2[<span class="dv">2</span>, <span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 轉置矩陣</strong>
</p>
<p>藉由<code>t()</code>函式將矩陣予以轉置（transpose）。</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="r-語言基礎語法.html#cb92-1" tabindex="-1"></a><span class="fu">t</span>(mat2)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    6   11
## [2,]    2    7   12
## [3,]    3    8   13
## [4,]    4    9   14
## [5,]    5   10   15</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 矩陣運算</strong>
</p>
<p>矩陣的運算是 R 語言的利器，執行效率相當高，在許多統計模型背後的運算亦是牽涉複雜的矩陣運算。以下簡單介紹重要的運算函式。</p>
<p style="font-size:18px;line-height:1">
<strong><u>橫列與直行運算</u></strong>
</p>
<p>橫列與直行的加總與平均值計算彙整如表<a href="r-語言基礎語法.html#tab:matrix-operation-table">1.4</a>。</p>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:matrix-operation-table">表 1.4: </span>矩陣運算
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
加總
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
平均
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: middle !important;" rowspan="2">
橫列
</td>
<td style="text-align:left;">
<code>rowSums(mat2)</code>
</td>
<td style="text-align:left;">
<code>rowMeans(mat2)</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>15 40 65</code>
</td>
<td style="text-align:left;">
<code>3 8 13</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: middle !important;" rowspan="2">
直行
</td>
<td style="text-align:left;">
<code>colSums(mat2)</code>
</td>
<td style="text-align:left;">
<code>colMeans(mat2)</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>18 21 24 27 30</code>
</td>
<td style="text-align:left;">
<code>6 7 8 9 10</code>
</td>
</tr>
</tbody>
</table>
<p style="font-size:18px;line-height:1">
<strong><u><code>apply()</code>函式應用</u></strong>
</p>
<p>試想若沒有<a href="r-語言基礎語法.html#tab:matrix-operation-table">1.4</a>中的各個函式用以處理矩陣資料，我們可以透過<code>for()</code>迴圈逐行或逐列針對矩陣運算，以橫列加總（<code>rowSums</code>）為例，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="r-語言基礎語法.html#cb94-1" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(mat2))){</span>
<span id="cb94-2"><a href="r-語言基礎語法.html#cb94-2" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">sum</span>(mat2[i,]), <span class="st">&quot; &quot;</span>)</span>
<span id="cb94-3"><a href="r-語言基礎語法.html#cb94-3" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## 15  40  65</code></pre>
<p>然而如是的寫法效率極差，在 R 語言中類似 <code>for()</code> 迴圈的程序可以考慮更高效率的<code>apply()</code>函式取代之，程式語法如下：</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="r-語言基礎語法.html#cb96-1" tabindex="-1"></a><span class="fu">apply</span>(矩陣資料, 方向, 運算函式)</span></code></pre></div>
<p>其中<code>方向</code>有兩種選擇：<code>1</code>表示逐列（row）運算；<code>2</code>表示逐行（column）運算。運算函式可為前述向量運算的任一函式。<code>apply()</code>函式的運算概念如圖<a href="r-語言基礎語法.html#fig:apply-fig">1.2</a>之示意圖。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:apply-fig"></span>
<img src="figure/apply.png" alt="`apply()`函式運算示意圖" width="60%" />
<p class="caption">
圖 1.2: <code>apply()</code>函式運算示意圖
</p>
</div>
<p>再次以<code>mat2</code>矩陣為範例，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="r-語言基礎語法.html#cb97-1" tabindex="-1"></a><span class="co"># 逐列加總 (=rowSums)</span></span>
<span id="cb97-2"><a href="r-語言基礎語法.html#cb97-2" tabindex="-1"></a><span class="fu">apply</span>(mat2, <span class="dv">1</span>, sum)</span></code></pre></div>
<pre><code>## [1] 15 40 65</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="r-語言基礎語法.html#cb99-1" tabindex="-1"></a><span class="co"># 逐行平均 (=colMeans)</span></span>
<span id="cb99-2"><a href="r-語言基礎語法.html#cb99-2" tabindex="-1"></a><span class="fu">apply</span>(mat2, <span class="dv">2</span>, mean)</span></code></pre></div>
<pre><code>## [1]  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="r-語言基礎語法.html#cb101-1" tabindex="-1"></a><span class="co"># 逐列尋找最大值索引值</span></span>
<span id="cb101-2"><a href="r-語言基礎語法.html#cb101-2" tabindex="-1"></a><span class="fu">apply</span>(mat2, <span class="dv">1</span>, which.max)</span></code></pre></div>
<pre><code>## [1] 5 5 5</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="r-語言基礎語法.html#cb103-1" tabindex="-1"></a><span class="co"># 逐行計算標準差</span></span>
<span id="cb103-2"><a href="r-語言基礎語法.html#cb103-2" tabindex="-1"></a><span class="fu">apply</span>(mat2, <span class="dv">2</span>, sd)</span></code></pre></div>
<pre><code>## [1] 5 5 5 5 5</code></pre>
</div>
<div id="資料框data-frame" class="section level3 hasAnchor" number="1.1.4">
<h3><span class="header-section-number">1.1.4</span> 資料框（Data Frame）<a href="r-語言基礎語法.html#資料框data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 資料框的性質</strong>
</p>
<ul>
<li>類似矩陣（Matrix），但可涵括多種不同的資料型態<br />
</li>
<li>功能類似 Excel 的工作表<br />
</li>
<li>資料分析中最常見的資料型態<br />
</li>
<li>可利用<code>dplyr</code>套件處理資料 (參見<a href="#dplyr資料處理"><code>dplyr</code>資料處理</a>)</li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立資料框</strong>
</p>
<p>資料框的建立如下程式碼：</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="r-語言基礎語法.html#cb105-1" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">VAR1=</span><span class="fu">c</span>(), <span class="at">VAR2=</span><span class="fu">c</span>(), <span class="at">VAR3=</span><span class="fu">c</span>(), ...)</span></code></pre></div>
<p>VAR1、VAR2、VAR3 皆表示資料框中的變數名稱，亦即表格中的表頭名。</p>
<p>以下簡單範例說明資料框的建構。</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="r-語言基礎語法.html#cb106-1" tabindex="-1"></a>StuScore<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">StudentID=</span><span class="fu">c</span>(<span class="st">&quot;ID1&quot;</span>,<span class="st">&quot;ID2&quot;</span>,<span class="st">&quot;ID3&quot;</span>,<span class="st">&quot;ID4&quot;</span>,<span class="st">&quot;ID5&quot;</span>),</span>
<span id="cb106-2"><a href="r-語言基礎語法.html#cb106-2" tabindex="-1"></a>                    <span class="at">Name=</span><span class="fu">c</span>(<span class="st">&quot;Bob&quot;</span>,<span class="st">&quot;Mary&quot;</span>,<span class="st">&quot;Robert&quot;</span>,<span class="st">&quot;Jason&quot;</span>,<span class="st">&quot;Jane&quot;</span>),</span>
<span id="cb106-3"><a href="r-語言基礎語法.html#cb106-3" tabindex="-1"></a>                    <span class="at">Score=</span><span class="fu">c</span>(<span class="dv">60</span>,<span class="dv">80</span>,<span class="dv">40</span>,<span class="dv">50</span>,<span class="dv">100</span>))</span>
<span id="cb106-4"><a href="r-語言基礎語法.html#cb106-4" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID   Name Score
## 1       ID1    Bob    60
## 2       ID2   Mary    80
## 3       ID3 Robert    40
## 4       ID4  Jason    50
## 5       ID5   Jane   100</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳資料欄位名稱</strong>
</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="r-語言基礎語法.html#cb108-1" tabindex="-1"></a><span class="fu">colnames</span>(StuScore)</span>
<span id="cb108-2"><a href="r-語言基礎語法.html#cb108-2" tabindex="-1"></a></span>
<span id="cb108-3"><a href="r-語言基礎語法.html#cb108-3" tabindex="-1"></a><span class="co"># 或可以直接使用names()函式</span></span>
<span id="cb108-4"><a href="r-語言基礎語法.html#cb108-4" tabindex="-1"></a><span class="fu">names</span>(StuScore)</span></code></pre></div>
<pre><code>## [1] &quot;StudentID&quot; &quot;Name&quot;      &quot;Score&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳特定欄列</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>回傳指定橫列</u></strong>
</p>
<p>將列號或邏輯向量置於中括號內的逗號前，惟須注意，使用邏輯向量時，其長度必須與資料列數相同。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="r-語言基礎語法.html#cb110-1" tabindex="-1"></a><span class="co"># 使用列號</span></span>
<span id="cb110-2"><a href="r-語言基礎語法.html#cb110-2" tabindex="-1"></a>StuScore[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>),]</span>
<span id="cb110-3"><a href="r-語言基礎語法.html#cb110-3" tabindex="-1"></a></span>
<span id="cb110-4"><a href="r-語言基礎語法.html#cb110-4" tabindex="-1"></a><span class="co"># 使用邏輯向量</span></span>
<span id="cb110-5"><a href="r-語言基礎語法.html#cb110-5" tabindex="-1"></a>StuScore[<span class="fu">c</span>(T,F,T,F,T),]</span></code></pre></div>
<pre><code>##   StudentID   Name Score
## 1       ID1    Bob    60
## 3       ID3 Robert    40
## 5       ID5   Jane   100</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>回傳指定直行</u></strong>
</p>
<p>有三種方法可回傳指定（多個）直行，包括：</p>
<ul>
<li>列號向量<br />
</li>
<li>邏輯向量<br />
</li>
<li>欄位名稱向量</li>
</ul>
<p>其中使用邏輯向量時，其長度與資料行數必須相同。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="r-語言基礎語法.html#cb112-1" tabindex="-1"></a><span class="co"># 列號向量</span></span>
<span id="cb112-2"><a href="r-語言基礎語法.html#cb112-2" tabindex="-1"></a>StuScore[, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)]</span>
<span id="cb112-3"><a href="r-語言基礎語法.html#cb112-3" tabindex="-1"></a></span>
<span id="cb112-4"><a href="r-語言基礎語法.html#cb112-4" tabindex="-1"></a><span class="co"># 邏輯向量</span></span>
<span id="cb112-5"><a href="r-語言基礎語法.html#cb112-5" tabindex="-1"></a>StuScore[, <span class="fu">c</span>(T,F,T,F,T)]</span>
<span id="cb112-6"><a href="r-語言基礎語法.html#cb112-6" tabindex="-1"></a></span>
<span id="cb112-7"><a href="r-語言基礎語法.html#cb112-7" tabindex="-1"></a><span class="co"># 欄位名稱向量</span></span>
<span id="cb112-8"><a href="r-語言基礎語法.html#cb112-8" tabindex="-1"></a>StuScore[, <span class="fu">c</span>(<span class="st">&quot;StudentID&quot;</span>,<span class="st">&quot;Name&quot;</span>)]</span></code></pre></div>
<pre><code>##   StudentID   Name
## 1       ID1    Bob
## 2       ID2   Mary
## 3       ID3 Robert
## 4       ID4  Jason
## 5       ID5   Jane</code></pre>
<p>此外，資料框亦可透過「<code>$</code>」回傳特定單一欄位，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="r-語言基礎語法.html#cb114-1" tabindex="-1"></a>資料<span class="sc">$</span>欄位名稱</span></code></pre></div>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="r-語言基礎語法.html#cb115-1" tabindex="-1"></a>StuScore<span class="sc">$</span>Name</span></code></pre></div>
<pre><code>## [1] &quot;Bob&quot;    &quot;Mary&quot;   &quot;Robert&quot; &quot;Jason&quot;  &quot;Jane&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳與編輯指定元素</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>使用行列索引值</u></strong>
</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="r-語言基礎語法.html#cb117-1" tabindex="-1"></a>資料[橫列索引, 直行索引]</span></code></pre></div>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="r-語言基礎語法.html#cb118-1" tabindex="-1"></a>StuScore[<span class="dv">2</span>,<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Mary&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>編輯指定元素</u></strong>
</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="r-語言基礎語法.html#cb120-1" tabindex="-1"></a>StuScore[<span class="dv">2</span>,<span class="dv">2</span>]<span class="ot">=</span><span class="st">&quot;Jessica&quot;</span></span>
<span id="cb120-2"><a href="r-語言基礎語法.html#cb120-2" tabindex="-1"></a></span>
<span id="cb120-3"><a href="r-語言基礎語法.html#cb120-3" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID    Name Score
## 1       ID1     Bob    60
## 2       ID2 Jessica    80
## 3       ID3  Robert    40
## 4       ID4   Jason    50
## 5       ID5    Jane   100</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 查看前後六筆資料</strong>
</p>
<p>在此我們使用 R 語言內建的<code>iris</code>資料說明。<code>iris</code>資料共計 150 個樣本，並含括三種不同的鳶尾花（setosa、virginica、versicolor），欄位則包含花瓣與花萼的長度與寬度。</p>
<p style="font-size:18px;line-height:1">
<strong><u>回傳前六筆資料</u></strong>
</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="r-語言基礎語法.html#cb122-1" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>回傳後六筆資料</u></strong>
</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="r-語言基礎語法.html#cb124-1" tabindex="-1"></a><span class="fu">tail</span>(iris)</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 145          6.7         3.3          5.7         2.5 virginica
## 146          6.7         3.0          5.2         2.3 virginica
## 147          6.3         2.5          5.0         1.9 virginica
## 148          6.5         3.0          5.2         2.0 virginica
## 149          6.2         3.4          5.4         2.3 virginica
## 150          5.9         3.0          5.1         1.8 virginica</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 擴增資料框</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>擴增資料列（新增紀錄）</u></strong>
</p>
<p>若欲新增資料，可以透過<code>rbind()</code>函式連結。程式碼如下。</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="r-語言基礎語法.html#cb126-1" tabindex="-1"></a><span class="co"># 建立欲新增的資料</span></span>
<span id="cb126-2"><a href="r-語言基礎語法.html#cb126-2" tabindex="-1"></a>new_student<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">StudentID=</span><span class="st">&quot;ID6&quot;</span>, <span class="at">Name=</span><span class="st">&quot;Roy&quot;</span>, <span class="at">Score=</span><span class="dv">90</span>)</span>
<span id="cb126-3"><a href="r-語言基礎語法.html#cb126-3" tabindex="-1"></a></span>
<span id="cb126-4"><a href="r-語言基礎語法.html#cb126-4" tabindex="-1"></a><span class="co"># 利用rbind()函式相接</span></span>
<span id="cb126-5"><a href="r-語言基礎語法.html#cb126-5" tabindex="-1"></a>StuScore<span class="ot">=</span><span class="fu">rbind</span>(StuScore, new_student)</span>
<span id="cb126-6"><a href="r-語言基礎語法.html#cb126-6" tabindex="-1"></a></span>
<span id="cb126-7"><a href="r-語言基礎語法.html#cb126-7" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID    Name Score
## 1       ID1     Bob    60
## 2       ID2 Jessica    80
## 3       ID3  Robert    40
## 4       ID4   Jason    50
## 5       ID5    Jane   100
## 6       ID6     Roy    90</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>擴增資料欄（新增屬性）</u></strong>
</p>
<p>若欲針對整份資料新增屬性（如<code>StuScore</code>中增加性別欄位…），可以透過<code>cbind()</code>函式連結。程式碼如下。</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="r-語言基礎語法.html#cb128-1" tabindex="-1"></a><span class="co"># 建立欲新增之屬性</span></span>
<span id="cb128-2"><a href="r-語言基礎語法.html#cb128-2" tabindex="-1"></a>Gender<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>)</span>
<span id="cb128-3"><a href="r-語言基礎語法.html#cb128-3" tabindex="-1"></a></span>
<span id="cb128-4"><a href="r-語言基礎語法.html#cb128-4" tabindex="-1"></a><span class="co"># 利用cbind()函式連結</span></span>
<span id="cb128-5"><a href="r-語言基礎語法.html#cb128-5" tabindex="-1"></a>StuScore<span class="ot">=</span><span class="fu">cbind</span>(StuScore, Gender)</span>
<span id="cb128-6"><a href="r-語言基礎語法.html#cb128-6" tabindex="-1"></a></span>
<span id="cb128-7"><a href="r-語言基礎語法.html#cb128-7" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID    Name Score Gender
## 1       ID1     Bob    60      M
## 2       ID2 Jessica    80      F
## 3       ID3  Robert    40      M
## 4       ID4   Jason    50      M
## 5       ID5    Jane   100      F
## 6       ID6     Roy    90      M</code></pre>
<p>或可以直接透過「<code>$</code>」新增新欄位內容。程式碼如下：</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="r-語言基礎語法.html#cb130-1" tabindex="-1"></a>資料<span class="sc">$</span>新欄位<span class="ot">=</span><span class="fu">c</span>(...)</span></code></pre></div>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="r-語言基礎語法.html#cb131-1" tabindex="-1"></a>StuScore<span class="sc">$</span>Height<span class="ot">=</span><span class="fu">c</span>(<span class="dv">180</span>,<span class="dv">165</span>,<span class="dv">170</span>,<span class="dv">160</span>,<span class="dv">175</span>,<span class="dv">180</span>)</span>
<span id="cb131-2"><a href="r-語言基礎語法.html#cb131-2" tabindex="-1"></a></span>
<span id="cb131-3"><a href="r-語言基礎語法.html#cb131-3" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID    Name Score Gender Height
## 1       ID1     Bob    60      M    180
## 2       ID2 Jessica    80      F    165
## 3       ID3  Robert    40      M    170
## 4       ID4   Jason    50      M    160
## 5       ID5    Jane   100      F    175
## 6       ID6     Roy    90      M    180</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 檢查重複列</strong>
</p>
<p>為說明範例，在此先行建立一句有重複資料的資料框。</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="r-語言基礎語法.html#cb133-1" tabindex="-1"></a>StuScore_dup<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">StudentID=</span><span class="fu">c</span>(<span class="st">&quot;ID1&quot;</span>,<span class="st">&quot;ID2&quot;</span>,<span class="st">&quot;ID4&quot;</span>,<span class="st">&quot;ID3&quot;</span>,<span class="st">&quot;ID4&quot;</span>,<span class="st">&quot;ID5&quot;</span>,<span class="st">&quot;ID2&quot;</span>),</span>
<span id="cb133-2"><a href="r-語言基礎語法.html#cb133-2" tabindex="-1"></a>                        <span class="at">Name=</span><span class="fu">c</span>(<span class="st">&quot;Bob&quot;</span>,<span class="st">&quot;Mary&quot;</span>,<span class="st">&quot;Jason&quot;</span>,<span class="st">&quot;Robert&quot;</span>,<span class="st">&quot;Jason&quot;</span>,<span class="st">&quot;Jane&quot;</span>,<span class="st">&quot;Mary&quot;</span>),</span>
<span id="cb133-3"><a href="r-語言基礎語法.html#cb133-3" tabindex="-1"></a>                        <span class="at">Score=</span><span class="fu">c</span>(<span class="dv">60</span>,<span class="dv">80</span>,<span class="dv">40</span>,<span class="dv">100</span>,<span class="dv">40</span>,<span class="dv">100</span>,<span class="dv">80</span>))</span>
<span id="cb133-4"><a href="r-語言基礎語法.html#cb133-4" tabindex="-1"></a>StuScore_dup</span></code></pre></div>
<pre><code>##   StudentID   Name Score
## 1       ID1    Bob    60
## 2       ID2   Mary    80
## 3       ID4  Jason    40
## 4       ID3 Robert   100
## 5       ID4  Jason    40
## 6       ID5   Jane   100
## 7       ID2   Mary    80</code></pre>
<p>由上述結果可知，資料中含有重複的橫列（ID2 &amp; ID4）。我們可以進一步利用<code>duplicated()</code>函式檢查之。</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="r-語言基礎語法.html#cb135-1" tabindex="-1"></a><span class="fu">duplicated</span>(StuScore_dup)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="r-語言基礎語法.html#cb137-1" tabindex="-1"></a><span class="co"># 使用which()函式尋找重複的資料列索引</span></span>
<span id="cb137-2"><a href="r-語言基礎語法.html#cb137-2" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">duplicated</span>(StuScore_dup))</span></code></pre></div>
<pre><code>## [1] 5 7</code></pre>
<p>由執行結果可知，第 5 與第 7 筆資料屬於重複資料。請務必注意，資料框中首次出現的列不會被視為重複者。</p>
</div>
<div id="陣列list" class="section level3 hasAnchor" number="1.1.5">
<h3><span class="header-section-number">1.1.5</span> 陣列（List）<a href="r-語言基礎語法.html#陣列list" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 陣列的性質</strong>
</p>
<ul>
<li>物件的集合（可包含向量、矩陣、資料框、陣列…）<br />
</li>
<li>最複雜的物件，然其使用彈性相當高</li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立陣列</strong>
</p>
<p>使用<code>list()</code>函式建立陣列資料。</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="r-語言基礎語法.html#cb139-1" tabindex="-1"></a>StuScore_list<span class="ot">=</span><span class="fu">list</span>(<span class="at">StudentID=</span><span class="fu">c</span>(<span class="st">&quot;ID1&quot;</span>,<span class="st">&quot;ID2&quot;</span>,<span class="st">&quot;ID3&quot;</span>,<span class="st">&quot;ID4&quot;</span>,<span class="st">&quot;ID5&quot;</span>),</span>
<span id="cb139-2"><a href="r-語言基礎語法.html#cb139-2" tabindex="-1"></a>                   <span class="at">Name=</span><span class="fu">c</span>(<span class="st">&quot;Bob&quot;</span>,<span class="st">&quot;Mary&quot;</span>,<span class="st">&quot;Robert&quot;</span>,<span class="st">&quot;Jason&quot;</span>,<span class="st">&quot;Jane&quot;</span>),</span>
<span id="cb139-3"><a href="r-語言基礎語法.html#cb139-3" tabindex="-1"></a>                   <span class="at">Score=</span><span class="fu">c</span>(<span class="dv">60</span>,<span class="dv">80</span>,<span class="dv">40</span>,<span class="dv">50</span>,<span class="dv">100</span>),</span>
<span id="cb139-4"><a href="r-語言基礎語法.html#cb139-4" tabindex="-1"></a>                   <span class="at">Class=</span><span class="st">&quot;A&quot;</span>)</span></code></pre></div>
<pre><code>## $StudentID
## [1] &quot;ID1&quot; &quot;ID2&quot; &quot;ID3&quot; &quot;ID4&quot; &quot;ID5&quot;
## 
## $Name
## [1] &quot;Bob&quot;    &quot;Mary&quot;   &quot;Robert&quot; &quot;Jason&quot;  &quot;Jane&quot;  
## 
## $Score
## [1]  60  80  40  50 100
## 
## $Class
## [1] &quot;A&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳陣列屬性</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>使用<code>陣列$屬性</code>回傳</u></strong>
</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="r-語言基礎語法.html#cb141-1" tabindex="-1"></a>StuScore_list<span class="sc">$</span>Score</span></code></pre></div>
<pre><code>## [1]  60  80  40  50 100</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>使用陣列索引回傳</u></strong>
</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="r-語言基礎語法.html#cb143-1" tabindex="-1"></a>StuScore_list[[<span class="dv">2</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;Bob&quot;    &quot;Mary&quot;   &quot;Robert&quot; &quot;Jason&quot;  &quot;Jane&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 陣列長度</strong>
</p>
<p>向量的長度可以利用<code>length()</code>函式計算，而陣列亦同，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="r-語言基礎語法.html#cb145-1" tabindex="-1"></a><span class="co"># 建立陣列</span></span>
<span id="cb145-2"><a href="r-語言基礎語法.html#cb145-2" tabindex="-1"></a>num_list<span class="ot">=</span><span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>), <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;D&quot;</span>), <span class="fu">c</span>(T,F,T))</span>
<span id="cb145-3"><a href="r-語言基礎語法.html#cb145-3" tabindex="-1"></a>num_list</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3 4 5
## 
## [[2]]
## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot;
## 
## [[3]]
## [1]  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="r-語言基礎語法.html#cb147-1" tabindex="-1"></a><span class="co"># 計算陣列長度</span></span>
<span id="cb147-2"><a href="r-語言基礎語法.html#cb147-2" tabindex="-1"></a><span class="fu">length</span>(num_list)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>由此可知，<code>num_list</code>的長度為 3。而若欲知該陣列內各別陣列的長度，則必須透過<code>lengths()</code>函數達成此一目的。程式碼撰寫如下，陣列長度的計算詳如圖<a href="r-語言基礎語法.html#fig:list-length-fig">1.3</a>之示意圖所示。</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="r-語言基礎語法.html#cb149-1" tabindex="-1"></a><span class="co"># 計算陣列內各陣列長度</span></span>
<span id="cb149-2"><a href="r-語言基礎語法.html#cb149-2" tabindex="-1"></a><span class="fu">lengths</span>(num_list)</span></code></pre></div>
<pre><code>## [1] 5 4 3</code></pre>
<p>由此可知，<code>num_list</code>陣列內第一個陣列的長度為 5，其次為 3，最後一者為 4。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:list-length-fig"></span>
<img src="figure/length_lengths.png" alt="陣列長度示意圖" width="70%" />
<p class="caption">
圖 1.3: 陣列長度示意圖
</p>
</div>
<p>若欲將陣列去除，並回傳所有陣列中的元素，則可使用<code>unlist()</code>達成之。</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="r-語言基礎語法.html#cb151-1" tabindex="-1"></a><span class="co"># 去除陣列</span></span>
<span id="cb151-2"><a href="r-語言基礎語法.html#cb151-2" tabindex="-1"></a><span class="fu">unlist</span>(num_list)</span></code></pre></div>
<pre><code>##  [1] &quot;1&quot;     &quot;2&quot;     &quot;3&quot;     &quot;4&quot;     &quot;5&quot;     &quot;A&quot;     &quot;B&quot;     &quot;C&quot;     &quot;D&quot;    
## [10] &quot;TRUE&quot;  &quot;FALSE&quot; &quot;TRUE&quot;</code></pre>
</div>
</div>
<div id="文字處理" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> 文字處理<a href="r-語言基礎語法.html#文字處理" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>在資料分析中，文字處理是相當重要的程序，可從中解析特定的詞彙，如計算詞彙數量、取代特定字詞、查看文字出現位置等等，從中探索資料中的文字內容。文字處理可以透過 R 內建的<code>base</code>套件或另安裝<code>stringr</code>套件處理之，本節主要即是針對此二套件說明文字處理之應用。</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="r-語言基礎語法.html#cb153-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;stringr&quot;</span>)</span>
<span id="cb153-2"><a href="r-語言基礎語法.html#cb153-2" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre></div>
<p>本節中所論及的函式彙整如表<a href="r-語言基礎語法.html#tab:string-fun">1.5</a>。</p>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:string-fun">表 1.5: </span>文字處理重要函式
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
套件
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
函式
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
功能
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: middle !important;" rowspan="11">
<code>base</code>
</td>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#連接字串"><code>paste()</code></a>
</td>
<td style="text-align:left;">
連接字串
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#連接字串"><code>paste0()</code></a>
</td>
<td style="text-align:left;">
連接字串（無分隔）
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#轉換大小寫"><code>toupper()</code></a>
</td>
<td style="text-align:left;">
轉換為大寫
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#轉換大小寫"><code>tolower()</code></a>
</td>
<td style="text-align:left;">
轉換為小寫
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#擷取與取代字元"><code>substr()</code></a>
</td>
<td style="text-align:left;">
擷取字元
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#拆解字串"><code>strsplit()</code></a>
</td>
<td style="text-align:left;">
拆解字串
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#擷取與取代字元"><code>gsub()</code></a>
</td>
<td style="text-align:left;">
取代字元
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#計算字元數"><code>nchar()</code></a>
</td>
<td style="text-align:left;">
字串長度(字元數)
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>grep()</code></a>
</td>
<td style="text-align:left;">
回傳符合條件的索引值
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>grepl()</code></a>
</td>
<td style="text-align:left;">
回傳是否含有特定字元
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>regexpr()</code></a>
</td>
<td style="text-align:left;">
回傳特定字元首次出現的位置索引
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: middle !important;" rowspan="18">
<code>stringr</code>
</td>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#轉換大小寫"><code>str_to_upper()</code></a>
</td>
<td style="text-align:left;">
轉換為大寫
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#轉換大小寫"><code>str_to_lower()</code></a>
</td>
<td style="text-align:left;">
轉換為小寫
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#轉換大小寫"><code>str_to_title()</code></a>
</td>
<td style="text-align:left;">
首字大寫
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>str_which()</code></a>
</td>
<td style="text-align:left;">
回傳符合條件的索引值
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>str_detect()</code></a>
</td>
<td style="text-align:left;">
回傳是否含有特定字元
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>str_starts()</code></a>
</td>
<td style="text-align:left;">
回傳是否以特定字元開頭
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>str_locate()</code></a>
</td>
<td style="text-align:left;">
回傳特定字元首次出現的位置索引
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#搜尋字元"><code>str_locate_all()</code></a>
</td>
<td style="text-align:left;">
回傳特定字元所有出現的位置索引
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#計算字元數"><code>str_count()</code></a>
</td>
<td style="text-align:left;">
回傳特定字元出現的次數
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#擷取與取代字元"><code>str_sub()</code></a>
</td>
<td style="text-align:left;">
擷取字元（可進一步取代）
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#擷取與取代字元"><code>str_replace_all()</code></a>
</td>
<td style="text-align:left;">
取代字元
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#計算字元數"><code>str_length()</code></a>
</td>
<td style="text-align:left;">
字串長度(字元數)
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>str_pad()</code>
</td>
<td style="text-align:left;">
統一字串長度的格式
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#拆解字串"><code>str_split()</code></a>
</td>
<td style="text-align:left;">
拆解字串
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#連接字串"><code>str_flatten()</code></a>
</td>
<td style="text-align:left;">
連接字串
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="r-語言基礎語法.html#連接字串"><code>str_glue()</code></a>
</td>
<td style="text-align:left;">
連接字串（含變數）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>str_order()</code>
</td>
<td style="text-align:left;">
回傳字串排序索引值
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>str_sort()</code>
</td>
<td style="text-align:left;">
回傳字串排序後結果
</td>
</tr>
</tbody>
</table>
<div id="連接字串" class="section level3 hasAnchor" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> 連接字串<a href="r-語言基礎語法.html#連接字串" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>paste()</code>：以特定符號連接</strong>
</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="r-語言基礎語法.html#cb154-1" tabindex="-1"></a><span class="fu">paste</span>(文字向量, <span class="at">collapse=</span><span class="st">&quot;分隔符號&quot;</span>)</span></code></pre></div>
<p><code>collapse=</code>引數須設定欲分隔字串的符號。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>paste0()</code>：直接連接（無分隔）</strong>
</p>
<p><code>paste0()</code>將向量內各元素直接連接，相當於<code>paste(文字向量, collapse="")</code>。</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="r-語言基礎語法.html#cb155-1" tabindex="-1"></a><span class="fu">paste0</span>(文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_flatten()</code>：以特定符號連接</strong>
</p>
<p>與<code>paste()</code>函式功能相同。</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="r-語言基礎語法.html#cb156-1" tabindex="-1"></a><span class="fu">str_flatten</span>(文字向量, <span class="at">collapse=</span><span class="st">&quot;分隔符號&quot;</span>)</span></code></pre></div>
<p><code>collapse=</code>引數須設定欲分隔字串的符號。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_glue()</code>：連結字串與變數</strong>
</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="r-語言基礎語法.html#cb157-1" tabindex="-1"></a><span class="fu">str_glue</span>(<span class="st">&quot;文字{變數}&quot;</span>)</span></code></pre></div>
<p>以下簡單示範連結字串之函式應用案例。</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="r-語言基礎語法.html#cb158-1" tabindex="-1"></a><span class="co"># 原始文字向量</span></span>
<span id="cb158-2"><a href="r-語言基礎語法.html#cb158-2" tabindex="-1"></a>transport<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Bus&quot;</span>, <span class="st">&quot;MRT&quot;</span>, <span class="st">&quot;Car&quot;</span>, <span class="st">&quot;Motorcycle&quot;</span>, <span class="st">&quot;Bike&quot;</span>, <span class="st">&quot;Taxi&quot;</span>)</span>
<span id="cb158-3"><a href="r-語言基礎語法.html#cb158-3" tabindex="-1"></a>all_name<span class="ot">=</span><span class="st">&quot;Mode&quot;</span></span>
<span id="cb158-4"><a href="r-語言基礎語法.html#cb158-4" tabindex="-1"></a></span>
<span id="cb158-5"><a href="r-語言基礎語法.html#cb158-5" tabindex="-1"></a><span class="co"># paste()函式連結所有transport內的元素</span></span>
<span id="cb158-6"><a href="r-語言基礎語法.html#cb158-6" tabindex="-1"></a><span class="fu">paste</span>(transport, <span class="at">collapse=</span><span class="st">&quot;|&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Bus|MRT|Car|Motorcycle|Bike|Taxi&quot;</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="r-語言基礎語法.html#cb160-1" tabindex="-1"></a><span class="co"># paste()函式連結all_name與transport內各元素</span></span>
<span id="cb160-2"><a href="r-語言基礎語法.html#cb160-2" tabindex="-1"></a><span class="fu">paste</span>(all_name, <span class="st">&quot;:&quot;</span>, transport)</span></code></pre></div>
<pre><code>## [1] &quot;Mode : Bus&quot;        &quot;Mode : MRT&quot;        &quot;Mode : Car&quot;       
## [4] &quot;Mode : Motorcycle&quot; &quot;Mode : Bike&quot;       &quot;Mode : Taxi&quot;</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="r-語言基礎語法.html#cb162-1" tabindex="-1"></a><span class="co"># paste0()函式連結all_name與transport內各元素</span></span>
<span id="cb162-2"><a href="r-語言基礎語法.html#cb162-2" tabindex="-1"></a><span class="fu">paste0</span>(all_name, <span class="st">&quot;: &quot;</span>, transport)</span></code></pre></div>
<pre><code>## [1] &quot;Mode: Bus&quot;        &quot;Mode: MRT&quot;        &quot;Mode: Car&quot;        &quot;Mode: Motorcycle&quot;
## [5] &quot;Mode: Bike&quot;       &quot;Mode: Taxi&quot;</code></pre>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="r-語言基礎語法.html#cb164-1" tabindex="-1"></a><span class="co"># str_flatten()函式連結所有transport內的元素</span></span>
<span id="cb164-2"><a href="r-語言基礎語法.html#cb164-2" tabindex="-1"></a><span class="fu">str_flatten</span>(transport, <span class="at">collapse=</span><span class="st">&quot;|&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Bus|MRT|Car|Motorcycle|Bike|Taxi&quot;</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="r-語言基礎語法.html#cb166-1" tabindex="-1"></a><span class="co"># str_glue()函式連結all_name與transport內各元素</span></span>
<span id="cb166-2"><a href="r-語言基礎語法.html#cb166-2" tabindex="-1"></a><span class="fu">str_glue</span>(<span class="st">&quot;{all_name}: {transport}&quot;</span>)</span></code></pre></div>
<pre><code>## Mode: Bus
## Mode: MRT
## Mode: Car
## Mode: Motorcycle
## Mode: Bike
## Mode: Taxi</code></pre>
</div>
<div id="轉換大小寫" class="section level3 hasAnchor" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> 轉換大小寫<a href="r-語言基礎語法.html#轉換大小寫" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>toupper()</code>：全部轉換為大寫</strong>
</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="r-語言基礎語法.html#cb168-1" tabindex="-1"></a><span class="fu">toupper</span>(文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>tolower()</code>：全部轉換為小寫</strong>
</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="r-語言基礎語法.html#cb169-1" tabindex="-1"></a><span class="fu">tolower</span>(文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_to_upper()</code>：全部轉換為大寫</strong>
</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="r-語言基礎語法.html#cb170-1" tabindex="-1"></a><span class="fu">str_to_upper</span>(文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_to_lower()</code>：全部轉換為小寫</strong>
</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="r-語言基礎語法.html#cb171-1" tabindex="-1"></a><span class="fu">str_to_lower</span>(文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_to_title()</code>：首字大寫</strong>
</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="r-語言基礎語法.html#cb172-1" tabindex="-1"></a><span class="fu">str_to_title</span>(文字向量)</span></code></pre></div>
<p>以下簡單示範轉換字元大小寫之應用案例。</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="r-語言基礎語法.html#cb173-1" tabindex="-1"></a><span class="co"># 原始文字向量</span></span>
<span id="cb173-2"><a href="r-語言基礎語法.html#cb173-2" tabindex="-1"></a>transport<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Bus&quot;</span>, <span class="st">&quot;MRT&quot;</span>, <span class="st">&quot;Car&quot;</span>, <span class="st">&quot;Motorcycle&quot;</span>, <span class="st">&quot;Bike&quot;</span>, <span class="st">&quot;Taxi&quot;</span>)</span>
<span id="cb173-3"><a href="r-語言基礎語法.html#cb173-3" tabindex="-1"></a>all_name<span class="ot">=</span><span class="st">&quot;Mode&quot;</span></span>
<span id="cb173-4"><a href="r-語言基礎語法.html#cb173-4" tabindex="-1"></a></span>
<span id="cb173-5"><a href="r-語言基礎語法.html#cb173-5" tabindex="-1"></a><span class="co"># toupper()函式轉換大寫</span></span>
<span id="cb173-6"><a href="r-語言基礎語法.html#cb173-6" tabindex="-1"></a><span class="fu">toupper</span>(transport)</span></code></pre></div>
<pre><code>## [1] &quot;BUS&quot;        &quot;MRT&quot;        &quot;CAR&quot;        &quot;MOTORCYCLE&quot; &quot;BIKE&quot;      
## [6] &quot;TAXI&quot;</code></pre>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="r-語言基礎語法.html#cb175-1" tabindex="-1"></a><span class="co"># tolower()函式轉換小寫</span></span>
<span id="cb175-2"><a href="r-語言基礎語法.html#cb175-2" tabindex="-1"></a><span class="fu">tolower</span>(transport)</span></code></pre></div>
<pre><code>## [1] &quot;bus&quot;        &quot;mrt&quot;        &quot;car&quot;        &quot;motorcycle&quot; &quot;bike&quot;      
## [6] &quot;taxi&quot;</code></pre>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="r-語言基礎語法.html#cb177-1" tabindex="-1"></a><span class="co"># str_to_upper()函式轉換大寫</span></span>
<span id="cb177-2"><a href="r-語言基礎語法.html#cb177-2" tabindex="-1"></a><span class="fu">str_to_upper</span>(transport)</span></code></pre></div>
<pre><code>## [1] &quot;BUS&quot;        &quot;MRT&quot;        &quot;CAR&quot;        &quot;MOTORCYCLE&quot; &quot;BIKE&quot;      
## [6] &quot;TAXI&quot;</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="r-語言基礎語法.html#cb179-1" tabindex="-1"></a><span class="co"># str_to_lower()函式轉換小寫</span></span>
<span id="cb179-2"><a href="r-語言基礎語法.html#cb179-2" tabindex="-1"></a><span class="fu">str_to_lower</span>(transport)</span></code></pre></div>
<pre><code>## [1] &quot;bus&quot;        &quot;mrt&quot;        &quot;car&quot;        &quot;motorcycle&quot; &quot;bike&quot;      
## [6] &quot;taxi&quot;</code></pre>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="r-語言基礎語法.html#cb181-1" tabindex="-1"></a><span class="co"># toupper()函式首字大寫</span></span>
<span id="cb181-2"><a href="r-語言基礎語法.html#cb181-2" tabindex="-1"></a><span class="fu">str_to_title</span>(<span class="st">&quot;national yang ming chiao tung university&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;National Yang Ming Chiao Tung University&quot;</code></pre>
</div>
<div id="擷取與取代字元" class="section level3 hasAnchor" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> 擷取與取代字元<a href="r-語言基礎語法.html#擷取與取代字元" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>substr()</code>：擷取字元</strong>
</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="r-語言基礎語法.html#cb183-1" tabindex="-1"></a><span class="fu">substr</span>(文字向量, 開始字元索引, 結束字元索引)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>gsub()</code>：取代字元</strong>
</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="r-語言基礎語法.html#cb184-1" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;被取代字元&quot;</span>, <span class="st">&quot;新替換字元&quot;</span>, 文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_sub()</code>：擷取並取代字元</strong>
</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="r-語言基礎語法.html#cb185-1" tabindex="-1"></a><span class="co"># 擷取字元</span></span>
<span id="cb185-2"><a href="r-語言基礎語法.html#cb185-2" tabindex="-1"></a><span class="fu">str_sub</span>(文字向量, 開始字元索引, 結束字元索引)</span>
<span id="cb185-3"><a href="r-語言基礎語法.html#cb185-3" tabindex="-1"></a></span>
<span id="cb185-4"><a href="r-語言基礎語法.html#cb185-4" tabindex="-1"></a><span class="co"># 取代指定位置的字元(此時以下的文字向量務必是變數)</span></span>
<span id="cb185-5"><a href="r-語言基礎語法.html#cb185-5" tabindex="-1"></a><span class="fu">str_sub</span>(文字向量, 開始字元索引, 結束字元索引)<span class="ot">=</span><span class="st">&quot;新替換字元&quot;</span></span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_replace_all()</code>：取代字元</strong>
</p>
<p><code>str_replace_all()</code>可取代所有字元，而<code>str_replace()</code>僅能取代第一次出現的字元，應用性較低。</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="r-語言基礎語法.html#cb186-1" tabindex="-1"></a><span class="fu">str_replace_all</span>(文字向量, <span class="st">&quot;被取代字元&quot;</span>, <span class="st">&quot;新替換字元&quot;</span>)</span></code></pre></div>
<p>以下簡單示範擷取與取代字元之應用案例。</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="r-語言基礎語法.html#cb187-1" tabindex="-1"></a><span class="co"># 原始文字向量</span></span>
<span id="cb187-2"><a href="r-語言基礎語法.html#cb187-2" tabindex="-1"></a>transport<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Bus&quot;</span>, <span class="st">&quot;MRT&quot;</span>, <span class="st">&quot;Car&quot;</span>, <span class="st">&quot;Motorcycle&quot;</span>, <span class="st">&quot;Bike&quot;</span>, <span class="st">&quot;Taxi&quot;</span>)</span>
<span id="cb187-3"><a href="r-語言基礎語法.html#cb187-3" tabindex="-1"></a>all_name<span class="ot">=</span><span class="st">&quot;Mode&quot;</span></span>
<span id="cb187-4"><a href="r-語言基礎語法.html#cb187-4" tabindex="-1"></a></span>
<span id="cb187-5"><a href="r-語言基礎語法.html#cb187-5" tabindex="-1"></a><span class="co"># substr()擷取字元</span></span>
<span id="cb187-6"><a href="r-語言基礎語法.html#cb187-6" tabindex="-1"></a><span class="fu">substr</span>(transport, <span class="dv">1</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Bus&quot; &quot;MRT&quot; &quot;Car&quot; &quot;Mot&quot; &quot;Bik&quot; &quot;Tax&quot;</code></pre>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="r-語言基礎語法.html#cb189-1" tabindex="-1"></a><span class="co"># gsub()取代字元</span></span>
<span id="cb189-2"><a href="r-語言基礎語法.html#cb189-2" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;?&quot;</span>, transport)</span></code></pre></div>
<pre><code>## [1] &quot;Bus&quot;        &quot;MRT&quot;        &quot;C?r&quot;        &quot;Motorcycle&quot; &quot;Bike&quot;      
## [6] &quot;T?xi&quot;</code></pre>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="r-語言基礎語法.html#cb191-1" tabindex="-1"></a><span class="co"># str_sub()擷取字元</span></span>
<span id="cb191-2"><a href="r-語言基礎語法.html#cb191-2" tabindex="-1"></a><span class="fu">str_sub</span>(transport, <span class="dv">1</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Bu&quot; &quot;MR&quot; &quot;Ca&quot; &quot;Mo&quot; &quot;Bi&quot; &quot;Ta&quot;</code></pre>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="r-語言基礎語法.html#cb193-1" tabindex="-1"></a><span class="co"># str_sub()取代特定位置之字元</span></span>
<span id="cb193-2"><a href="r-語言基礎語法.html#cb193-2" tabindex="-1"></a>transport_new<span class="ot">=</span>transport</span>
<span id="cb193-3"><a href="r-語言基礎語法.html#cb193-3" tabindex="-1"></a><span class="fu">str_sub</span>(transport_new, <span class="dv">2</span>, <span class="dv">3</span>)<span class="ot">=</span><span class="st">&quot;??&quot;</span></span>
<span id="cb193-4"><a href="r-語言基礎語法.html#cb193-4" tabindex="-1"></a>transport_new</span></code></pre></div>
<pre><code>## [1] &quot;B??&quot;        &quot;M??&quot;        &quot;C??&quot;        &quot;M??orcycle&quot; &quot;B??e&quot;      
## [6] &quot;T??i&quot;</code></pre>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="r-語言基礎語法.html#cb195-1" tabindex="-1"></a><span class="co"># str_replace_all()擷取字元</span></span>
<span id="cb195-2"><a href="r-語言基礎語法.html#cb195-2" tabindex="-1"></a><span class="fu">str_replace_all</span>(transport, <span class="st">&quot;[aeiou]&quot;</span>, <span class="st">&quot;?&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;B?s&quot;        &quot;MRT&quot;        &quot;C?r&quot;        &quot;M?t?rcycl?&quot; &quot;B?k?&quot;      
## [6] &quot;T?x?&quot;</code></pre>
<p>以上範例中<code>str_replace()</code>函式的<code>[aeiou]</code>係指中括號內任一字元皆可被取代。關於此類符號的表達請參考<a href="r-語言基礎語法.html#正規表示式"><strong>正規表示式</strong></a>一節。</p>
</div>
<div id="拆解字串" class="section level3 hasAnchor" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> 拆解字串<a href="r-語言基礎語法.html#拆解字串" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>strsplit()</code>：拆解字串</strong>
</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="r-語言基礎語法.html#cb197-1" tabindex="-1"></a><span class="fu">strsplit</span>(文字向量, <span class="st">&quot;切割符號&quot;</span>)</span></code></pre></div>
<p>程式碼中的「切割符號」係指在字串中用以切割字串的符號。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_split()</code>：拆解字串</strong>
</p>
<p><code>str_split()</code>函式為<code>stringr</code>套件的函式，其與<code>base</code>套件中的<code>strsplit</code>函式完全相同。</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="r-語言基礎語法.html#cb198-1" tabindex="-1"></a><span class="fu">str_split</span>(文字向量, <span class="st">&quot;切割符號&quot;</span>)</span></code></pre></div>
<p>以下範例說明拆解字串的做法。</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="r-語言基礎語法.html#cb199-1" tabindex="-1"></a><span class="co"># 原始文字向量</span></span>
<span id="cb199-2"><a href="r-語言基礎語法.html#cb199-2" tabindex="-1"></a>transport_comb<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Bus &amp; MRT &amp; Bike&quot;</span>, <span class="st">&quot;Motorcycle &amp; Car&quot;</span>, <span class="st">&quot;Taxi&quot;</span>)</span>
<span id="cb199-3"><a href="r-語言基礎語法.html#cb199-3" tabindex="-1"></a></span>
<span id="cb199-4"><a href="r-語言基礎語法.html#cb199-4" tabindex="-1"></a><span class="co"># strsplit()拆解字串</span></span>
<span id="cb199-5"><a href="r-語言基礎語法.html#cb199-5" tabindex="-1"></a><span class="fu">strsplit</span>(transport_comb, <span class="st">&quot; &amp; &quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Bus&quot;  &quot;MRT&quot;  &quot;Bike&quot;
## 
## [[2]]
## [1] &quot;Motorcycle&quot; &quot;Car&quot;       
## 
## [[3]]
## [1] &quot;Taxi&quot;</code></pre>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="r-語言基礎語法.html#cb201-1" tabindex="-1"></a><span class="co"># str_split()拆解字串</span></span>
<span id="cb201-2"><a href="r-語言基礎語法.html#cb201-2" tabindex="-1"></a><span class="fu">str_split</span>(transport_comb, <span class="st">&quot; &amp; &quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Bus&quot;  &quot;MRT&quot;  &quot;Bike&quot;
## 
## [[2]]
## [1] &quot;Motorcycle&quot; &quot;Car&quot;       
## 
## [[3]]
## [1] &quot;Taxi&quot;</code></pre>
<p>上述拆解完成後的字串，儲存於一陣列中，[[1]] 中即是<code>transport_comb</code>向量中第一個元素拆解後的結果，包含三個元素（Bus、MRT、Bike），其他則以此類推。此外我們亦可利用<code>unlist()</code>函式將所有拆解的結果從陣列中抽離出來，轉換成向量。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="r-語言基礎語法.html#cb203-1" tabindex="-1"></a><span class="co"># 拆解字串</span></span>
<span id="cb203-2"><a href="r-語言基礎語法.html#cb203-2" tabindex="-1"></a>word_split<span class="ot">=</span><span class="fu">strsplit</span>(transport_comb, <span class="st">&quot; &amp; &quot;</span>)</span>
<span id="cb203-3"><a href="r-語言基礎語法.html#cb203-3" tabindex="-1"></a></span>
<span id="cb203-4"><a href="r-語言基礎語法.html#cb203-4" tabindex="-1"></a><span class="co"># 去除陣列，轉換為向量</span></span>
<span id="cb203-5"><a href="r-語言基礎語法.html#cb203-5" tabindex="-1"></a><span class="fu">unlist</span>(word_split)</span></code></pre></div>
<pre><code>## [1] &quot;Bus&quot;        &quot;MRT&quot;        &quot;Bike&quot;       &quot;Motorcycle&quot; &quot;Car&quot;       
## [6] &quot;Taxi&quot;</code></pre>
</div>
<div id="計算字元數" class="section level3 hasAnchor" number="1.2.5">
<h3><span class="header-section-number">1.2.5</span> 計算字元數<a href="r-語言基礎語法.html#計算字元數" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>nchar()</code>：計算字串內所有字元數</strong>
</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="r-語言基礎語法.html#cb205-1" tabindex="-1"></a><span class="fu">nchar</span>(文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_length()</code>：計算字串內所有字元數</strong>
</p>
<p>抑或可利用<code>stringr</code>套件中的<code>str_length()</code>函式達成相同目的。</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="r-語言基礎語法.html#cb206-1" tabindex="-1"></a><span class="fu">str_length</span>(文字向量)</span></code></pre></div>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="r-語言基礎語法.html#cb207-1" tabindex="-1"></a><span class="co"># 建立向量</span></span>
<span id="cb207-2"><a href="r-語言基礎語法.html#cb207-2" tabindex="-1"></a>transport<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Bus&quot;</span>, <span class="st">&quot;MRT&quot;</span>, <span class="st">&quot;Car&quot;</span>, <span class="st">&quot;Motorcycle&quot;</span>, <span class="st">&quot;Bike&quot;</span>, <span class="st">&quot;Taxi&quot;</span>)</span>
<span id="cb207-3"><a href="r-語言基礎語法.html#cb207-3" tabindex="-1"></a></span>
<span id="cb207-4"><a href="r-語言基礎語法.html#cb207-4" tabindex="-1"></a><span class="co"># nchar()計算長度</span></span>
<span id="cb207-5"><a href="r-語言基礎語法.html#cb207-5" tabindex="-1"></a><span class="fu">nchar</span>(transport)</span></code></pre></div>
<pre><code>## [1]  3  3  3 10  4  4</code></pre>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="r-語言基礎語法.html#cb209-1" tabindex="-1"></a><span class="co"># str_length()計算長度</span></span>
<span id="cb209-2"><a href="r-語言基礎語法.html#cb209-2" tabindex="-1"></a><span class="fu">str_length</span>(transport)</span></code></pre></div>
<pre><code>## [1]  3  3  3 10  4  4</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_count()</code>：計算符合條件的字元數</strong>
</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="r-語言基礎語法.html#cb211-1" tabindex="-1"></a><span class="fu">str_count</span>(文字向量)</span></code></pre></div>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="r-語言基礎語法.html#cb212-1" tabindex="-1"></a><span class="fu">str_count</span>(transport, <span class="st">&quot;[^aeiou]&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 2 3 2 7 2 2</code></pre>
<p>程式碼中的<code>[^aeiou]</code>意指「不包含」「aeiou」任一字元者，因此「Bus」去除「u」之後，字元數為 2。此類符號的表達請參考<a href="r-語言基礎語法.html#正規表示式"><strong>正規表示式</strong></a>一節。</p>
</div>
<div id="搜尋字元" class="section level3 hasAnchor" number="1.2.6">
<h3><span class="header-section-number">1.2.6</span> 搜尋字元<a href="r-語言基礎語法.html#搜尋字元" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>透過搜尋字元，可以瞭解特定字元是否存在於一文字向量中，抑或進一步知道特定字元在向量各元素內的出現位置。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>grep()</code>尋找特定字元存在索引</strong>
</p>
<p>回傳結果為一索引值向量，若完全無符合條件者，會回傳<code>integer(0)</code>。</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="r-語言基礎語法.html#cb214-1" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;欲尋找字元&quot;</span>, 文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_which()</code>尋找特定字元存在索引</strong>
</p>
<p>回傳結果為一索引值向量，若完全無符合條件者，會回傳<code>integer(0)</code>。</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="r-語言基礎語法.html#cb215-1" tabindex="-1"></a><span class="fu">str_which</span>(文字向量, <span class="st">&quot;欲尋找字元&quot;</span>)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>grepl()</code>尋找特定字元存在與否</strong>
</p>
<p>回傳結果為一邏輯向量，該向量長度與輸入的文字向量長度相同。</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="r-語言基礎語法.html#cb216-1" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;欲尋找字元&quot;</span>, 文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_detect()</code>尋找特定字元存在與否</strong>
</p>
<p>回傳結果為一邏輯向量，該向量長度與輸入的文字向量長度相同。</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="r-語言基礎語法.html#cb217-1" tabindex="-1"></a><span class="fu">str_detect</span>(文字向量, <span class="st">&quot;欲尋找字元&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="r-語言基礎語法.html#cb218-1" tabindex="-1"></a><span class="co"># 建立向量</span></span>
<span id="cb218-2"><a href="r-語言基礎語法.html#cb218-2" tabindex="-1"></a>transport<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Bus&quot;</span>, <span class="st">&quot;MRT&quot;</span>, <span class="st">&quot;Car&quot;</span>, <span class="st">&quot;Motorcycle&quot;</span>, <span class="st">&quot;Bike&quot;</span>, <span class="st">&quot;Taxi&quot;</span>)</span>
<span id="cb218-3"><a href="r-語言基礎語法.html#cb218-3" tabindex="-1"></a></span>
<span id="cb218-4"><a href="r-語言基礎語法.html#cb218-4" tabindex="-1"></a><span class="co"># grep()尋找字元存在之索引</span></span>
<span id="cb218-5"><a href="r-語言基礎語法.html#cb218-5" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;a|c&quot;</span>, transport)</span>
<span id="cb218-6"><a href="r-語言基礎語法.html#cb218-6" tabindex="-1"></a></span>
<span id="cb218-7"><a href="r-語言基礎語法.html#cb218-7" tabindex="-1"></a><span class="co"># str_which()尋找字元存在之邏輯值</span></span>
<span id="cb218-8"><a href="r-語言基礎語法.html#cb218-8" tabindex="-1"></a><span class="fu">str_which</span>(transport, <span class="st">&quot;a|c&quot;</span>)</span>
<span id="cb218-9"><a href="r-語言基礎語法.html#cb218-9" tabindex="-1"></a></span>
<span id="cb218-10"><a href="r-語言基礎語法.html#cb218-10" tabindex="-1"></a><span class="co"># grepl()尋找字元存在之邏輯值</span></span>
<span id="cb218-11"><a href="r-語言基礎語法.html#cb218-11" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;a|c&quot;</span>, transport)</span>
<span id="cb218-12"><a href="r-語言基礎語法.html#cb218-12" tabindex="-1"></a></span>
<span id="cb218-13"><a href="r-語言基礎語法.html#cb218-13" tabindex="-1"></a><span class="co"># str_detect()尋找字元存在之邏輯值</span></span>
<span id="cb218-14"><a href="r-語言基礎語法.html#cb218-14" tabindex="-1"></a><span class="fu">str_detect</span>(transport, <span class="st">&quot;a|c&quot;</span>)</span></code></pre></div>
<p>程式碼中，<code>a|c</code>表示 a 或者 c，相當於<code>[ac]</code>，關於此類符號的表達請參考<a href="r-語言基礎語法.html#正規表示式"><strong>正規表示式</strong></a>一節。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_starts()</code>查看是否以特定字元起始</strong>
</p>
<p>程式碼中所設定的引數「欲尋找字元」，會尋找文字向量中各元素是否會以該字元為開頭。</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="r-語言基礎語法.html#cb219-1" tabindex="-1"></a><span class="fu">str_starts</span>(文字向量, <span class="st">&quot;欲尋找字元&quot;</span>)</span></code></pre></div>
<p>再次以<code>transport</code>向量為例，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="r-語言基礎語法.html#cb220-1" tabindex="-1"></a><span class="fu">str_starts</span>(transport, <span class="st">&quot;B&quot;</span>)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE FALSE  TRUE FALSE</code></pre>
<p>回傳結果顯示第一個元素（Bus）與第五個元素（Bike）符合所設定規則。</p>
<p>上述是查看特定字元是否存在於向量中，輸出結果為邏輯向量或索引值向量。然有時我們會希望瞭解該特定字元位於向量各元素中的位置，此時可利用<code>regexpr()</code>與<code>str_locate()</code>函式達成目的。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>regexpr()</code>尋找特定字元「首次」出現位置</strong>
</p>
<p>回傳結果為一索引值向量，該向量長度與輸入的文字向量長度相同。若元素無該字元，會回傳<code>-1</code>。</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="r-語言基礎語法.html#cb222-1" tabindex="-1"></a><span class="fu">regexpr</span>(<span class="st">&quot;欲尋找字元&quot;</span>, 文字向量)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_locate()</code>尋找特定字元「首次」出現位置</strong>
</p>
<p>回傳結果為一矩陣（matrix），該矩陣的橫列數（<code>nrow())</code>）為輸入的文字向量之長度，而直行有兩個，其一為 start，表示字元開始的索引；另一為 end，表示字元結束的索引。若元素無該字元，會回傳<code>NA</code>。</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="r-語言基礎語法.html#cb223-1" tabindex="-1"></a><span class="fu">str_locate</span>(文字向量, <span class="st">&quot;欲尋找字元&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="r-語言基礎語法.html#cb224-1" tabindex="-1"></a><span class="co"># 建立向量</span></span>
<span id="cb224-2"><a href="r-語言基礎語法.html#cb224-2" tabindex="-1"></a>fruit_eg<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;papaya&quot;</span>, <span class="st">&quot;grape&quot;</span>, <span class="st">&quot;lychee&quot;</span>, <span class="st">&quot;apple&quot;</span>, <span class="st">&quot;guava&quot;</span>, <span class="st">&quot;coconut&quot;</span>)</span>
<span id="cb224-3"><a href="r-語言基礎語法.html#cb224-3" tabindex="-1"></a></span>
<span id="cb224-4"><a href="r-語言基礎語法.html#cb224-4" tabindex="-1"></a><span class="co"># grepl()尋找字元出現位置</span></span>
<span id="cb224-5"><a href="r-語言基礎語法.html#cb224-5" tabindex="-1"></a><span class="fu">regexpr</span>(<span class="st">&quot;a&quot;</span>, fruit_eg)</span></code></pre></div>
<pre><code>## [1]  2  3 -1  1  3 -1
## attr(,&quot;match.length&quot;)
## [1]  1  1 -1  1  1 -1
## attr(,&quot;index.type&quot;)
## [1] &quot;chars&quot;
## attr(,&quot;useBytes&quot;)
## [1] TRUE</code></pre>
<p>回傳結果第一列係顯示 a 字元第一次出現於<code>fruit_eg</code>向量各元素中的索引位置，如第一個元素「papaya」，其首次出現 a，是位於第二個字元，故回傳結果為「2」。此外，以第三個元素「lychee」為例，由於該元素內並無 a 字元，故回傳結果為「-1」。</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="r-語言基礎語法.html#cb226-1" tabindex="-1"></a><span class="co"># str_locate()尋找字元出現位置</span></span>
<span id="cb226-2"><a href="r-語言基礎語法.html#cb226-2" tabindex="-1"></a><span class="fu">str_locate</span>(fruit_eg, <span class="st">&quot;a&quot;</span>)</span></code></pre></div>
<pre><code>##      start end
## [1,]     2   2
## [2,]     3   3
## [3,]    NA  NA
## [4,]     1   1
## [5,]     3   3
## [6,]    NA  NA</code></pre>
<p>利用<code>str_locate()</code>函式所得結果更為直接，其顯示字元出現的起迄位置，如回傳結果第一列係指第一個元素「papaya」首次出現 a，是位於第二個字元；而第三列的「NA」則表示該字元未出現於第三個元素中。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ <code>str_locate_all()</code>尋找特定字元「所有」出現位置</strong>
</p>
<p>然而由上述範例可知，無論是<code>regexpr()</code>或是<code>str_locate()</code>函式接僅能回傳首次出現字元的位置，若希望能回傳所有結果，可使用<code>str_locate_all()</code>函式，引數設定方式與<code>str_locate()</code>相同，回傳結果則包含各元素內所有出現特定字元的起迄位置，並以陣列（list）顯示，有別於<code>str_locate()</code>係以矩陣表示。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="r-語言基礎語法.html#cb228-1" tabindex="-1"></a><span class="co"># str_locate_all()尋找字元所有出現位置</span></span>
<span id="cb228-2"><a href="r-語言基礎語法.html#cb228-2" tabindex="-1"></a><span class="fu">str_locate_all</span>(fruit_eg, <span class="st">&quot;a&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
##      start end
## [1,]     2   2
## [2,]     4   4
## [3,]     6   6
## 
## [[2]]
##      start end
## [1,]     3   3
## 
## [[3]]
##      start end
## 
## [[4]]
##      start end
## [1,]     1   1
## 
## [[5]]
##      start end
## [1,]     3   3
## [2,]     5   5
## 
## [[6]]
##      start end</code></pre>
<p>回傳結果為一陣列，陣列中共有 6 個子陣列，分別代表<code>fruit_eg</code>向量中各元素的執行結果。其中第一個陣列 [[1]] 的矩陣內橫列數（<code>nrow()</code>）為 3，表示在「papaya」元素中共找到 3 個符合條件的字元，而其位置分別為第 2、4、6 個字元。若未找到符合條件的字元，則逕顯示表頭（start、end），其橫列數為 0。</p>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 合併使用尋找字元與擷取字元</strong>
</p>
<p>在實務資料分析時，我們很常在一文字向量中尋找特定字元並依據特定字元擷取段落，此時有賴於尋找及<a href="r-語言基礎語法.html#擷取與取代字元">擷取</a>兩種不同功能的函式。範例如下。</p>
<p>以鄉鎮市區的名稱擷取為例，由於全臺灣行政區的名稱長度落於 2 至 4 字之間，無法單純藉由<code>substr()</code>直接鎖定位置，故應先尋找出「鄉鎮市區」字元所在的位置，再進一步擷取。得知該位置後，擷取的字元必須自第一個開始，結束於上述「鄉鎮市區」的位置減 1。程式碼傳寫如下。</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="r-語言基礎語法.html#cb230-1" tabindex="-1"></a><span class="co"># 建立文字向量</span></span>
<span id="cb230-2"><a href="r-語言基礎語法.html#cb230-2" tabindex="-1"></a>cha_vec<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;竹北市&quot;</span>,<span class="st">&quot;東區&quot;</span>,<span class="st">&quot;那瑪夏區&quot;</span>,<span class="st">&quot;羅東鎮&quot;</span>,<span class="st">&quot;太麻里鄉&quot;</span>)</span>
<span id="cb230-3"><a href="r-語言基礎語法.html#cb230-3" tabindex="-1"></a></span>
<span id="cb230-4"><a href="r-語言基礎語法.html#cb230-4" tabindex="-1"></a><span class="co"># 先利用regexpr()搜尋「鄉鎮市區」的位置</span></span>
<span id="cb230-5"><a href="r-語言基礎語法.html#cb230-5" tabindex="-1"></a>district_loc<span class="ot">=</span><span class="fu">regexpr</span>(<span class="st">&quot;[鄉鎮市區]&quot;</span>, cha_vec)</span>
<span id="cb230-6"><a href="r-語言基礎語法.html#cb230-6" tabindex="-1"></a><span class="co"># regexpr(&quot;鄉|鎮|市|區&quot;, cha_vec) # 或利用「|」</span></span>
<span id="cb230-7"><a href="r-語言基礎語法.html#cb230-7" tabindex="-1"></a>district_loc</span></code></pre></div>
<pre><code>## [1] 3 2 4 3 4
## attr(,&quot;match.length&quot;)
## [1] 1 1 1 1 1</code></pre>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="r-語言基礎語法.html#cb232-1" tabindex="-1"></a><span class="co"># 接著利用substr()擷取字元 (注意必須減1)</span></span>
<span id="cb232-2"><a href="r-語言基礎語法.html#cb232-2" tabindex="-1"></a><span class="fu">substr</span>(cha_vec, <span class="dv">1</span>, district_loc<span class="dv">-1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;竹北&quot;   &quot;東&quot;     &quot;那瑪夏&quot; &quot;羅東&quot;   &quot;太麻里&quot;</code></pre>
</div>
<div id="正規表示式" class="section level3 hasAnchor" number="1.2.7">
<h3><span class="header-section-number">1.2.7</span> 正規表示式<a href="r-語言基礎語法.html#正規表示式" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>正規表示式（Regular Expression）是各程式語言中的標準格式，可藉此做進階的文字處理，擴充上述小節中文字取代、搜尋等功能的彈性，若能掌握此技巧，得以提升文字探勘的能力。常用的正規表示式彙整如表<a href="r-語言基礎語法.html#tab:string-regular-expr">1.6</a>。</p>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:string-regular-expr">表 1.6: </span>文字符號規則
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
符號
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
意義
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
符號
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
意義
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>\\</code>
</td>
<td style="text-align:left;">
符號（如：<code>\\.</code>表示「.」<code>\\\</code>表示「\」）
</td>
<td style="text-align:left;">
<code>+</code>
</td>
<td style="text-align:left;">
連接一個或多個未知字元（如：<code>ab+</code>表示 ab 後面需加一個或多個字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\n</code>
</td>
<td style="text-align:left;">
換行
</td>
<td style="text-align:left;">
<code>?</code>
</td>
<td style="text-align:left;">
連接零個或一個未知字元（如：<code>ab?</code>表示 ab 後面可接一個或不接任何字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\t</code>
</td>
<td style="text-align:left;">
tab
</td>
<td style="text-align:left;">
<code>{n}</code>
</td>
<td style="text-align:left;">
連接前一個字元 n 次（如：<code>a{5}</code>表示 a 重複 5 次）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\s</code>
</td>
<td style="text-align:left;">
空白
</td>
<td style="text-align:left;">
<code>[]</code>
</td>
<td style="text-align:left;">
任一字元（如：<code>[abc]</code>表示「a、b、c」任一字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\S</code>
</td>
<td style="text-align:left;">
非空白
</td>
<td style="text-align:left;">
<code>[^]</code>
</td>
<td style="text-align:left;">
排除..的其他字元（如：<code>[^abc]</code>表示不包含「a、b、c」此三者的其他字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\d</code>
</td>
<td style="text-align:left;">
數值
</td>
<td style="text-align:left;">
<code>[-]</code>
</td>
<td style="text-align:left;">
範圍（如：<code>[a-c]</code>表示 a 至 c 所有字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\D</code>
</td>
<td style="text-align:left;">
非數值
</td>
<td style="text-align:left;">
<code>^</code>
</td>
<td style="text-align:left;">
以…為起始字元（如<code>^abc</code>即是以 abc 為起始字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\w</code>
</td>
<td style="text-align:left;">
文字
</td>
<td style="text-align:left;">
<code>$</code>
</td>
<td style="text-align:left;">
以…為結尾字元（如<code>abc$</code>即是以 abc 為結尾字元）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>\\W</code>
</td>
<td style="text-align:left;">
非文字
</td>
<td style="text-align:left;">
<code>(?=)</code>
</td>
<td style="text-align:left;">
字元後方必須為特定字元者（如：<code>a(?=b)</code>表示 a 後面必須接 b 字元者）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>|</code>
</td>
<td style="text-align:left;">
或者（如：<code>a|b</code>即是 a 或者 b）
</td>
<td style="text-align:left;">
<code>(?!)</code>
</td>
<td style="text-align:left;">
字元後方必須非特定字元者（如：<code>a(?!b)</code>表示 a 後面非接 b 字元者）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>*</code>
</td>
<td style="text-align:left;">
連接零個或多個未知字元（如：<code>ab*</code>表示 ab 後面可接或不接任何字元）
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
</table>
<p>關於正規表示式的詳細說明請參考<a href="https://www.wikiwand.com/zh-tw/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">此</a>。</p>
</div>
</div>
<div id="資料讀取與匯出" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> 資料讀取與匯出<a href="r-語言基礎語法.html#資料讀取與匯出" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 讀取資料</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>由本機讀取</u></strong>
</p>
<p>於<code>read.csv()</code>函式中填入資料的路徑，資料型態可為：.csv 或 .txt 檔案。</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="r-語言基礎語法.html#cb234-1" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">&quot;路徑&quot;</span>)</span></code></pre></div>
<p>路徑可以透過「斜線」或「雙反斜線」編寫。</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="r-語言基礎語法.html#cb235-1" tabindex="-1"></a><span class="co"># 斜線</span></span>
<span id="cb235-2"><a href="r-語言基礎語法.html#cb235-2" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">&quot;C:/Users/USER/Downloads/world.csv&quot;</span>)</span>
<span id="cb235-3"><a href="r-語言基礎語法.html#cb235-3" tabindex="-1"></a></span>
<span id="cb235-4"><a href="r-語言基礎語法.html#cb235-4" tabindex="-1"></a><span class="co"># 雙反斜線</span></span>
<span id="cb235-5"><a href="r-語言基礎語法.html#cb235-5" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">&quot;C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">USER</span><span class="sc">\\</span><span class="st">Downloads</span><span class="sc">\\</span><span class="st">world.csv&quot;</span>)</span></code></pre></div>
<p style="font-size:18px;line-height:1">
<strong><u>由網站讀取</u></strong>
</p>
<p>於<code>read.csv()</code>函式中填入資料的網址（url）。</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="r-語言基礎語法.html#cb236-1" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">&quot;url&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="r-語言基礎語法.html#cb237-1" tabindex="-1"></a>world<span class="ot">=</span><span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/ChiaJung-Yeh/R-Code-Sharing/main/R_Preliminary/world.csv&quot;</span>)</span></code></pre></div>
<p><code>world</code>資料讀取結果如下</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-d3e1d3da51996fbe0943" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d3e1d3da51996fbe0943">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177"],["FJ","TZ","EH","CA","US","KZ","UZ","PG","ID","AR","CL","CD","SO","KE","SD","TD","HT","DO","RU","BS","FK","NO","GL","TF","TL","ZA","LS","MX","UY","BR","BO","PE","CO","PA","CR","NI","HN","SV","GT","BZ","VE","GY","SR","FR","EC","PR","JM","CU","ZW","BW",null,"SN","ML","MR","BJ","NE","NG","CM","TG","GH","CI","GN","GW","LR","SL","BF","CF","CG","GA","GQ","ZM","MW","MZ","SZ","AO","BI","IL","LB","MG","PS","GM","TN","DZ","JO","AE","QA","KW","IQ","OM","VU","KH","TH","LA","MM","VN","KP","KR","MN","IN","BD","BT","NP","PK","AF","TJ","KG","TM","IR","SY","AM","SE","BY","UA","PL","AT","HU","MD","RO","LT","LV","EE","DE","BG","GR","TR","AL","HR","CH","LU","BE","NL","PT","ES","IE","NC","SB","NZ","AU","LK","CN","TW","IT","DK","GB","IS","AZ","GE","PH","MY","BN","SI","FI","SK","CZ","ER","JP","PY","YE","SA","AQ",null,"CY","MA","EG","LY","ET","DJ",null,"UG","RW","BA","MK","RS","ME","XK","TT","SS"],["Fiji","Tanzania","Western Sahara","Canada","United States","Kazakhstan","Uzbekistan","Papua New Guinea","Indonesia","Argentina","Chile","Democratic Republic of the Congo","Somalia","Kenya","Sudan","Chad","Haiti","Dominican Republic","Russian Federation","Bahamas","Falkland Islands","Norway","Greenland","French Southern and Antarctic Lands","Timor-Leste","South Africa","Lesotho","Mexico","Uruguay","Brazil","Bolivia","Peru","Colombia","Panama","Costa Rica","Nicaragua","Honduras","El Salvador","Guatemala","Belize","Venezuela","Guyana","Suriname","France","Ecuador","Puerto Rico","Jamaica","Cuba","Zimbabwe","Botswana","Namibia","Senegal","Mali","Mauritania","Benin","Niger","Nigeria","Cameroon","Togo","Ghana","Cote d'Ivoire","Guinea","Guinea-Bissau","Liberia","Sierra Leone","Burkina Faso","Central African Republic","Republic of the Congo","Gabon","Equatorial Guinea","Zambia","Malawi","Mozambique","eSwatini","Angola","Burundi","Israel","Lebanon","Madagascar","Palestine","The Gambia","Tunisia","Algeria","Jordan","United Arab Emirates","Qatar","Kuwait","Iraq","Oman","Vanuatu","Cambodia","Thailand","Lao PDR","Myanmar","Vietnam","Dem. Rep. Korea","Republic of Korea","Mongolia","India","Bangladesh","Bhutan","Nepal","Pakistan","Afghanistan","Tajikistan","Kyrgyzstan","Turkmenistan","Iran","Syria","Armenia","Sweden","Belarus","Ukraine","Poland","Austria","Hungary","Moldova","Romania","Lithuania","Latvia","Estonia","Germany","Bulgaria","Greece","Turkey","Albania","Croatia","Switzerland","Luxembourg","Belgium","Netherlands","Portugal","Spain","Ireland","New Caledonia","Solomon Islands","New Zealand","Australia","Sri Lanka","China","Taiwan","Italy","Denmark","United Kingdom","Iceland","Azerbaijan","Georgia","Philippines","Malaysia","Brunei Darussalam","Slovenia","Finland","Slovakia","Czech Republic","Eritrea","Japan","Paraguay","Yemen","Saudi Arabia","Antarctica","Northern Cyprus","Cyprus","Morocco","Egypt","Libya","Ethiopia","Djibouti","Somaliland","Uganda","Rwanda","Bosnia and Herzegovina","Macedonia","Serbia","Montenegro","Kosovo","Trinidad and Tobago","South Sudan"],["Oceania","Africa","Africa","North America","North America","Asia","Asia","Oceania","Asia","South America","South America","Africa","Africa","Africa","Africa","Africa","North America","North America","Europe","North America","South America","Europe","North America","Seven seas (open ocean)","Asia","Africa","Africa","North America","South America","South America","South America","South America","South America","North America","North America","North America","North America","North America","North America","North America","South America","South America","South America","Europe","South America","North America","North America","North America","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Asia","Asia","Africa","Asia","Africa","Africa","Africa","Asia","Asia","Asia","Asia","Asia","Asia","Oceania","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Asia","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Oceania","Oceania","Oceania","Oceania","Asia","Asia","Asia","Europe","Europe","Europe","Europe","Asia","Asia","Asia","Asia","Asia","Europe","Europe","Europe","Europe","Africa","Asia","South America","Asia","Asia","Antarctica","Asia","Asia","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Europe","Europe","Europe","Europe","Europe","North America","Africa"],["Oceania","Africa","Africa","Americas","Americas","Asia","Asia","Oceania","Asia","Americas","Americas","Africa","Africa","Africa","Africa","Africa","Americas","Americas","Europe","Americas","Americas","Europe","Americas","Seven seas (open ocean)","Asia","Africa","Africa","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Europe","Americas","Americas","Americas","Americas","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Asia","Asia","Africa","Asia","Africa","Africa","Africa","Asia","Asia","Asia","Asia","Asia","Asia","Oceania","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Asia","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Oceania","Oceania","Oceania","Oceania","Asia","Asia","Asia","Europe","Europe","Europe","Europe","Asia","Asia","Asia","Asia","Asia","Europe","Europe","Europe","Europe","Africa","Asia","Americas","Asia","Asia","Antarctica","Asia","Asia","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Africa","Europe","Europe","Europe","Europe","Europe","Americas","Africa"],["Melanesia","Eastern Africa","Northern Africa","Northern America","Northern America","Central Asia","Central Asia","Melanesia","South-Eastern Asia","South America","South America","Middle Africa","Eastern Africa","Eastern Africa","Northern Africa","Middle Africa","Caribbean","Caribbean","Eastern Europe","Caribbean","South America","Northern Europe","Northern America","Seven seas (open ocean)","South-Eastern Asia","Southern Africa","Southern Africa","Central America","South America","South America","South America","South America","South America","Central America","Central America","Central America","Central America","Central America","Central America","Central America","South America","South America","South America","Western Europe","South America","Caribbean","Caribbean","Caribbean","Eastern Africa","Southern Africa","Southern Africa","Western Africa","Western Africa","Western Africa","Western Africa","Western Africa","Western Africa","Middle Africa","Western Africa","Western Africa","Western Africa","Western Africa","Western Africa","Western Africa","Western Africa","Western Africa","Middle Africa","Middle Africa","Middle Africa","Middle Africa","Eastern Africa","Eastern Africa","Eastern Africa","Southern Africa","Middle Africa","Eastern Africa","Western Asia","Western Asia","Eastern Africa","Western Asia","Western Africa","Northern Africa","Northern Africa","Western Asia","Western Asia","Western Asia","Western Asia","Western Asia","Western Asia","Melanesia","South-Eastern Asia","South-Eastern Asia","South-Eastern Asia","South-Eastern Asia","South-Eastern Asia","Eastern Asia","Eastern Asia","Eastern Asia","Southern Asia","Southern Asia","Southern Asia","Southern Asia","Southern Asia","Southern Asia","Central Asia","Central Asia","Central Asia","Southern Asia","Western Asia","Western Asia","Northern Europe","Eastern Europe","Eastern Europe","Eastern Europe","Western Europe","Eastern Europe","Eastern Europe","Eastern Europe","Northern Europe","Northern Europe","Northern Europe","Western Europe","Eastern Europe","Southern Europe","Western Asia","Southern Europe","Southern Europe","Western Europe","Western Europe","Western Europe","Western Europe","Southern Europe","Southern Europe","Northern Europe","Melanesia","Melanesia","Australia and New Zealand","Australia and New Zealand","Southern Asia","Eastern Asia","Eastern Asia","Southern Europe","Northern Europe","Northern Europe","Northern Europe","Western Asia","Western Asia","South-Eastern Asia","South-Eastern Asia","South-Eastern Asia","Southern Europe","Northern Europe","Eastern Europe","Eastern Europe","Eastern Africa","Eastern Asia","South America","Western Asia","Western Asia","Antarctica","Western Asia","Western Asia","Northern Africa","Northern Africa","Northern Africa","Eastern Africa","Eastern Africa","Eastern Africa","Eastern Africa","Eastern Africa","Southern Europe","Southern Europe","Southern Europe","Southern Europe","Southern Europe","Caribbean","Eastern Africa"],["Sovereign country","Sovereign country","Indeterminate","Sovereign country","Country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Dependency","Sovereign country","Country","Dependency","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Country","Sovereign country","Dependency","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Country","Sovereign country","Sovereign country","Disputed","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Country","Sovereign country","Sovereign country","Sovereign country","Dependency","Sovereign country","Country","Country","Sovereign country","Country","Sovereign country","Sovereign country","Country","Country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Indeterminate","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Indeterminate","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country","Sovereign country"],[19289.9707329765,932745.792357074,96270.60104084721,10036042.9767873,9510743.744824581,2729810.51298781,461410.258459096,464520.072464586,1819251.32898731,2784468.58938384,814844.2204878021,2323492.47746214,484332.792984678,590836.914195733,1850885.56479243,1271694.59820398,28540.5459842261,48157.8742821646,17018507.4094666,15584.7908248632,16363.7987423901,397994.628980977,2206644.43953262,11602.5718467462,14714.9313315426,1216400.83108031,27505.6549786909,1969480.30676826,176853.635919616,8508557.091825729,1085269.59559136,1309699.63635968,1151882.92596349,75265.4490305216,53832.1357021123,129540.211674483,113789.774793235,20893.3402330773,109459.048786204,22045.4508313613,908499.070492869,209801.857246846,144268.722604462,644847.882258842,250747.109536984,9224.663167074759,12460.5868709093,114866.218150043,376328.488742711,591912.017166329,824886.560992482,194390.438881923,1235561.37340316,1054107.1940836,116998.712578633,1182269.64800007,905071.739171952,460324.701614163,60966.9622339568,243473.120281533,329825.951440485,239565.079458458,36191.8856963154,98206.7829620829,75980.3314665435,271593.671943161,621860.349185054,339681.855452815,269475.797919465,27120.5747694609,751921.215016539,111197.018347598,810994.757216461,18118.6341282849,1245463.74769785,26238.9478592737,22991.165807789,10099.0030328829,589382.827011519,5037.10382587155,14031.2844514589,156237.321647096,2315916.65788588,89207.13690631661,79880.73828096691,11327.854664807,16652.1196912198,436965.03416826,309302.033595231,7490.040146716,182235.977782045,510125.56979289,229080.422295565,679573.994237083,335990.801728306,125679.216030188,99044.36683048939,1544322.15019105,3142892.09769282,133782.141414655,39377.4020057345,150706.871321559,874119.998315395,652270.070308025,138111.759254274,195874.658497004,480809.521855032,1617559.0402466,185004.125494595,28656.6007515336,450581.582203591,208969.829718131,572548.983743491,310402.33298673,85064.89515859541,92476.460365273,32320.3917738368,238356.297115474,63831.0914781956,63923.5330136017,44678.1968086173,357430.341206566,110216.875059118,131964.646663977,798849.164057534,29694.8002916761,57530.8517530272,46185.2506729716,2416.87048266498,30126.0378859233,40024.104481118,93408.59409916009,502306.467818081,58457.5134141208,23219.0117362846,24728.114237136,277627.604539654,7687613.84310903,65370.3895242611,9409830.493433909,34345.7011138443,315104.851197605,42759.9277031922,249986.395211549,107735.721363006,91113.2541543127,69048.16050446031,292256.939380041,338226.486563138,10700.3342457981,19118.1227179494,341242.33887092,47068.0820296185,81207.60292943619,119319.584873889,404619.932853689,401335.916394788,455915.007254186,1920324.14608918,12335956.0763551,3786.36450592132,6207.00619061686,591718.98943203,996311.623193406,1633720.7173726,1132393.1671779,21880.2505119017,167349.612740013,245768.479387209,23365.4111927782,50605.0748516557,25062.2552860575,76388.6050646267,13443.6780594717,11230.2616721538,7737.80985537389,624909.0990858451],[885806,52234869,null,35535348,318622525,17288285,30757700,7755785,255131116,42981515,17613798,73722860,13513125,46024250,37737913,13569438,10572466,10405844,143819666,382169,null,null,56295,null,1212814,54539571,2145785,124221600,3419546,204213133,10562159,30973354,47791911,3903986,4757575,6013997,8809216,6281189,15923559,351694,30738378,763393,547928,null,15903112,3534874,2862087,11439767,15411675,2168573,2370992,14546111,16962846,4063920,10286712,19148219,176460502,22239904,7228915,26962563,22531350,11805509,1725744,4390737,7079162,17585977,4515392,4871101,1875713,1129424,15620974,17068838,27212382,1295097,26920466,9891790,8215700,5603279,23589801,4294682,1917852,11143908,39113313,8809306,9070867,2374419,3782450,35006080,3960925,258850,15270790,68416772,6576397,51924182,92544915,25116363,50746659,2923896,1293859294,159405279,776448,28323241,185546257,32758020,8362745,5835500,5466241,78411092,19203090,2906220,9696110,9474511,45271947,38011735,8546356,9866468,3556397,19908979,2932367,1993782,1314545,80982500,7223938,10892413,77030628,2889104,4238389,8188649,556319,11209057,16865008,10401062,46480882,4657740,268050,575504,4509700,23504138,20771000,1364270000,null,60789140,5643475,64613160,327386,9535079,3727000,100102249,30228017,411704,2061980,5461512,5418649,10525347,null,127276000,6552584,26246327,30776722,null,null,1152309,34318082,91812566,6204108,97366774,912164,null,38833338,11345357,3566002,2077495,7130576,621810,1821800,1354493,11530971],[69.95999999999999,64.163,null,81.9530487804878,78.84146341463411,71.62,71.039,65.23,68.85599999999999,76.252,79.117,58.782,55.467,66.242,64.002,52.204,62.757,73.483,70.7436585365854,75.379,null,null,null,null,68.285,60.993,53.268,76.753,77.19,75.042,68.357,74.518,74.02200000000001,77.61,79.44,74.884,73.181,73.015,72.869,70.027,74.196,66.425,71.13800000000001,null,75.879,79.3901219512195,75.68899999999999,79.41500000000001,59.36,64.78,62.981,66.376,57.007,62.907,60.373,59.228,52.549,57.111,59.601,62.154,52.52,58.846,56.598,61.527,50.951,59.457,50.621,63.536,65.211,57.18,60.775,61.932,57.099,56.287,60.858,56.688,82.1536585365854,79.23099999999999,65.133,73.126,60.707,75.33499999999999,75.64100000000001,74.03400000000001,76.94799999999999,77.88800000000001,74.458,69.458,76.578,71.709,68.251,74.895,65.97499999999999,66.285,75.855,71.179,81.72195121951221,68.84699999999999,68.021,71.803,69.43000000000001,69.511,66.139,62.895,70.69,70.4024390243902,67.55200000000001,75.46599999999999,69.81699999999999,74.255,82.25365853658541,72.9707317073171,71.1865853658537,77.60243902439031,81.490243902439,75.7634146341463,71.258,74.9609756097561,74.51707317073171,74.1243902439024,77.0341463414634,81.090243902439,74.4658536585366,81.3853658536585,75.239,77.96299999999999,77.4780487804878,83.1975609756098,82.2292682926829,81.2878048780488,81.7073170731707,81.1219512195122,83.2292682926829,81.3487804878049,77.25287259572259,70.113,81.4048780487805,82.3,74.90600000000001,75.932,null,83.090243902439,80.7,81.30487804878049,82.8609756097561,71.8,72.95099999999999,68.813,74.976,76.917,81.0780487804878,81.1804878048781,76.81219512195121,78.8243902439024,64.17400000000001,83.5878048780488,72.913,64.523,74.23399999999999,null,null,80.173,75.309,71.12,71.65900000000001,64.535,62.006,null,59.224,66.188,76.56100000000001,75.384,75.33658536585369,76.712,71.0975609756098,70.426,55.817],[8222.25378436842,2402.09940362843,null,43079.1425247165,51921.9846391384,23587.3375151466,5370.86580208835,3709.08164370316,10003.0890293448,18797.5479465897,22195.2743713617,785.347340663008,null,2753.23613475312,4188.33481399507,2076.65000798778,1652.85480345734,12663.0422473566,25284.5862019855,28456.8165292476,null,null,null,null,6262.90551556596,12389.7146679241,2677.19807805197,16622.5970457658,19827.5649886027,15374.2615071807,6324.82725807651,11547.8342162709,12715.9673914398,20017.9943624961,14372.4007814474,4784.83046366078,4231.32506716223,6890.72322429183,7147.42922806486,7999.57369198528,16745.0219796981,6906.01230864481,15306.6924367639,null,10901.4185562194,35066.0463763697,8051.24402830602,null,1925.138698418,15914.6702328332,9617.3969565111,2218.55191733521,1865.16062183071,3655.38850923143,2001.0772890116,904.456729989966,5671.9006010195,3196.36152634263,1315.3402595533,3868.60089371873,3054.53487386428,1734.73674695657,1398.25480632738,804.719886747093,1692.14206707555,1582.33369667322,597.135168986395,5538.05294137178,16678.6381326502,31542.5107726021,3632.50375331402,1090.3672076732,1079.82386564737,7870.97074814257,6257.15287433489,803.172837396172,31702.0835366295,13831.3752293893,1372.02096124513,4319.52828287882,1550.21843235512,10767.0276518537,13483.3378622219,8622.18546801292,63943.1858285789,120860.06755829,70832.36836452071,14838.3829483763,40365.2732623193,2892.34160435097,3124.31929344274,14857.202932021,5436.48264275006,4770.01209867368,5264.82809971072,null,33425.6895931418,11348.6473412397,5385.14181406703,2973.0415646346,7366.42412644897,2266.18429824848,4576.2270153496,1838.96024371997,2546.50048351137,3181.64216292265,14332.3657698371,16924.2006778247,null,7971.11792762162,44167.6318669891,17944.2098463253,8243.47351509088,24347.0736576846,44320.5020125474,24161.4255236519,4762.7808726743,19677.5202527307,26258.2100974103,22172.2535081352,27113.6859213723,43560.6192440775,16302.3205614307,24081.6305378246,22401.8804311394,10701.1207857986,20334.4464738451,57218.0279263612,93655.33416306481,41360.3955755286,45668.4414721322,26023.6978492184,31195.4052422035,48898.3286615603,null,2139.56074060145,34455.3312172237,43547.1974836868,10650.3901782483,12758.647789259,null,33945.8438783585,45057.0741699595,38251.7924802929,41701.1372653816,16715.1055213058,8749.156189273521,6585.89594870884,24194.6339084542,76089.2865740815,28417.656441512,39017.5372069548,27285.284673711,29119.6166119074,null,37337.3174057788,8501.54353959203,3766.80525494897,49958.4433361471,null,null,29786.3656529772,7078.88148932392,9879.79935855302,16371.9021546442,1424.52698442707,null,null,1637.27508138464,1629.86886584829,10516.7864355965,12298.4901835571,13112.9089581967,14796.6353955591,8698.291558898831,31181.8211959284,1935.87940008879]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>iso_a2<\/th>\n      <th>name_long<\/th>\n      <th>continent<\/th>\n      <th>region_un<\/th>\n      <th>subregion<\/th>\n      <th>type<\/th>\n      <th>area_km2<\/th>\n      <th>pop<\/th>\n      <th>lifeExp<\/th>\n      <th>gdpPercap<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"headerCallback":"function(thead) {\n  $(thead).css('font-size', '0.7em');\n}","columnDefs":[{"targets":7,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":9,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":10,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"className":"dt-right","targets":[7,8,9,10]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'font-size':'12px'});\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'font-size':'12px'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'font-size':'12px'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'font-size':'12px'});\nvar value=data[5]; $(this.api().cell(row, 5).node()).css({'font-size':'12px'});\nvar value=data[6]; $(this.api().cell(row, 6).node()).css({'font-size':'12px'});\nvar value=data[7]; $(this.api().cell(row, 7).node()).css({'font-size':'12px'});\nvar value=data[8]; $(this.api().cell(row, 8).node()).css({'font-size':'12px'});\nvar value=data[9]; $(this.api().cell(row, 9).node()).css({'font-size':'12px'});\nvar value=data[10]; $(this.api().cell(row, 10).node()).css({'font-size':'12px'});\n}"}},"evals":["options.headerCallback","options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.rowCallback"],"jsHooks":[]}</script>
<p>此外，<code>read.csv()</code>函式有諸多引數可供設定，以下簡要說明各引數的功能及設定方式：</p>
<ul>
<li><code>header=</code>設定是否有表頭，若有應設定為<code>T</code>，否則預設為<code>F</code>。<br />
</li>
<li><code>sep=</code>設定分隔符號，例如常見的 .csv 檔即為「逗號」分隔。此引數預設為「,」，若非逗點分隔，需設定此參數，如「\t」為「tab」分隔。<br />
</li>
<li><code>colClasses=</code>設定各欄位的資料型態，如已知 A 欄位為數值型態；B 欄位為文字型態，則應設定：<code>c("A"="numeric", "B"="character")</code>。<br />
</li>
<li><code>nrows=</code>設定擷取的橫列數。<br />
</li>
<li><code>skip=</code>設定跳過前幾筆資料。<br />
</li>
<li><code>fileEncoding=</code>設定文字編碼，一般而言英文的編碼無須另外設定，然若是中文字則通常為「Big5」或「UTF-8」。</li>
</ul>
<p>除了<code>read.csv()</code>函式可讀取資料外，亦可使用<code>read.table()</code>函式讀取，功能與引數完全相同。此外，<code>data.table</code>套件中的<code>fread()</code>亦可讀取資料，其所使用引數與<code>read.csv()</code>大致相同，亦可讀取本機及網路上的文字資料，惟讀取速度非常快，適合大數據資料的讀取。</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="r-語言基礎語法.html#cb238-1" tabindex="-1"></a><span class="fu">fread</span>(<span class="st">&quot;路徑&quot;</span>)  <span class="co"># 本機資料</span></span>
<span id="cb238-2"><a href="r-語言基礎語法.html#cb238-2" tabindex="-1"></a><span class="fu">fread</span>(<span class="st">&quot;url&quot;</span>)   <span class="co"># 網路資料</span></span>
<span id="cb238-3"><a href="r-語言基礎語法.html#cb238-3" tabindex="-1"></a></span>
<span id="cb238-4"><a href="r-語言基礎語法.html#cb238-4" tabindex="-1"></a><span class="co"># 範例</span></span>
<span id="cb238-5"><a href="r-語言基礎語法.html#cb238-5" tabindex="-1"></a>world<span class="ot">=</span><span class="fu">fread</span>(<span class="st">&quot;https://raw.githubusercontent.com/ChiaJung-Yeh/R-Code-Sharing/main/R_Preliminary/world.csv&quot;</span>)</span></code></pre></div>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 匯出資料</strong>
</p>
<p>匯出資料可以使用<code>write.csv()</code>函式，程式撰寫如下：</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="r-語言基礎語法.html#cb239-1" tabindex="-1"></a><span class="fu">write.csv</span>(資料, <span class="st">&quot;路徑&quot;</span>)</span>
<span id="cb239-2"><a href="r-語言基礎語法.html#cb239-2" tabindex="-1"></a></span>
<span id="cb239-3"><a href="r-語言基礎語法.html#cb239-3" tabindex="-1"></a><span class="co"># 範例</span></span>
<span id="cb239-4"><a href="r-語言基礎語法.html#cb239-4" tabindex="-1"></a><span class="fu">write.csv</span>(world, <span class="st">&quot;./world.csv&quot;</span>)</span></code></pre></div>
<p>在<code>write.csv()</code>函式中，主要的引數如下：</p>
<ul>
<li><code>row.names=</code>設定是否回傳橫列名稱，預設為<code>T</code>，若不希望匯出列名稱，則須設定為<code>F</code>。</li>
<li><code>sep=</code>設定分隔符號。<br />
</li>
<li><code>fileEncoding=</code>設定文字編碼，一般而言英文的編碼無須另外設定，然若是中文字則通常為「Big5」或「UTF-8」。</li>
</ul>
<p>同樣地，<code>write.csv()</code>函式在匯出資料的效率並不高，可以使用<code>data.table</code>套件中的<code>fwrite()</code>函式，以減少程式執行的時間，在大數據資料之處理上尤為實用。</p>
</div>
<div id="資料清洗與處理" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> 資料清洗與處理<a href="r-語言基礎語法.html#資料清洗與處理" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>資料清洗與處理是分析前的第一步，透過此一步驟可初步觀察資料的趨勢，並以圖表呈現敘述統計結果。此外，在經過完善的資料整理後，尚能進一步建構統計模型或數據分析工具以瞭解資料背後所衍伸之意涵。<code>dplyr</code>與<code>data.table</code>套件是 R 語言中兩大最常見的資料處理工具，請務必安裝並導入該套件。</p>
<p>資料清洗與處理常用之套件與函式彙整如表<a href="r-語言基礎語法.html#tab:function-data-clean">1.7</a>。</p>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:function-data-clean">表 1.7: </span>資料處理重要函式
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
Package
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
Functions
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
Usage
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
base
</td>
<td style="text-align:left;">
<code>merge()</code>
</td>
<td style="text-align:left;">
根據指定欄位合併兩資料（同<code>left_join()</code>）
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: middle !important;" rowspan="10">
<code>dplyr</code>
</td>
<td style="text-align:left;">
<code>select()</code>
</td>
<td style="text-align:left;">
選取特定欄位
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>filter()</code>
</td>
<td style="text-align:left;">
根據條件篩選資料
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>mutate()</code>
</td>
<td style="text-align:left;">
新增資料屬性（欄位）
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>group_by()</code>
</td>
<td style="text-align:left;">
將資料依據特定欄位分群，後方經常連結<code>filter()</code>或<code>reframe()</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>reframe()</code>
</td>
<td style="text-align:left;">
將分群的資料予以計算
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>slice()</code>
</td>
<td style="text-align:left;">
依據條件擷取特定欄位
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>left_join()</code>
</td>
<td style="text-align:left;">
根據指定欄位合併兩資料
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>arrange()</code>
</td>
<td style="text-align:left;">
根據指定欄位將資料排序
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>rename()</code>
</td>
<td style="text-align:left;">
更改欄位名稱
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>distinct()</code>
</td>
<td style="text-align:left;">
去除重複資料
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: middle !important;" rowspan="2">
<code>data.table</code>
</td>
<td style="text-align:left;">
<code>dcast()</code>
</td>
<td style="text-align:left;">
轉換長資料為寬資料
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>melt()</code>
</td>
<td style="text-align:left;">
轉換寬資料為長資料
</td>
</tr>
</tbody>
</table>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="基本資料統計.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": "https://github.com/ChiaJung-Yeh/Transport-Analysis/tree/master/01-Basic-R.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["series.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
