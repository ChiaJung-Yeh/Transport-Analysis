<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 R 語言基礎語法 | 運輸資料分析初探</title>
  <meta name="description" content="運輸資料分析" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 R 語言基礎語法 | 運輸資料分析初探" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="運輸資料分析" />
  <meta name="github-repo" content="ChiaJung-Yeh/Transport-Analysis" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 R 語言基礎語法 | 運輸資料分析初探" />
  
  <meta name="twitter:description" content="運輸資料分析" />
  

<meta name="author" content="Chia-Jung (Robert) Yeh 葉家榮 PhD: Insitute of Transport and Logistics Studies, USYD M.S.: Department of Transportation and Logistics Management, NYCU" />


<meta name="date" content="2024-01-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="基本資料統計.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
<link rel="stylesheet" href="stylebox.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">運輸資料分析初探</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><strong>前言</strong></a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#安裝套件"><i class="fa fa-check"></i>安裝套件</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#tdx-套件使用方式"><i class="fa fa-check"></i>TDX 套件使用方式</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#其他參考資料"><i class="fa fa-check"></i>其他參考資料</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html"><i class="fa fa-check"></i><b>1</b> <strong>R 語言基礎語法</strong></a>
<ul>
<li class="chapter" data-level="1.1" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#物件object"><i class="fa fa-check"></i><b>1.1</b> 物件（Object）</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#向量vector"><i class="fa fa-check"></i><b>1.1.1</b> 向量（Vector）</a></li>
<li class="chapter" data-level="1.1.2" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#因子factor"><i class="fa fa-check"></i><b>1.1.2</b> 因子（Factor）</a></li>
<li class="chapter" data-level="1.1.3" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#矩陣matrix"><i class="fa fa-check"></i><b>1.1.3</b> 矩陣（Matrix）</a></li>
<li class="chapter" data-level="1.1.4" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#資料框data-frame"><i class="fa fa-check"></i><b>1.1.4</b> 資料框（Data Frame）</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="r-語言基礎語法.html"><a href="r-語言基礎語法.html#dplyr資料處理"><i class="fa fa-check"></i><b>1.2</b> <code>dplyr</code>資料處理</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="基本資料統計.html"><a href="基本資料統計.html"><i class="fa fa-check"></i><b>2</b> <strong>基本資料統計</strong></a>
<ul>
<li class="chapter" data-level="2.1" data-path="基本資料統計.html"><a href="基本資料統計.html#公車資料統計分析"><i class="fa fa-check"></i><b>2.1</b> 公車資料統計分析</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="基本資料統計.html"><a href="基本資料統計.html#路線統計分析"><i class="fa fa-check"></i><b>2.1.1</b> 路線統計分析</a></li>
<li class="chapter" data-level="2.1.2" data-path="基本資料統計.html"><a href="基本資料統計.html#站牌統計分析"><i class="fa fa-check"></i><b>2.1.2</b> 站牌統計分析</a></li>
<li class="chapter" data-level="2.1.3" data-path="基本資料統計.html"><a href="基本資料統計.html#站間行駛距離計算"><i class="fa fa-check"></i><b>2.1.3</b> 站間行駛距離計算</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://www.sydney.edu.au/business/about/our-people/research-students/chia-jung-yeh-557.html" target="blank">葉家榮 Chia-Jung Yeh</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">運輸資料分析初探</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-語言基礎語法" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chapter 1</span> <strong>R 語言基礎語法</strong><a href="r-語言基礎語法.html#r-語言基礎語法" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>本章節系統性介紹 R 語言的重要語法和<code>dplyr</code>套件的功能及用法，請務必熟悉各函式，以便後續程式碼撰寫。</p>
<div id="物件object" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> 物件（Object）<a href="r-語言基礎語法.html#物件object" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>物件是 R 語言中構成資料的基本要素，常見者包含五大類：</p>
<ol style="list-style-type: decimal">
<li>向量（vector）<br />
</li>
<li>因子（factor）<br />
</li>
<li>矩陣（matrix）<br />
</li>
<li>資料框（data frame）<br />
</li>
<li>陣列（list）</li>
</ol>
<p>以下小節針對各基本要素的構建與運算詳細說明。</p>
<div id="向量vector" class="section level3 hasAnchor" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> 向量（Vector）<a href="r-語言基礎語法.html#向量vector" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量的性質</strong>
</p>
<ul>
<li>一組值<br />
</li>
<li>一維<br />
</li>
<li>資料型態可為：數值、文字、邏輯值</li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立向量</strong>
</p>
<p>建立向量可利用<code>c()</code>函式建構。</p>
<p style="font-size:18px;line-height:1">
<strong><u>數值向量</u></strong>
</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="r-語言基礎語法.html#cb1-1" tabindex="-1"></a>vec1<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>文字向量</u></strong>
</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="r-語言基礎語法.html#cb3-1" tabindex="-1"></a>vec2<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;D&quot;</span>,<span class="st">&quot;E&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>邏輯向量</u></strong>
</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="r-語言基礎語法.html#cb5-1" tabindex="-1"></a>vec3<span class="ot">=</span><span class="fu">c</span>(T,F,T,F,T)</span>
<span id="cb5-2"><a href="r-語言基礎語法.html#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="r-語言基礎語法.html#cb5-3" tabindex="-1"></a><span class="co"># 或寫完整的邏輯值</span></span>
<span id="cb5-4"><a href="r-語言基礎語法.html#cb5-4" tabindex="-1"></a>vec3<span class="ot">=</span><span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE FALSE  TRUE</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 擷取向量中特定元素</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>擷取單一元素</u></strong>
</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="r-語言基礎語法.html#cb7-1" tabindex="-1"></a>vec2[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] &quot;C&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>擷取多個連續元素</u></strong>
</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="r-語言基礎語法.html#cb9-1" tabindex="-1"></a>vec2[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] &quot;B&quot; &quot;C&quot; &quot;D&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>擷取多個非連續元素</u></strong>
</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="r-語言基礎語法.html#cb11-1" tabindex="-1"></a>vec2[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;C&quot; &quot;E&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>以邏輯值擷取元素</u></strong>
</p>
<p>請注意輸入的邏輯值向量長度必須與原向量相同！</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="r-語言基礎語法.html#cb13-1" tabindex="-1"></a>vec2[<span class="fu">c</span>(T,T,F,F,T)]</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;B&quot; &quot;E&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 連續數值資料</strong>
</p>
<p>利用<code>seq()</code>函式建立連續數值，程式碼撰寫如下：</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="r-語言基礎語法.html#cb15-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from=</span>開始數值, <span class="at">to=</span>結束數值, <span class="at">by=</span>遞增數值)</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="r-語言基礎語法.html#cb16-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from=</span><span class="dv">2</span>, <span class="at">to=</span><span class="dv">20</span>, <span class="at">by=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1]  2  4  6  8 10 12 14 16 18 20</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量運算</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>統計運算</u></strong>
</p>
<p>以下建立一個向量<code>vec4</code>作為範例，所有運算的程式碼與結果請參照表<a href="r-語言基礎語法.html#tab:vector-operation-table">1.1</a>。</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="r-語言基礎語法.html#cb18-1" tabindex="-1"></a>vec4<span class="ot">=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">3</span>,<span class="dv">15</span>,<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">12</span>)</span></code></pre></div>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:vector-operation-table">表 1.1: </span>向量運算
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
運算
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
程式碼
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
輸出結果
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
最大值
</td>
<td style="text-align:left;">
<code>max(vec4)</code>
</td>
<td style="text-align:left;">
<code>15</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
最小值
</td>
<td style="text-align:left;">
<code>min(vec4)</code>
</td>
<td style="text-align:left;">
<code>2</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
最大值索引
</td>
<td style="text-align:left;">
<code>which.max(vec4)</code>
</td>
<td style="text-align:left;">
<code>4</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
最小值索引
</td>
<td style="text-align:left;">
<code>which.min(vec4)</code>
</td>
<td style="text-align:left;">
<code>6</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
全域
</td>
<td style="text-align:left;">
<code>range(vec4)</code>
</td>
<td style="text-align:left;">
<code>2  15</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
總和
</td>
<td style="text-align:left;">
<code>sum(vec4)</code>
</td>
<td style="text-align:left;">
<code>60</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
平均
</td>
<td style="text-align:left;">
<code>mean(vec4)</code>
</td>
<td style="text-align:left;">
<code>7.5</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
中位數
</td>
<td style="text-align:left;">
<code>median(vec4)</code>
</td>
<td style="text-align:left;">
<code>7</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
乘積
</td>
<td style="text-align:left;">
<code>prod(vec4)</code>
</td>
<td style="text-align:left;">
<code>2332800</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
變異數
</td>
<td style="text-align:left;">
<code>var(vec4)</code>
</td>
<td style="text-align:left;">
<code>19.714</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
標準差
</td>
<td style="text-align:left;">
<code>sd(vec4)</code>
</td>
<td style="text-align:left;">
<code>4.44</code>
</td>
</tr>
</tbody>
</table>
<p style="font-size:18px;line-height:1">
<strong><u>數學運算</u></strong>
</p>
<p>以下利用<code>vec4</code>與新建向量<code>vec5</code>作為範例，所有運算的程式碼與結果請參照表<a href="r-語言基礎語法.html#tab:vector-calculation-table">1.2</a>。。</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="r-語言基礎語法.html#cb19-1" tabindex="-1"></a>vec5<span class="ot">=</span><span class="fu">c</span>(<span class="fl">0.57</span>,<span class="fl">4.28</span>,<span class="sc">-</span><span class="fl">1.23</span>,<span class="fl">6.58</span>,<span class="sc">-</span><span class="fl">4.67</span>,<span class="fl">2.09</span>)</span></code></pre></div>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:vector-calculation-table">表 1.2: </span>數學運算
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
運算
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
程式碼
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
輸出結果
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
絕對值
</td>
<td style="text-align:left;">
<code>abs(vec5)</code>
</td>
<td style="text-align:left;">
<code>0.57 4.28 1.23 6.58 4.67 2.09</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
根號
</td>
<td style="text-align:left;">
<code>sqrt(vec4)</code>
</td>
<td style="text-align:left;">
<code>2.236 3 1.732 3.873 2.449 1.414 2.828 3.464</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
四捨五入
</td>
<td style="text-align:left;">
<code>round(vec5, digits=1)</code>
</td>
<td style="text-align:left;">
<code>0.6  4.3  -1.2  6.6  -4.7  2.1</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
取整函數
</td>
<td style="text-align:left;">
<code>ceiling(vec5)</code>
</td>
<td style="text-align:left;">
<code>1 5 -1 7 -4 3</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
下取整函數
</td>
<td style="text-align:left;">
<code>floor(vec5)</code>
</td>
<td style="text-align:left;">
<code>0 4 -2 6 -5 2</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
對數
</td>
<td style="text-align:left;">
<code>log(vec4)</code>
</td>
<td style="text-align:left;">
<code>1.609 2.197 1.099 2.708 1.792 0.693 2.079 2.485</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
指數
</td>
<td style="text-align:left;">
<code>exp(vec4)</code>
</td>
<td style="text-align:left;">
<code>148.4 8103.1 20.1 3269017.4 403.4 7.4 2981 162754.8</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
標準化
</td>
<td style="text-align:left;">
<code>scale(vec4)</code>
</td>
<td style="text-align:left;">
<code>-0.563 0.338 -1.013 1.689 -0.338 -1.239 0.113 1.013</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
累積加總
</td>
<td style="text-align:left;">
<code>cumsum(vec4)</code>
</td>
<td style="text-align:left;">
<code>5 14 17 32 38 40 48 60</code>
</td>
</tr>
</tbody>
</table>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量長度</strong>
</p>
<p>計算向量中的元素個數。</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="r-語言基礎語法.html#cb20-1" tabindex="-1"></a><span class="fu">length</span>(vec4)</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量統計</strong>
</p>
<p>統計向量中各元素的個數。</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="r-語言基礎語法.html#cb22-1" tabindex="-1"></a>vec_tab<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;D&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;B&quot;</span>)</span>
<span id="cb22-2"><a href="r-語言基礎語法.html#cb22-2" tabindex="-1"></a><span class="fu">table</span>(vec_tab)</span></code></pre></div>
<pre><code>## vec_tab
## A B C D E 
## 2 3 2 1 4</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量排序</strong>
</p>
<ul>
<li><code>sort()</code>函式直接將向量予以由小至大之排序<br />
</li>
<li><code>order()</code>函式回傳向量由小至大排序所對應的原向量序號<br />
</li>
<li><code>rank()</code>函式回傳向量中各元素由小至大之順序</li>
</ul>
<p>程式碼撰寫如下，請參照圖<a href="r-語言基礎語法.html#fig:vector-sort-order-rank-fig">1.1</a>之示意圖。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:vector-sort-order-rank-fig"></span>
<img src="figure/sort_order_rank.png" alt="排序函式示意圖" width="90%" />
<p class="caption">
圖 1.1: 排序函式示意圖
</p>
</div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="r-語言基礎語法.html#cb24-1" tabindex="-1"></a><span class="fu">sort</span>(vec4)</span></code></pre></div>
<pre><code>## [1]  2  3  5  6  8  9 12 15</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="r-語言基礎語法.html#cb26-1" tabindex="-1"></a><span class="fu">order</span>(vec4)</span></code></pre></div>
<pre><code>## [1] 6 3 1 5 7 2 8 4</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="r-語言基礎語法.html#cb28-1" tabindex="-1"></a><span class="fu">rank</span>(vec4)</span></code></pre></div>
<pre><code>## [1] 3 6 2 8 4 1 5 7</code></pre>
<p>由<code>sort()</code>的結果可知，其將<code>vec4</code>向量由小至大排序。<code>order()</code>則是回傳排序所對應至原向量的序號，例如回傳結果的最後一個值是<code>4</code>，表示該向量中最大的數值位於向量的第 4 個元素。根據上述，我們亦可透過如下程式碼達到與<code>sort()</code>相同的結果。</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="r-語言基礎語法.html#cb30-1" tabindex="-1"></a>vec4[<span class="fu">order</span>(vec4)]</span></code></pre></div>
<pre><code>## [1]  2  3  5  6  8  9 12 15</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量唯一值</strong>
</p>
<p>去除重複的值。</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="r-語言基礎語法.html#cb32-1" tabindex="-1"></a>vec_dup<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">1</span>,<span class="dv">8</span>,<span class="dv">5</span>,<span class="dv">2</span>)</span>
<span id="cb32-2"><a href="r-語言基礎語法.html#cb32-2" tabindex="-1"></a><span class="fu">unique</span>(vec_dup)</span></code></pre></div>
<pre><code>## [1] 1 9 5 2 6 8</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 檢查使否存在 NA</strong>
</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="r-語言基礎語法.html#cb34-1" tabindex="-1"></a>vec_na<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">5</span>,<span class="cn">NA</span>,<span class="dv">6</span>,<span class="cn">NA</span>)</span>
<span id="cb34-2"><a href="r-語言基礎語法.html#cb34-2" tabindex="-1"></a><span class="fu">is.na</span>(vec_na)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE FALSE  TRUE</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 向量四則運算</strong>
</p>
<p>以下範例使用<code>vec4</code>與新建立的<code>vec6</code>示範向量的四則運算。</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="r-語言基礎語法.html#cb36-1" tabindex="-1"></a>vec6<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">7</span>,<span class="dv">4</span>,<span class="dv">10</span>,<span class="dv">3</span>)</span></code></pre></div>
<p style="font-size:18px;line-height:1">
<strong><u>兩向量運算</u></strong>
</p>
<p>兩向量運算時，兩組向量的長度（<code>length()</code>）務必相同！<br />
所有運算結果如表<a href="r-語言基礎語法.html#tab:vector-arithmetic-table">1.3</a>。</p>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:vector-arithmetic-table">表 1.3: </span>向量運算
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
運算
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
程式碼
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
輸出結果
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
<strong><code>vec4=c(5,9,3,15,6,2,8,12)</code><br />
<code>vec6=c(2,5,8,11,7,4,10,3)</code></strong>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
加法
</td>
<td style="text-align:left;">
<code>vec4+vec6</code>
</td>
<td style="text-align:left;">
<code>7 14 11 26 13 6 18 15</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
減法
</td>
<td style="text-align:left;">
<code>vec4-vec6</code>
</td>
<td style="text-align:left;">
<code>3 4 -5 4 -1 -2 -2 9</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
乘法
</td>
<td style="text-align:left;">
<code>vec4*vec6</code>
</td>
<td style="text-align:left;">
<code>10 45 24 165 42 8 80 36</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
除法
</td>
<td style="text-align:left;">
<code>vec4/vec6</code>
</td>
<td style="text-align:left;">
<code>2.5 1.8 0.375 1.364 0.857 0.5 0.8 4</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
取餘數
</td>
<td style="text-align:left;">
<code>vec4 %% vec6</code>
</td>
<td style="text-align:left;">
<code>1 4 3 4 6 2 8 0</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
取除數
</td>
<td style="text-align:left;">
<code>vec4 %/% vec6</code>
</td>
<td style="text-align:left;">
<code>2 1 0 1 0 0 0 4</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
內積
</td>
<td style="text-align:left;">
<code>vec4 %*% vec6</code>
</td>
<td style="text-align:left;">
<code>410</code>
</td>
</tr>
</tbody>
</table>
<p style="font-size:18px;line-height:1">
<strong><u>向量與元素運算</u></strong>
</p>
<p>一組向量與一個元素之間的運算，即是將向量中的每一個元素分別與該元素運算。</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="r-語言基礎語法.html#cb37-1" tabindex="-1"></a>vec6<span class="sc">+</span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1]  7 10 13 16 12  9 15  8</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="r-語言基礎語法.html#cb39-1" tabindex="-1"></a>vec6<span class="sc">*</span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] 10 25 40 55 35 20 50 15</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 轉換資料型態</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>文字轉換為數值</u></strong>
</p>
<p>建立<code>vec_cha</code>文字資料</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="r-語言基礎語法.html#cb41-1" tabindex="-1"></a>vec_cha<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;1&quot;</span>,<span class="st">&quot;2&quot;</span>,<span class="st">&quot;3&quot;</span>,<span class="st">&quot;4&quot;</span>,<span class="st">&quot;5&quot;</span>)</span></code></pre></div>
<p>先利用<code>class()</code>函式檢查<code>vec_cha</code>資料型態</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="r-語言基礎語法.html#cb42-1" tabindex="-1"></a><span class="fu">class</span>(vec_cha)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>利用<code>as.numeric()</code>函式轉化為數值資料</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="r-語言基礎語法.html#cb44-1" tabindex="-1"></a><span class="fu">as.numeric</span>(vec_cha)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>數值轉換為文字</u></strong>
</p>
<p>另外，可利用<code>as.character()</code>函式轉化為文字資料</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="r-語言基礎語法.html#cb46-1" tabindex="-1"></a>vec_num<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span>
<span id="cb46-2"><a href="r-語言基礎語法.html#cb46-2" tabindex="-1"></a><span class="fu">as.character</span>(vec_num)</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立重複資料</strong>
</p>
<p>利用<code>rep()</code>函式建立重複資料，該函式主要有兩大參數可以設定：</p>
<ul>
<li><code>each=</code>是設定每一個元素重複的次數</li>
<li><code>times=</code>是設定該向量整體循環的次數</li>
</ul>
<p>以實際範例說明之，程式碼撰寫如下：</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="r-語言基礎語法.html#cb48-1" tabindex="-1"></a>vec6<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">7</span>,<span class="dv">4</span>,<span class="dv">10</span>,<span class="dv">3</span>)</span>
<span id="cb48-2"><a href="r-語言基礎語法.html#cb48-2" tabindex="-1"></a></span>
<span id="cb48-3"><a href="r-語言基礎語法.html#cb48-3" tabindex="-1"></a><span class="co"># 設定每一個元素重複的次數</span></span>
<span id="cb48-4"><a href="r-語言基礎語法.html#cb48-4" tabindex="-1"></a><span class="fu">rep</span>(vec6, <span class="at">each=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1]  2  2  5  5  8  8 11 11  7  7  4  4 10 10  3  3</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="r-語言基礎語法.html#cb50-1" tabindex="-1"></a><span class="co"># 設定向量整體重複的次數</span></span>
<span id="cb50-2"><a href="r-語言基礎語法.html#cb50-2" tabindex="-1"></a><span class="fu">rep</span>(vec6, <span class="at">times=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1]  2  5  8 11  7  4 10  3  2  5  8 11  7  4 10  3</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳向量中 TRUE 索引值</strong>
</p>
<p><code>which()</code>函式可用以回傳向量中 TRUE 的索引值。</p>
<p style="font-size:18px;line-height:1">
<strong><u>TRUE 索引值</u></strong>
</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="r-語言基礎語法.html#cb52-1" tabindex="-1"></a>vec3<span class="ot">=</span><span class="fu">c</span>(T,F,T,F,T)</span>
<span id="cb52-2"><a href="r-語言基礎語法.html#cb52-2" tabindex="-1"></a><span class="fu">which</span>(vec3)</span></code></pre></div>
<pre><code>## [1] 1 3 5</code></pre>
<p>由上述範例可知，TRUE 位於<code>vec3</code>向量的第 1、3、5 個元素。</p>
<p style="font-size:18px;line-height:1">
<strong><u>回傳符合條件索引值</u></strong>
</p>
<p>除了上述基本案例外，通常我們會藉由運算子（<code>==</code>, <code>&gt;</code>, <code>&lt;</code>, …）以尋找符合條件的元素，並進一步透過<code>which()</code>函式回傳結果為 TRUE 的索引值。範例如下。</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="r-語言基礎語法.html#cb54-1" tabindex="-1"></a>vec6<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">7</span>,<span class="dv">4</span>,<span class="dv">10</span>,<span class="dv">3</span>)</span>
<span id="cb54-2"><a href="r-語言基礎語法.html#cb54-2" tabindex="-1"></a></span>
<span id="cb54-3"><a href="r-語言基礎語法.html#cb54-3" tabindex="-1"></a><span class="co"># vec6大於5的邏輯判斷</span></span>
<span id="cb54-4"><a href="r-語言基礎語法.html#cb54-4" tabindex="-1"></a>vec6<span class="sc">&gt;</span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE  TRUE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="r-語言基礎語法.html#cb56-1" tabindex="-1"></a><span class="co"># 回傳vec6大於5的索引值</span></span>
<span id="cb56-2"><a href="r-語言基礎語法.html#cb56-2" tabindex="-1"></a><span class="fu">which</span>(vec6<span class="sc">&gt;</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 3 4 5 7</code></pre>
</div>
<div id="因子factor" class="section level3 hasAnchor" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> 因子（Factor）<a href="r-語言基礎語法.html#因子factor" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 因子的性質</strong>
</p>
<ul>
<li>由文字向量建立<br />
</li>
<li>須設定文字層級<br />
</li>
<li>設立因子的延伸應用：
<ul>
<li>在<code>ggplot2</code>套件中調整圖例順序<br />
</li>
<li>在計量模型中建立啞變量（dummy variables）</li>
</ul></li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立因子</strong>
</p>
<p>因子的建立可以使用<code>factor()</code>函式，其中必須透過<code>levels=</code>參數設定層級，程式碼建構如下：</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="r-語言基礎語法.html#cb58-1" tabindex="-1"></a><span class="fu">factor</span>(文字向量, <span class="at">levels=</span>期望的層級向量)</span></code></pre></div>
<p>以下列簡單範例說明因子的功能，建立<code>school</code>之文字向量。</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="r-語言基礎語法.html#cb59-1" tabindex="-1"></a>school<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;大學&quot;</span>,<span class="st">&quot;幼稚園&quot;</span>,<span class="st">&quot;國小&quot;</span>,<span class="st">&quot;高中&quot;</span>,<span class="st">&quot;國中&quot;</span>)</span></code></pre></div>
<p>若欲將<code>school</code>轉換為具有層級意義的因子，並依據學校層級排序，則程式碼撰寫如下：</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="r-語言基礎語法.html#cb60-1" tabindex="-1"></a>school_fc<span class="ot">=</span><span class="fu">factor</span>(school, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;幼稚園&quot;</span>,<span class="st">&quot;國小&quot;</span>,<span class="st">&quot;國中&quot;</span>,<span class="st">&quot;高中&quot;</span>,<span class="st">&quot;大學&quot;</span>))</span>
<span id="cb60-2"><a href="r-語言基礎語法.html#cb60-2" tabindex="-1"></a>school_fc</span></code></pre></div>
<pre><code>## [1] 大學   幼稚園 國小   高中   國中  
## Levels: 幼稚園 國小 國中 高中 大學</code></pre>
<p>由上述可發現，有別於文字向量，因子會另出現「Levels:」的訊息，表示文字具有層級意義。<br />
最後可利用<code>is.factor()</code>函式判斷一變數是否為因子，抑或利用<code>class()</code>函式逕查詢該變數的資料型態。</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="r-語言基礎語法.html#cb62-1" tabindex="-1"></a><span class="fu">is.factor</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="r-語言基礎語法.html#cb64-1" tabindex="-1"></a><span class="fu">class</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<p>上述所建立的因子具有層級意義，故可以排序，可進一步利用<code>sort()</code>函式排序，程式碼如下：</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="r-語言基礎語法.html#cb66-1" tabindex="-1"></a><span class="fu">sort</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] 幼稚園 國小   國中   高中   大學  
## Levels: 幼稚園 國小 國中 高中 大學</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立有序因子</strong>
</p>
<p>上述所建立的因子具有層級意義，可以排序，然而各元素間不具有大小意義，無法直接比較大小值。以<code>school_fc</code>為例，我們所設定的「大學」層級高於「幼稚園」，然而這不意謂著<code>大學&gt;幼稚園</code>。因此若直接拿兩元素相比較大小，程式會出現警告（大小關係對因子無意義），且回傳<code>NA</code>，試驗如下：</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="r-語言基礎語法.html#cb68-1" tabindex="-1"></a>school_fc[<span class="dv">1</span>]<span class="sc">&gt;</span>school_fc[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## Warning in Ops.factor(school_fc[1], school_fc[2]): &#39;&gt;&#39; 對因子沒有意義</code></pre>
<pre><code>## [1] NA</code></pre>
<p>若欲建立具大小關係的因子，則需在<code>factor()</code>函式中設定<code>order=T</code>參數，以表達具有順序意義。</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="r-語言基礎語法.html#cb71-1" tabindex="-1"></a>school_order<span class="ot">=</span><span class="fu">factor</span>(school, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;幼稚園&quot;</span>,<span class="st">&quot;國小&quot;</span>,<span class="st">&quot;國中&quot;</span>,<span class="st">&quot;高中&quot;</span>,<span class="st">&quot;大學&quot;</span>), <span class="at">order=</span>T)</span>
<span id="cb71-2"><a href="r-語言基礎語法.html#cb71-2" tabindex="-1"></a>school_order</span></code></pre></div>
<pre><code>## [1] 大學   幼稚園 國小   高中   國中  
## Levels: 幼稚園 &lt; 國小 &lt; 國中 &lt; 高中 &lt; 大學</code></pre>
<p>由輸出結果可發現，層級中具有「&lt;」符號，用以表達有序之大小關係。</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="r-語言基礎語法.html#cb73-1" tabindex="-1"></a><span class="co"># 比較幼稚園與大學的大小關係</span></span>
<span id="cb73-2"><a href="r-語言基礎語法.html#cb73-2" tabindex="-1"></a>school_order[<span class="dv">1</span>]<span class="sc">&gt;</span>school_order[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 轉換資料型態</strong>
</p>
<p>可透過<code>as.character()</code>將因子轉換為單純的文字向量，亦可藉由<code>as.numeric()</code>將因子轉換為數值，而該數值乃依據層級的大小給定，層級越高（後）者，數值愈大。以上述<code>school_fc</code>為案例說明。</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="r-語言基礎語法.html#cb75-1" tabindex="-1"></a><span class="co"># 轉換為文字向量</span></span>
<span id="cb75-2"><a href="r-語言基礎語法.html#cb75-2" tabindex="-1"></a><span class="fu">as.character</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] &quot;大學&quot;   &quot;幼稚園&quot; &quot;國小&quot;   &quot;高中&quot;   &quot;國中&quot;</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="r-語言基礎語法.html#cb77-1" tabindex="-1"></a><span class="co"># 轉換為數值向量</span></span>
<span id="cb77-2"><a href="r-語言基礎語法.html#cb77-2" tabindex="-1"></a><span class="fu">as.numeric</span>(school_fc)</span></code></pre></div>
<pre><code>## [1] 5 1 2 4 3</code></pre>
</div>
<div id="矩陣matrix" class="section level3 hasAnchor" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> 矩陣（Matrix）<a href="r-語言基礎語法.html#矩陣matrix" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 矩陣的性質</strong>
</p>
<ul>
<li>二維<br />
</li>
<li>含括多個橫列（rows）與直行（columns）<br />
</li>
<li>可以組合「相同」資料型態的向量 (文字向量、數值向量、邏輯向量)</li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立矩陣</strong>
</p>
<p>利用<code>matrix()</code>函式建立矩陣，其中必須設定兩參數：</p>
<ul>
<li><code>nrow=</code> 設定矩陣的橫列數<br />
</li>
<li><code>ncol=</code> 設定矩陣的直行數</li>
</ul>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="r-語言基礎語法.html#cb79-1" tabindex="-1"></a><span class="fu">matrix</span>(向量, <span class="at">nrow=</span>, <span class="at">ncol=</span>)</span></code></pre></div>
<p>範例如下：</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="r-語言基礎語法.html#cb80-1" tabindex="-1"></a>mat1<span class="ot">=</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="at">nrow=</span><span class="dv">3</span>, <span class="at">ncol=</span><span class="dv">5</span>)</span>
<span id="cb80-2"><a href="r-語言基礎語法.html#cb80-2" tabindex="-1"></a>mat1</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    4    7   10   13
## [2,]    2    5    8   11   14
## [3,]    3    6    9   12   15</code></pre>
<p>由回傳結果可發現，該矩陣是先由上至下，再由左至右填入向量。若希望矩陣的填法是先由左至右，再由上至下，則須設定參數<code>byrow=T</code>，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="r-語言基礎語法.html#cb82-1" tabindex="-1"></a>mat2<span class="ot">=</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="at">nrow=</span><span class="dv">3</span>, <span class="at">ncol=</span><span class="dv">5</span>, <span class="at">byrow=</span>T)</span>
<span id="cb82-2"><a href="r-語言基礎語法.html#cb82-2" tabindex="-1"></a>mat2</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    2    3    4    5
## [2,]    6    7    8    9   10
## [3,]   11   12   13   14   15</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 查看矩陣的維度</strong>
</p>
<p>矩陣是二維的資料，若要進一步該二維資料中的橫列與直行個數，可利用<code>nrow()</code>與<code>ncol()</code>函式分別查看，或逕利用<code>dim()</code>函式查看之。</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="r-語言基礎語法.html#cb84-1" tabindex="-1"></a><span class="fu">nrow</span>(mat2)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="r-語言基礎語法.html#cb86-1" tabindex="-1"></a><span class="fu">ncol</span>(mat2)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="r-語言基礎語法.html#cb88-1" tabindex="-1"></a><span class="fu">dim</span>(mat2)</span></code></pre></div>
<pre><code>## [1] 3 5</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳矩陣的特定元素</strong>
</p>
<p>利用中括號<code>[ , ]</code>可回傳特定元素的值，其中逗點前必須放置橫列的索引值，而逗點後則是直行的索引值。<br />
以第 2 橫列第 4 行為例，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="r-語言基礎語法.html#cb90-1" tabindex="-1"></a>mat2[<span class="dv">2</span>, <span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 轉置矩陣</strong>
</p>
<p>藉由<code>t()</code>函式將矩陣予以轉置（transpose）。</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="r-語言基礎語法.html#cb92-1" tabindex="-1"></a><span class="fu">t</span>(mat2)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    6   11
## [2,]    2    7   12
## [3,]    3    8   13
## [4,]    4    9   14
## [5,]    5   10   15</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 矩陣運算</strong>
</p>
<p>矩陣的運算是 R 語言的利器，執行效率相當高，在許多統計模型背後的運算亦是牽涉複雜的矩陣運算。以下簡單介紹重要的運算函式。</p>
<p style="font-size:18px;line-height:1">
<strong><u>橫列與直行運算</u></strong>
</p>
<p>橫列與直行的加總與平均值計算彙整如表<a href="r-語言基礎語法.html#tab:matrix-operation-table">1.4</a>。</p>
<table class="table table-striped table-hover" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:matrix-operation-table">表 1.4: </span>矩陣運算
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
加總
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #8E8E8E !important;">
平均
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: middle !important;" rowspan="2">
橫列
</td>
<td style="text-align:left;">
<code>rowSums(mat2)</code>
</td>
<td style="text-align:left;">
<code>rowMeans(mat2)</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>15 40 65</code>
</td>
<td style="text-align:left;">
<code>3 8 13</code>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;vertical-align: middle !important;" rowspan="2">
直行
</td>
<td style="text-align:left;">
<code>colSums(mat2)</code>
</td>
<td style="text-align:left;">
<code>colMeans(mat2)</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>18 21 24 27 30</code>
</td>
<td style="text-align:left;">
<code>6 7 8 9 10</code>
</td>
</tr>
</tbody>
</table>
<p style="font-size:18px;line-height:1">
<strong><u><code>apply()</code>函式應用</u></strong>
</p>
<p>試想若沒有<a href="r-語言基礎語法.html#tab:matrix-operation-table">1.4</a>中的各個函式用以處理矩陣資料，我們可以透過<code>for()</code>迴圈逐行或逐列針對矩陣運算，以橫列加總（rowSums）為例，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="r-語言基礎語法.html#cb94-1" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(mat2))){</span>
<span id="cb94-2"><a href="r-語言基礎語法.html#cb94-2" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">sum</span>(mat2[i,]), <span class="st">&quot; &quot;</span>)</span>
<span id="cb94-3"><a href="r-語言基礎語法.html#cb94-3" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## 15  40  65</code></pre>
<p>然而如是的寫法效率極差，在 R 語言中類似 <code>for()</code> 迴圈的程序可以考慮更高效率的<code>apply()</code>函式取代之，程式語法如下：</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="r-語言基礎語法.html#cb96-1" tabindex="-1"></a><span class="fu">apply</span>(矩陣資料, 方向, 運算函式)</span></code></pre></div>
<p>其中<code>方向</code>有兩種選擇：<code>1</code>表示逐列（row）運算；<code>2</code>表示逐行（column）運算。運算函式可為前述向量運算的任一函式。<code>apply()</code>函式的運算概念如圖<a href="r-語言基礎語法.html#fig:apply-fig">1.2</a>之示意圖。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:apply-fig"></span>
<img src="figure/apply.png" alt="`apply()`函式運算示意圖" width="60%" />
<p class="caption">
圖 1.2: <code>apply()</code>函式運算示意圖
</p>
</div>
<p>再次以<code>mat2</code>矩陣為範例，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="r-語言基礎語法.html#cb97-1" tabindex="-1"></a><span class="co"># 逐列加總 (=rowSums)</span></span>
<span id="cb97-2"><a href="r-語言基礎語法.html#cb97-2" tabindex="-1"></a><span class="fu">apply</span>(mat2, <span class="dv">1</span>, sum)</span></code></pre></div>
<pre><code>## [1] 15 40 65</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="r-語言基礎語法.html#cb99-1" tabindex="-1"></a><span class="co"># 逐行平均 (=colMeans)</span></span>
<span id="cb99-2"><a href="r-語言基礎語法.html#cb99-2" tabindex="-1"></a><span class="fu">apply</span>(mat2, <span class="dv">2</span>, mean)</span></code></pre></div>
<pre><code>## [1]  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="r-語言基礎語法.html#cb101-1" tabindex="-1"></a><span class="co"># 逐列尋找最大值索引值</span></span>
<span id="cb101-2"><a href="r-語言基礎語法.html#cb101-2" tabindex="-1"></a><span class="fu">apply</span>(mat2, <span class="dv">1</span>, which.max)</span></code></pre></div>
<pre><code>## [1] 5 5 5</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="r-語言基礎語法.html#cb103-1" tabindex="-1"></a><span class="co"># 逐行計算標準差</span></span>
<span id="cb103-2"><a href="r-語言基礎語法.html#cb103-2" tabindex="-1"></a><span class="fu">apply</span>(mat2, <span class="dv">2</span>, sd)</span></code></pre></div>
<pre><code>## [1] 5 5 5 5 5</code></pre>
</div>
<div id="資料框data-frame" class="section level3 hasAnchor" number="1.1.4">
<h3><span class="header-section-number">1.1.4</span> 資料框（Data Frame）<a href="r-語言基礎語法.html#資料框data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 資料框的性質</strong>
</p>
<ul>
<li>類似矩陣（Matrix），但可涵括多種不同的資料型態<br />
</li>
<li>功能類似 Excel 的工作表<br />
</li>
<li>資料分析中最常見的資料型態<br />
</li>
<li>可利用<code>dplyr</code>套件處理資料 (參見<a href="r-語言基礎語法.html#dplyr資料處理"><code>dplyr</code>資料處理</a>)</li>
</ul>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 建立資料框</strong>
</p>
<p>資料框的建立如下程式碼：</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="r-語言基礎語法.html#cb105-1" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">VAR1=</span><span class="fu">c</span>(), <span class="at">VAR2=</span><span class="fu">c</span>(), <span class="at">VAR3=</span><span class="fu">c</span>(), ...)</span></code></pre></div>
<p>VAR1、VAR2、VAR3 皆表示資料框中的變數名稱，亦即表格中的表頭名。</p>
<p>以下簡單範例說明資料框的建構。</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="r-語言基礎語法.html#cb106-1" tabindex="-1"></a>StuScore<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">StudentID=</span><span class="fu">c</span>(<span class="st">&quot;ID1&quot;</span>,<span class="st">&quot;ID2&quot;</span>,<span class="st">&quot;ID3&quot;</span>,<span class="st">&quot;ID4&quot;</span>,<span class="st">&quot;ID5&quot;</span>),</span>
<span id="cb106-2"><a href="r-語言基礎語法.html#cb106-2" tabindex="-1"></a>                    <span class="at">Name=</span><span class="fu">c</span>(<span class="st">&quot;Bob&quot;</span>,<span class="st">&quot;Mary&quot;</span>,<span class="st">&quot;Robert&quot;</span>,<span class="st">&quot;Jason&quot;</span>,<span class="st">&quot;Jane&quot;</span>),</span>
<span id="cb106-3"><a href="r-語言基礎語法.html#cb106-3" tabindex="-1"></a>                    <span class="at">Score=</span><span class="fu">c</span>(<span class="dv">60</span>,<span class="dv">80</span>,<span class="dv">40</span>,<span class="dv">50</span>,<span class="dv">100</span>))</span>
<span id="cb106-4"><a href="r-語言基礎語法.html#cb106-4" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID   Name Score
## 1       ID1    Bob    60
## 2       ID2   Mary    80
## 3       ID3 Robert    40
## 4       ID4  Jason    50
## 5       ID5   Jane   100</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳資料欄位名稱</strong>
</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="r-語言基礎語法.html#cb108-1" tabindex="-1"></a><span class="fu">colnames</span>(StuScore)</span>
<span id="cb108-2"><a href="r-語言基礎語法.html#cb108-2" tabindex="-1"></a></span>
<span id="cb108-3"><a href="r-語言基礎語法.html#cb108-3" tabindex="-1"></a><span class="co"># 或可以直接使用names()函式</span></span>
<span id="cb108-4"><a href="r-語言基礎語法.html#cb108-4" tabindex="-1"></a><span class="fu">names</span>(StuScore)</span></code></pre></div>
<pre><code>## [1] &quot;StudentID&quot; &quot;Name&quot;      &quot;Score&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳特定欄列</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>回傳指定橫列</u></strong>
</p>
<p>將列號或邏輯向量置於中括號內的逗號前，惟須注意，使用邏輯向量時，其長度必須與資料列數相同。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="r-語言基礎語法.html#cb110-1" tabindex="-1"></a><span class="co"># 使用列號</span></span>
<span id="cb110-2"><a href="r-語言基礎語法.html#cb110-2" tabindex="-1"></a>StuScore[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>),]</span>
<span id="cb110-3"><a href="r-語言基礎語法.html#cb110-3" tabindex="-1"></a></span>
<span id="cb110-4"><a href="r-語言基礎語法.html#cb110-4" tabindex="-1"></a><span class="co"># 使用邏輯向量</span></span>
<span id="cb110-5"><a href="r-語言基礎語法.html#cb110-5" tabindex="-1"></a>StuScore[<span class="fu">c</span>(T,F,T,F,T),]</span></code></pre></div>
<pre><code>##   StudentID   Name Score
## 1       ID1    Bob    60
## 3       ID3 Robert    40
## 5       ID5   Jane   100</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>回傳指定直行</u></strong>
</p>
<p>有三種方法可回傳指定（多個）直行，包括：</p>
<ul>
<li>列號向量<br />
</li>
<li>邏輯向量<br />
</li>
<li>欄位名稱向量</li>
</ul>
<p>其中使用邏輯向量時，其長度與資料行數必須相同。程式碼撰寫如下。</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="r-語言基礎語法.html#cb112-1" tabindex="-1"></a><span class="co"># 列號向量</span></span>
<span id="cb112-2"><a href="r-語言基礎語法.html#cb112-2" tabindex="-1"></a>StuScore[, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)]</span>
<span id="cb112-3"><a href="r-語言基礎語法.html#cb112-3" tabindex="-1"></a></span>
<span id="cb112-4"><a href="r-語言基礎語法.html#cb112-4" tabindex="-1"></a><span class="co"># 邏輯向量</span></span>
<span id="cb112-5"><a href="r-語言基礎語法.html#cb112-5" tabindex="-1"></a>StuScore[, <span class="fu">c</span>(T,F,T,F,T)]</span>
<span id="cb112-6"><a href="r-語言基礎語法.html#cb112-6" tabindex="-1"></a></span>
<span id="cb112-7"><a href="r-語言基礎語法.html#cb112-7" tabindex="-1"></a><span class="co"># 欄位名稱向量</span></span>
<span id="cb112-8"><a href="r-語言基礎語法.html#cb112-8" tabindex="-1"></a>StuScore[, <span class="fu">c</span>(<span class="st">&quot;StudentID&quot;</span>,<span class="st">&quot;Name&quot;</span>)]</span></code></pre></div>
<pre><code>##   StudentID   Name
## 1       ID1    Bob
## 2       ID2   Mary
## 3       ID3 Robert
## 4       ID4  Jason
## 5       ID5   Jane</code></pre>
<p>此外，資料框亦可透過「<code>$</code>」回傳特定單一欄位，程式碼撰寫如下。</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="r-語言基礎語法.html#cb114-1" tabindex="-1"></a>資料<span class="sc">$</span>欄位名稱</span></code></pre></div>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="r-語言基礎語法.html#cb115-1" tabindex="-1"></a>StuScore<span class="sc">$</span>Name</span></code></pre></div>
<pre><code>## [1] &quot;Bob&quot;    &quot;Mary&quot;   &quot;Robert&quot; &quot;Jason&quot;  &quot;Jane&quot;</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 回傳與編輯指定元素</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>使用行列索引值</u></strong>
</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="r-語言基礎語法.html#cb117-1" tabindex="-1"></a>資料[橫列索引, 直行索引]</span></code></pre></div>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="r-語言基礎語法.html#cb118-1" tabindex="-1"></a>StuScore[<span class="dv">2</span>,<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Mary&quot;</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>編輯指定元素</u></strong>
</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="r-語言基礎語法.html#cb120-1" tabindex="-1"></a>StuScore[<span class="dv">2</span>,<span class="dv">2</span>]<span class="ot">=</span><span class="st">&quot;Jessica&quot;</span></span>
<span id="cb120-2"><a href="r-語言基礎語法.html#cb120-2" tabindex="-1"></a></span>
<span id="cb120-3"><a href="r-語言基礎語法.html#cb120-3" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID    Name Score
## 1       ID1     Bob    60
## 2       ID2 Jessica    80
## 3       ID3  Robert    40
## 4       ID4   Jason    50
## 5       ID5    Jane   100</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 查看前後六筆資料</strong>
</p>
<p>在此我們使用 R 語言內建的<code>iris</code>資料說明。<code>iris</code>資料共計 150 個樣本，並含括三種不同的鳶尾花（setosa、virginica、versicolor），欄位則包含花瓣與花萼的長度與寬度。</p>
<p style="font-size:18px;line-height:1">
<strong><u>回傳前六筆資料</u></strong>
</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="r-語言基礎語法.html#cb122-1" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>回傳後六筆資料</u></strong>
</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="r-語言基礎語法.html#cb124-1" tabindex="-1"></a><span class="fu">tail</span>(iris)</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 145          6.7         3.3          5.7         2.5 virginica
## 146          6.7         3.0          5.2         2.3 virginica
## 147          6.3         2.5          5.0         1.9 virginica
## 148          6.5         3.0          5.2         2.0 virginica
## 149          6.2         3.4          5.4         2.3 virginica
## 150          5.9         3.0          5.1         1.8 virginica</code></pre>
<p style="color:#003D79;font-size:18px;line-height:2">
<strong>⌾ 擴增資料框</strong>
</p>
<p style="font-size:18px;line-height:1">
<strong><u>擴增資料列（新增紀錄）</u></strong>
</p>
<p>若欲新增資料，可以透過<code>rbind()</code>函式連結。程式碼如下。</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="r-語言基礎語法.html#cb126-1" tabindex="-1"></a><span class="co"># 建立欲新增的資料</span></span>
<span id="cb126-2"><a href="r-語言基礎語法.html#cb126-2" tabindex="-1"></a>new_student<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">StudentID=</span><span class="st">&quot;ID6&quot;</span>, <span class="at">Name=</span><span class="st">&quot;Bob&quot;</span>, <span class="at">Score=</span><span class="dv">90</span>)</span>
<span id="cb126-3"><a href="r-語言基礎語法.html#cb126-3" tabindex="-1"></a></span>
<span id="cb126-4"><a href="r-語言基礎語法.html#cb126-4" tabindex="-1"></a><span class="co"># 利用rbind()函式相接</span></span>
<span id="cb126-5"><a href="r-語言基礎語法.html#cb126-5" tabindex="-1"></a>StuScore<span class="ot">=</span><span class="fu">rbind</span>(StuScore, new_student)</span>
<span id="cb126-6"><a href="r-語言基礎語法.html#cb126-6" tabindex="-1"></a></span>
<span id="cb126-7"><a href="r-語言基礎語法.html#cb126-7" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID    Name Score
## 1       ID1     Bob    60
## 2       ID2 Jessica    80
## 3       ID3  Robert    40
## 4       ID4   Jason    50
## 5       ID5    Jane   100
## 6       ID6     Bob    90</code></pre>
<p style="font-size:18px;line-height:1">
<strong><u>擴增資料欄（新增屬性）</u></strong>
</p>
<p>若欲針對整份資料新增屬性（如<code>StuScore</code>中增加性別欄位…），可以透過<code>cbind()</code>函式連結。程式碼如下。</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="r-語言基礎語法.html#cb128-1" tabindex="-1"></a><span class="co"># 建立欲新增之屬性</span></span>
<span id="cb128-2"><a href="r-語言基礎語法.html#cb128-2" tabindex="-1"></a>Gender<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>)</span>
<span id="cb128-3"><a href="r-語言基礎語法.html#cb128-3" tabindex="-1"></a></span>
<span id="cb128-4"><a href="r-語言基礎語法.html#cb128-4" tabindex="-1"></a><span class="co"># 利用cbind()函式連結</span></span>
<span id="cb128-5"><a href="r-語言基礎語法.html#cb128-5" tabindex="-1"></a>StuScore<span class="ot">=</span><span class="fu">cbind</span>(StuScore, Gender)</span>
<span id="cb128-6"><a href="r-語言基礎語法.html#cb128-6" tabindex="-1"></a></span>
<span id="cb128-7"><a href="r-語言基礎語法.html#cb128-7" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID    Name Score Gender
## 1       ID1     Bob    60      M
## 2       ID2 Jessica    80      F
## 3       ID3  Robert    40      M
## 4       ID4   Jason    50      M
## 5       ID5    Jane   100      F
## 6       ID6     Bob    90      M</code></pre>
<p>或可以直接透過「<code>$</code>」新增新欄位內容。程式碼如下：</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="r-語言基礎語法.html#cb130-1" tabindex="-1"></a>資料<span class="sc">$</span>新欄位<span class="ot">=</span><span class="fu">c</span>(...)</span></code></pre></div>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="r-語言基礎語法.html#cb131-1" tabindex="-1"></a>StuScore<span class="sc">$</span>Height<span class="ot">=</span><span class="fu">c</span>(<span class="dv">180</span>,<span class="dv">165</span>,<span class="dv">170</span>,<span class="dv">160</span>,<span class="dv">175</span>,<span class="dv">180</span>)</span>
<span id="cb131-2"><a href="r-語言基礎語法.html#cb131-2" tabindex="-1"></a></span>
<span id="cb131-3"><a href="r-語言基礎語法.html#cb131-3" tabindex="-1"></a>StuScore</span></code></pre></div>
<pre><code>##   StudentID    Name Score Gender Height
## 1       ID1     Bob    60      M    180
## 2       ID2 Jessica    80      F    165
## 3       ID3  Robert    40      M    170
## 4       ID4   Jason    50      M    160
## 5       ID5    Jane   100      F    175
## 6       ID6     Bob    90      M    180</code></pre>
</div>
</div>
<div id="dplyr資料處理" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> <code>dplyr</code>資料處理<a href="r-語言基礎語法.html#dplyr資料處理" class="anchor-section" aria-label="Anchor link to header"></a></h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="基本資料統計.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": "https://github.com/ChiaJung-Yeh/Transport-Analysis/tree/master/01-Basic-R.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["series.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
